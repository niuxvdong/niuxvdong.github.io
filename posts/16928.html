<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>数据库教程之查询数据 | 小牛博客</title><meta name="keywords" content="SELECT,查询"><meta name="author" content="ITNXD"><meta name="copyright" content="ITNXD"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="¶首先来首歌曲来放松一下吧！       ¶一、准备数据  廖雪峰SQL教程例子：例子代码点击这里！ 将上方链接或者下方代码保存到文本文件，改名为init-test-data.sql。然后再本地cmd运行$ mysql -u root -p &lt; init-test-data.sql即可创建一个名为test的数据库，有两张表classes和students! 注意要在cmd，不要使用power">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库教程之查询数据">
<meta property="og:url" content="https://www.itnxd.cn/posts/16928.html">
<meta property="og:site_name" content="小牛博客">
<meta property="og:description" content="¶首先来首歌曲来放松一下吧！       ¶一、准备数据  廖雪峰SQL教程例子：例子代码点击这里！ 将上方链接或者下方代码保存到文本文件，改名为init-test-data.sql。然后再本地cmd运行$ mysql -u root -p &lt; init-test-data.sql即可创建一个名为test的数据库，有两张表classes和students! 注意要在cmd，不要使用power">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/niuxvdong/pic@abcb0ee99d47116058305ed624d2b854c301e126/2021/02/06/a748bd6cf1ce9794a730ee2ac026ca16.png">
<meta property="article:published_time" content="2020-06-02T09:37:39.000Z">
<meta property="article:modified_time" content="2021-09-13T07:54:02.092Z">
<meta property="article:author" content="ITNXD">
<meta property="article:tag" content="SELECT">
<meta property="article:tag" content="查询">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/niuxvdong/pic@abcb0ee99d47116058305ed624d2b854c301e126/2021/02/06/a748bd6cf1ce9794a730ee2ac026ca16.png"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/favicon.ico"><link rel="canonical" href="https://www.itnxd.cn/posts/16928"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="H9LW1qdxrkJ55YbkfWulMvpaexxx3Rk0Yo6dVANeNHc"/><meta name="baidu-site-verification" content="code-YglH3DObCb"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8d3bd59bf6303bd5f44677445d369df5";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":300,"languages":{"author":"作者: ITNXD","link":"链接: ","source":"来源: 小牛博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据库教程之查询数据',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-09-13 15:54:02'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><link rel="stylesheet" href="/css/my.css"><style type="text/css">#toggle-sidebar {bottom: 80px}</style><link rel="stylesheet" href="//at.alicdn.com/t/font_1828588_zrw9f0qqie.css"><link rel="stylesheet" href="/self/atom-one-light.css"><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="小牛博客" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@2f11f173da64ba6a270c2e93d23e00911b1019d3/2021/02/06/e373babbf340391956b673128a84185d.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">247</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">191</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">25</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/niuxvdong/pic@abcb0ee99d47116058305ed624d2b854c301e126/2021/02/06/a748bd6cf1ce9794a730ee2ac026ca16.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">小牛博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">数据库教程之查询数据</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-06-02T09:37:39.000Z" title="发表于 2020-06-02 17:37:39">2020-06-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-09-13T07:54:02.092Z" title="更新于 2021-09-13 15:54:02">2021-09-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93/">关系型数据库</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>41分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="数据库教程之查询数据"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="首先来首歌曲来放松一下吧！"><a class="header-anchor" href="#首先来首歌曲来放松一下吧！">¶</a>首先来首歌曲来放松一下吧！</h1>

    <div id="aplayer-BqhkdioU" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="1371353582" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#FF4081"></div>
<h1 id="一、准备数据"><a class="header-anchor" href="#一、准备数据">¶</a>一、准备数据</h1>
<blockquote>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/michaelliao/learn-sql/blob/master/mysql/init-test-data.sql">廖雪峰SQL教程例子：例子代码点击这里！</a></p>
<p>将上方链接或者下方代码保存到文本文件，改名为<code>init-test-data.sql</code>。然后再本地cmd运行<code>$ mysql -u root -p &lt; init-test-data.sql</code>即可创建一个名为<code>test</code>的数据库，有两张表<code>classes</code>和<code>students</code>!</p>
<p>注意要在<code>cmd</code>，不要使用<code>powershell</code>，<code>powershell</code>无法识别命令行<code>&lt;</code>这个符号！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 如果test数据库不存在，就创建test数据库：</span><br><span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> test;<br><br><span class="hljs-comment">-- 切换到test数据库</span><br>USE test;<br><br><span class="hljs-comment">-- 删除classes表和students表（如果存在）：</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> classes;<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> students;<br><br><span class="hljs-comment">-- 创建classes表：</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> classes (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span> (id)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br><br><span class="hljs-comment">-- 创建students表：</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> students (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>    class_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    gender <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    score <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span> (id)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br><br><span class="hljs-comment">-- 插入classes记录：</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> classes(id, name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'一班'</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> classes(id, name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>, <span class="hljs-string">'二班'</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> classes(id, name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">3</span>, <span class="hljs-string">'三班'</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> classes(id, name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">4</span>, <span class="hljs-string">'四班'</span>);<br><br><span class="hljs-comment">-- 插入students记录：</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> students (id, class_id, name, gender, score) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">'小明'</span>, <span class="hljs-string">'M'</span>, <span class="hljs-number">90</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> students (id, class_id, name, gender, score) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-string">'小红'</span>, <span class="hljs-string">'F'</span>, <span class="hljs-number">95</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> students (id, class_id, name, gender, score) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-string">'小军'</span>, <span class="hljs-string">'M'</span>, <span class="hljs-number">88</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> students (id, class_id, name, gender, score) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-string">'小米'</span>, <span class="hljs-string">'F'</span>, <span class="hljs-number">73</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> students (id, class_id, name, gender, score) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-string">'小白'</span>, <span class="hljs-string">'F'</span>, <span class="hljs-number">81</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> students (id, class_id, name, gender, score) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-string">'小兵'</span>, <span class="hljs-string">'M'</span>, <span class="hljs-number">55</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> students (id, class_id, name, gender, score) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-string">'小林'</span>, <span class="hljs-string">'M'</span>, <span class="hljs-number">85</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> students (id, class_id, name, gender, score) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">8</span>, <span class="hljs-number">3</span>, <span class="hljs-string">'小新'</span>, <span class="hljs-string">'F'</span>, <span class="hljs-number">91</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> students (id, class_id, name, gender, score) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">9</span>, <span class="hljs-number">3</span>, <span class="hljs-string">'小王'</span>, <span class="hljs-string">'M'</span>, <span class="hljs-number">89</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> students (id, class_id, name, gender, score) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">10</span>, <span class="hljs-number">3</span>, <span class="hljs-string">'小丽'</span>, <span class="hljs-string">'F'</span>, <span class="hljs-number">85</span>);<br><br><span class="hljs-comment">-- OK:</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-string">'ok'</span> <span class="hljs-keyword">as</span> <span class="hljs-string">'result:'</span>;<br></code></pre></td></tr></tbody></table></figure>
<h1 id="二、基本查询"><a class="header-anchor" href="#二、基本查询">¶</a>二、基本查询</h1>
<h2 id="1、SELECT语句"><a class="header-anchor" href="#1、SELECT语句">¶</a>1、SELECT语句</h2>
<blockquote>
<p>使用<code>SELECT * FROM students</code>时，<code>SELECT</code>是关键字，表示将要执行一个查询，<code>*</code>表示“所有列”，<code>FROM</code>表示将要从哪个表查询，本例中是<code>students</code>表。</p>
<p>该SQL将查询出<code>students</code>表的所有数据。注意：查询结果也是一个二维表，它包含列名和每一行的数据。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ USE test;<br>$ <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>表名<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://i.loli.net/2020/06/02/Fv2oYPO9Vj5iTAI.png" alt=""></p>
<h2 id="2、DISTINCT只返回不同值"><a class="header-anchor" href="#2、DISTINCT只返回不同值">¶</a>2、DISTINCT只返回不同值</h2>
<blockquote>
<p>用于返回不同的值！</p>
<p>DISTINCT 关键字应用于所有列而不仅是前置它的列。如果给出 SELECT DISTINCT vend_id,prod_price ，除非指定的两个列都不同，否则所有行都将被检索出来。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> vend_id <span class="hljs-keyword">FROM</span> products;<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、用于计算的SELECT"><a class="header-anchor" href="#3、用于计算的SELECT">¶</a>3、用于计算的SELECT</h2>
<blockquote>
<p>上述查询会直接计算出表达式的结果。虽然<code>SELECT</code>可以用作计算，但它并不是SQL的强项。但是，不带<code>FROM</code>子句的<code>SELECT</code>语句有一个有用的用途，就是用来判断当前到数据库的连接是否有效。许多检测工具会执行一条<code>SELECT 1;</code>来测试数据库连接。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">200</span> <span class="hljs-operator">*</span> <span class="hljs-number">3000000000</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">200</span> <span class="hljs-operator">*</span> <span class="hljs-number">3000000000</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------------+</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">600000000000</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h1 id="三、条件查询"><a class="header-anchor" href="#三、条件查询">¶</a>三、条件查询</h1>
<h2 id="1、WHERE-条件"><a class="header-anchor" href="#1、WHERE-条件">¶</a>1、WHERE 条件</h2>
<blockquote>
<p>使用<code>SELECT * FROM &lt;表名&gt;</code>可以查询到一张表的所有记录。但是，很多时候，我们并不希望获得所有记录，而是根据条件选择性地获取指定条件的记录，例如，查询分数在80分以上的学生记录。在一张表有数百万记录的情况下，获取所有记录不仅费时，还费内存和网络带宽。</p>
<p>格式如下：</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>表名<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-operator">&lt;</span>条件表达式<span class="hljs-operator">&gt;</span><br></code></pre></td></tr></tbody></table></figure>
<p>效果如下：</p>
<p><img src="https://i.loli.net/2020/06/02/A5L3UGt2wQeR1OK.png" alt=""></p>
<h2 id="2、逻辑运算"><a class="header-anchor" href="#2、逻辑运算">¶</a>2、逻辑运算</h2>
<blockquote>
<p>与其他语言不同：等于号不是<code>==</code>而是<code>=</code>！</p>
</blockquote>
<h3 id="2-1-AND"><a class="header-anchor" href="#2-1-AND">¶</a>2.1 AND</h3>
<blockquote>
<p>就是<code>与</code>运算符！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&gt;=</span> <span class="hljs-number">80</span> <span class="hljs-keyword">AND</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">'M'</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-number">4</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2-2-OR"><a class="header-anchor" href="#2-2-OR">¶</a>2.2 OR</h3>
<blockquote>
<p>就是<code>或</code>运算符！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&gt;=</span> <span class="hljs-number">80</span> <span class="hljs-keyword">OR</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">'M'</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">6</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">8</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">10</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-number">9</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2-3-NOT"><a class="header-anchor" href="#2-3-NOT">¶</a>2.3 NOT</h3>
<blockquote>
<p>就是<code>非</code>运算符！</p>
<p><strong>MySQL支持使用 NOT 对 IN 、 BETWEEN 和EXISTS子句取反，这与多数其他 DBMS允许使用 NOT 对各种条件取反有很大的差别。</strong></p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> class_id <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">8</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">10</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-number">7</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2-4-多条件使用括号"><a class="header-anchor" href="#2-4-多条件使用括号">¶</a>2.4 多条件使用括号</h3>
<blockquote>
<p>同样：加括号改变了优先级！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> (score <span class="hljs-operator">&lt;</span> <span class="hljs-number">80</span> <span class="hljs-keyword">OR</span> score <span class="hljs-operator">&gt;</span> <span class="hljs-number">90</span>) <span class="hljs-keyword">AND</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">'M'</span>;<br><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">6</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、条件表达式符号"><a class="header-anchor" href="#3、条件表达式符号">¶</a>3、条件表达式符号</h2>
<blockquote>
<p>注意：不等于可以是<code>!=</code>或者是<code>&lt;&gt;</code>！</p>
<p>字符串要用单引号引起来！</p>
<p><code>%</code>可以匹配任意字符，包括空字符且不一定是一个字符！</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">条件</th>
<th style="text-align:center">表达式举例1</th>
<th style="text-align:center">表达式举例2</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">使用=判断相等</td>
<td style="text-align:center">score = 80</td>
<td style="text-align:center">name = ‘abc’</td>
<td style="text-align:center">字符串需要用<strong>单引号</strong>括起来</td>
</tr>
<tr>
<td style="text-align:center">使用&gt;判断大于</td>
<td style="text-align:center">score &gt; 80</td>
<td style="text-align:center">name &gt; ‘abc’</td>
<td style="text-align:center">字符串比较根据ASCII码，中文字符比较根据数据库设置</td>
</tr>
<tr>
<td style="text-align:center">使用&gt;=判断大于或相等</td>
<td style="text-align:center">score &gt;= 80</td>
<td style="text-align:center">name &gt;= ‘abc’</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">使用&lt;判断小于</td>
<td style="text-align:center">score &lt; 80</td>
<td style="text-align:center">name &lt;= ‘abc’</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">使用&lt;=判断小于或相等</td>
<td style="text-align:center">score &lt;= 80</td>
<td style="text-align:center">name &lt;= ‘abc’</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">使用&lt;&gt;判断不相等</td>
<td style="text-align:center">score &lt;&gt; 80</td>
<td style="text-align:center">name &lt;&gt; ‘abc’</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">使用!=判断不相等</td>
<td style="text-align:center">score!=80</td>
<td style="text-align:center">name!=‘abc’</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">使用LIKE判断相似</td>
<td style="text-align:center">name LIKE ‘ab%’</td>
<td style="text-align:center">name LIKE ‘%bc%’</td>
<td style="text-align:center">%表示任意字符，例如’ab%‘将匹配’ab’，‘abc’，‘abcd’</td>
</tr>
<tr>
<td style="text-align:center">BETWEEN a AND b</td>
<td style="text-align:center">BETWEEN 80 AND 90</td>
<td style="text-align:center"></td>
<td style="text-align:center">在指定两个值之间</td>
</tr>
<tr>
<td style="text-align:center">IS NULL</td>
<td style="text-align:center">score IS NULL</td>
<td style="text-align:center"></td>
<td style="text-align:center">指的是空，不是0，空字符串，空格，可能出现在建表时设置的NOT NULL的属性列</td>
</tr>
</tbody>
</table>
<h2 id="4、-其他操作符"><a class="header-anchor" href="#4、-其他操作符">¶</a>4、 其他操作符</h2>
<h3 id="4-1-IN"><a class="header-anchor" href="#4-1-IN">¶</a>4.1 IN</h3>
<blockquote>
<p>IN 操作符用来指定条件范围，范围中的每个条件都可以进行匹配。 IN 取合法值的由逗号分隔的清单，全都括在圆括号中。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">IN</span> (值<span class="hljs-number">1</span>，值<span class="hljs-number">2.</span>...);<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> student <span class="hljs-keyword">WHERE</span> class_id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> name;<br></code></pre></td></tr></tbody></table></figure>
<p><strong>IN 与 OR相比的优点：</strong></p>
<ol>
<li>在使用长的合法选项清单时，IN 操作符的语法更<strong>清楚</strong>且更直观。</li>
<li>在使用 IN 时，计算的次序更容易管理（因为使用的操作符更少）。</li>
<li>IN 操作符一般比 OR 操作符清单执行<strong>更快</strong>。</li>
<li>IN 的最大优点是可以包含其他 SELECT 语句，使得能够更动态地建立 WHERE 子句。（后续会介绍）</li>
</ol>
<h3 id="4-2-LIKE"><a class="header-anchor" href="#4-2-LIKE">¶</a>4.2 LIKE</h3>
<blockquote>
<p>LIKE 指示MySQL后跟的搜索模式利用通配符匹配而不是直接相等匹配进行比较。</p>
</blockquote>
<h4 id="4-2-1-百分号（-）通配符"><a class="header-anchor" href="#4-2-1-百分号（-）通配符">¶</a>4.2.1 百分号（%）通配符</h4>
<blockquote>
<p><code>%</code> 表示任何字符出现任意（0,1，…）次数！</p>
<p><strong>此搜索区分大小写</strong>，<code> 'jet%'</code> 与 <code>JetPack 1000</code> 将不匹配。</p>
<p>可以出现在任意位置，可以出现任意多个。</p>
<p>例如：<code>s%e</code>,<code>%ss%</code></p>
</blockquote>
<p><strong>注意：</strong></p>
<ul>
<li>尾空格：<code>%abc</code>无法匹配<code>%abc&lt;空格&gt;</code>，要想匹配可以在最后再加一个<code>%abc%</code>，后面会讲到一个更好的方法，使用函数</li>
<li><code>%</code>无法匹配<code>NULL</code>。</li>
</ul>
<h4 id="4-2-2-下划线（-）通配符"><a class="header-anchor" href="#4-2-2-下划线（-）通配符">¶</a>4.2.2 下划线（_）通配符</h4>
<blockquote>
<p><code>_</code>只匹配单个（只能是1个）任意字符，</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, prod_name <span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> prod_name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'_ abc'</span>;<br></code></pre></td></tr></tbody></table></figure>
<h4 id="4-2-3-使用通配符的优缺点"><a class="header-anchor" href="#4-2-3-使用通配符的优缺点">¶</a>4.2.3 使用通配符的优缺点</h4>
<ol>
<li>可以使用通配符完成一些不易完成的搜索</li>
<li>使用通配符会带来效率的降低，会比其他搜索更耗时</li>
<li>不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。</li>
<li>在确实需要使用通配符时，除非绝对有必要，否则不要把它们用在搜索模式的开始处。把通配符置于搜索模式的开始处，搜索起来是最慢的。</li>
</ol>
<h1 id="四、投影查询"><a class="header-anchor" href="#四、投影查询">¶</a>四、投影查询</h1>
<blockquote>
<p>使用<code>SELECT * FROM &lt;表名&gt; WHERE &lt;条件&gt;</code>可以选出表中的若干条记录。我们注意到返回的二维表结构和原表是相同的，即结果集的所有列与原表的所有列都一一对应。</p>
<p>如果我们只希望返回某些列的数据，而不是所有列的数据，我们可以用<code>SELECT 列1, 列2, 列3 FROM ...</code>，让结果集仅包含指定列。这种操作称为投影查询。</p>
</blockquote>
<p>投影查询：仅返回指定列！</p>
<h2 id="1、普通投影"><a class="header-anchor" href="#1、普通投影">¶</a>1、普通投影</h2>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ <span class="hljs-keyword">SELECT</span> 列<span class="hljs-number">1</span>, 列<span class="hljs-number">2</span>, 列<span class="hljs-number">3</span> <span class="hljs-keyword">FROM</span> ...，;<br></code></pre></td></tr></tbody></table></figure>
<p>例子如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, score, name <span class="hljs-keyword">FROM</span> students;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+-------+--------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+-------+--------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">6</span> <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7</span> <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">8</span> <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">10</span> <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+-------+--------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="2、别名投影"><a class="header-anchor" href="#2、别名投影">¶</a>2、别名投影</h2>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ <span class="hljs-keyword">SELECT</span> 列<span class="hljs-number">1</span> 别名<span class="hljs-number">1</span>, 列<span class="hljs-number">2</span> 别名<span class="hljs-number">2</span>, 列<span class="hljs-number">3</span> 别名<span class="hljs-number">3</span> <span class="hljs-keyword">FROM</span> ...;<br></code></pre></td></tr></tbody></table></figure>
<p>例子如下：score 一列改别名为 points ！</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, score points, name <span class="hljs-keyword">FROM</span> students;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> points <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">90</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">95</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">88</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span>     <span class="hljs-number">73</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span>     <span class="hljs-number">81</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">6</span> <span class="hljs-operator">|</span>     <span class="hljs-number">55</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7</span> <span class="hljs-operator">|</span>     <span class="hljs-number">85</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">8</span> <span class="hljs-operator">|</span>     <span class="hljs-number">91</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span>     <span class="hljs-number">89</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">10</span> <span class="hljs-operator">|</span>     <span class="hljs-number">85</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、复杂投影"><a class="header-anchor" href="#3、复杂投影">¶</a>3、复杂投影</h2>
<blockquote>
<p>将投影与别名与WHERE条件查询结合！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, score points, name <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">'M'</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> points <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">90</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">88</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">6</span> <span class="hljs-operator">|</span>     <span class="hljs-number">55</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7</span> <span class="hljs-operator">|</span>     <span class="hljs-number">85</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span>     <span class="hljs-number">89</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+</span><br><span class="hljs-number">5</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h1 id="五、排序"><a class="header-anchor" href="#五、排序">¶</a>五、排序</h1>
<blockquote>
<p>我们使用SELECT查询时，细心的读者可能注意到，查询结果集通常是按照<code>id</code>排序的，也就是根据主键排序。这也是大部分数据库的做法。</p>
<p>在给出 ORDER BY 子句时，应该保证它位于 FROM 子句之后。如果使用 LIMIT ，它必须位于 ORDER BY之后。使用子句的次序不对将产生错误消息。</p>
</blockquote>
<h2 id="1、升序"><a class="header-anchor" href="#1、升序">¶</a>1、升序</h2>
<blockquote>
<p>使用 <code>ORDER BY ***</code>语句；<code>ASC</code>：升序，可省略！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, name, gender, score <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="2、降序"><a class="header-anchor" href="#2、降序">¶</a>2、降序</h2>
<blockquote>
<p>使用 <code>ORDER BY *** DESC</code>，<code>DESC</code>表示“倒序”，不可省略！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, name, gender, score <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">DESC</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、复杂排序"><a class="header-anchor" href="#3、复杂排序">¶</a>3、复杂排序</h2>
<h3 id="3-1-多列排序"><a class="header-anchor" href="#3-1-多列排序">¶</a>3.1 多列排序</h3>
<blockquote>
<p>若<code>score</code>列有相同的数据，要进一步排序，可以继续添加列名。</p>
<p>即先按<code>score</code>降序，再按<code>gender</code>升序（默认为ASC升序）。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, name, gender, score <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">DESC</span>, gender;<br><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h3 id="3-2-条件排序"><a class="header-anchor" href="#3-2-条件排序">¶</a>3.2 条件排序</h3>
<blockquote>
<p>如果有<code>WHERE</code>子句，那么<code>ORDER BY</code>子句要放到<code>WHERE</code>子句后面！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, name, gender, score<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">WHERE</span> class_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">DESC</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-number">4</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h1 id="六、分页查询"><a class="header-anchor" href="#六、分页查询">¶</a>六、分页查询</h1>
<blockquote>
<p>使用<code>SELECT</code>查询时，如果结果集数据量很大，比如几万行数据，放在一个页面显示的话数据量太大，不如分页显示，每次显示100条。</p>
<p>要实现分页功能，实际上就是从结果集中显示第1 ~ 100条记录作为第1页，显示第101 ~ 200条记录作为第2页，以此类推。</p>
<p>因此，分页实际上就是从结果集中“截取”出第M ~ N条记录。</p>
<p>通过<code>LIMIT &lt;M&gt; OFFSET &lt;N&gt;</code>子句实现：<code>LIMIT</code>表示每页最多三条信息，<code>OFFSET</code>表示从第几条开始。（SQL索引从0开始）</p>
<p><strong>可以使用LIMIT控制要输出的结果！</strong></p>
</blockquote>
<h2 id="注意："><a class="header-anchor" href="#注意：">¶</a>注意：</h2>
<ul>
<li>
<p><code>OFFSET</code>是可选的，如果只写<code>LIMIT 15</code>，那么相当于<code>LIMIT 15 OFFSET 0</code>。</p>
</li>
<li>
<p>在MySQL中，<code>LIMIT 15 OFFSET 30</code>还可以简写成<code>LIMIT 30, 15</code>。</p>
</li>
<li>
<p>使用<code>LIMIT &lt;M&gt; OFFSET &lt;N&gt;</code>分页时，随着<code>N</code>越来越大，查询效率也会越来越低。</p>
</li>
</ul>
<h2 id="规则："><a class="header-anchor" href="#规则：">¶</a><strong>规则</strong>：</h2>
<p>分页查询的关键在于，首先要确定每页需要显示的结果数量<code>pageSize</code>（这里是3），然后根据当前页的索引<code>pageIndex</code>（从1开始），确定<code>LIMIT</code>和<code>OFFSET</code>应该设定的值：</p>
<ul>
<li><code>LIMIT</code>总是设定为<code>pageSize</code>；</li>
<li><code>OFFSET</code>计算公式为<code>pageSize * (pageIndex - 1)</code>。</li>
</ul>
<h2 id="如下："><a class="header-anchor" href="#如下：">¶</a><strong>如下</strong>：</h2>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, name, gender, score<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">DESC</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> LIMIT <span class="hljs-number">3</span> <span class="hljs-keyword">OFFSET</span> <span class="hljs-number">0</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-number">3</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, name, gender, score<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">DESC</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> LIMIT <span class="hljs-number">3</span> <span class="hljs-keyword">OFFSET</span> <span class="hljs-number">3</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-number">3</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>...<br><br>$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, name, gender, score<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">DESC</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> LIMIT <span class="hljs-number">3</span> <span class="hljs-keyword">OFFSET</span> <span class="hljs-number">9</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+--------+-------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<p><strong>若OFFSET设置的越界了，并不会报错，会返回一个空集合！</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> id, name, gender, score<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">DESC</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> LIMIT <span class="hljs-number">3</span> <span class="hljs-keyword">OFFSET</span> <span class="hljs-number">20</span>;<br><span class="hljs-keyword">Empty</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h1 id="七、聚合（聚集）查询"><a class="header-anchor" href="#七、聚合（聚集）查询">¶</a>七、聚合（聚集）查询</h1>
<blockquote>
<p>对于统计总数、平均数这类计算，SQL提供了专门的聚合(聚集)函数，使用聚合函数进行查询，就是聚合查询，它可以快速获得结果。</p>
</blockquote>
<h2 id="1、COUNT-函数"><a class="header-anchor" href="#1、COUNT-函数">¶</a>1、COUNT()函数</h2>
<blockquote>
<p><code>COUNT(*)</code>表示查询所有列的行数，要注意聚合的计算结果虽然是一个数字，但查询的结果仍然是一个二维表，只是这个二维表只有一行一列，并且列名是<code>COUNT(*)</code>。</p>
<p>可以设置一个别名，便于处理结果：</p>
<p><code>COUNT(*)</code>和<code>COUNT(id)</code>实际上是一样的效果。</p>
<p>如果指定列名，则指定列的值为空的行被 <code>COUNT()</code>函数忽略，但如果 <code>COUNT()</code> 函数中用的是星号<code>（ * ）</code>，则不<strong>忽略</strong>。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> students;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------+</span><br><span class="hljs-operator">|</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+</span><br><span class="hljs-operator">|</span>       <span class="hljs-number">10</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><span class="hljs-comment">-- 取一个别名 num</span><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) num <span class="hljs-keyword">FROM</span> students;<br><span class="hljs-operator">+</span><span class="hljs-comment">-----+</span><br><span class="hljs-operator">|</span> num <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">10</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>同样可以使用WHERE条件</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) boys <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">'M'</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br><span class="hljs-operator">|</span> boys <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">5</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="2、其他聚集函数"><a class="header-anchor" href="#2、其他聚集函数">¶</a>2、其他聚集函数</h2>
<blockquote>
<p>注意，<code>MAX()</code>和<code>MIN()</code>函数并不限于数值类型。如果是字符类型，<code>MAX()</code>和<code>MIN()</code>会返回排序最后和排序最前的字符。</p>
<p>注意：如果聚合查询的<code>WHERE</code>条件没有匹配到任何行，<code>COUNT()</code>会返回0，而<code>SUM()</code>、<code>AVG()</code>、<code>MAX()</code>和<code>MIN()</code>会返回<code>NULL</code>：</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">函数</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">SUM</td>
<td style="text-align:center">计算某一列的合计值，该列必须为数值类型，SUM() 函数忽略列值为 NULL 的行</td>
</tr>
<tr>
<td style="text-align:center">AVG</td>
<td style="text-align:center">计算某一列的平均值，该列必须为数值类型，AVG() 函数忽略列值为 NULL 的行。</td>
</tr>
<tr>
<td style="text-align:center">MAX</td>
<td style="text-align:center">计算某一列的最大值，MAX() 函数忽略列值为 NULL 的行</td>
</tr>
<tr>
<td style="text-align:center">MIN</td>
<td style="text-align:center">计算某一列的最小值，MIN() 函数忽略列值为 NULL 的行</td>
</tr>
<tr>
<td style="text-align:center">CEILING</td>
<td style="text-align:center">上取整</td>
</tr>
<tr>
<td style="text-align:center">FLOOR</td>
<td style="text-align:center">下取整</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(score) average <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">'M'</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">---------+</span><br><span class="hljs-operator">|</span> average <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">81.4000</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br><br><span class="hljs-comment">-- WHERE找不到返回NULL</span><br><br>$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(score) average <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">'X'</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">---------+</span><br><span class="hljs-operator">|</span> average <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+</span><br><span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><span class="hljs-comment">-- 计算页数</span><br><br>$ <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CEILING</span>(<span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">/</span> <span class="hljs-number">3</span>)  pageSize <span class="hljs-keyword">FROM</span> students;<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CEILING</span>(<span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">/</span> <span class="hljs-number">3</span>)  pageSize <span class="hljs-keyword">FROM</span> students;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------+</span><br><span class="hljs-operator">|</span> pageSize <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">4</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、使用DISTINCT"><a class="header-anchor" href="#3、使用DISTINCT">¶</a>3、使用DISTINCT</h2>
<blockquote>
<p>默认为<code>ALL</code>，可选<code>DISTINCT</code>，即去掉重复值</p>
<p>上面的聚集（聚合）函数都可以使用<code>DISTINCT</code>来去重计算</p>
<p>对于<code>MIN</code>，<code>MAX</code>添加该参数无意义，因为去不去重结果无影响！</p>
</blockquote>
<p>下面的这个例子就是将价格不同的过滤掉，仅计算价格不同的均值。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(<span class="hljs-keyword">DISTINCT</span> prod_price) avg_rice<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-operator">=</span> <span class="hljs-number">1003</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span><br><span class="hljs-operator">|</span> avg_price <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">15</span> <span class="hljs-number">.998000</span><span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span><br></code></pre></td></tr></tbody></table></figure>
<h2 id="4、组合聚集函数"><a class="header-anchor" href="#4、组合聚集函数">¶</a>4、组合聚集函数</h2>
<blockquote>
<p>即一条语句使用多个聚集函数。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> num_items,<br><span class="hljs-built_in">MIN</span>(prod_price) <span class="hljs-keyword">AS</span> price_min,<br><span class="hljs-built_in">MAX</span>(prod_price) <span class="hljs-keyword">AS</span> price_max,<br><span class="hljs-built_in">AVG</span>(prod_price) <span class="hljs-keyword">AS</span> price_avg<br><span class="hljs-keyword">FROM</span> products;<br></code></pre></td></tr></tbody></table></figure>
<h1 id="八、多表查询"><a class="header-anchor" href="#八、多表查询">¶</a>八、多表查询</h1>
<blockquote>
<p>由于多表查询的笛卡尔乘积问题，会导致每行两表的数据并没有逻辑对应关系。。。</p>
<p>即直接查出来的数据对应不一定正确，需要进行条件限定，如students表的class_id 与 classes表的id相同才能唯一确定一个对应关系。</p>
<p>一般使用主键或外键进行多表关联查询，笛卡尔乘积没太多意义，而且很容易查询量爆炸，<code>不建议使用！</code></p>
</blockquote>
<h2 id="1、语法："><a class="header-anchor" href="#1、语法：">¶</a>1、语法：</h2>
<ul>
<li><code>SELECT * FROM &lt;表1&gt; &lt;表2&gt;</code>。</li>
</ul>
<blockquote>
<p>这种一次查询两个表的数据，查询的结果也是一个二维表，它是<code>students</code>表和<code>classes</code>表的“乘积”，即<code>students</code>表的每一行与<code>classes</code>表的每一行都两两拼在一起返回。结果集的列数是<code>students</code>表和<code>classes</code>表的列数之和，行数是<code>students</code>表和<code>classes</code>表的行数之积。</p>
<p>这种多表查询又称笛卡尔查询，使用笛卡尔查询时要非常小心，由于结果集是目标表的行数乘积，对两个各自有100行记录的表进行笛卡尔查询将返回1万条记录，对两个各自有1万行记录的表进行笛卡尔查询将返回1亿条记录。</p>
<p>给表起别名，再给相同列起别名有助于查看！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     s.id sid,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     s.name,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     s.gender,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     s.score,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     c.id cid,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     c.name cname<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students s, classes c;<br><span class="hljs-operator">+</span><span class="hljs-comment">-----+--------+--------+-------+-----+--------+</span><br><span class="hljs-operator">|</span> sid <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span> cid <span class="hljs-operator">|</span> cname  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----+--------+--------+-------+-----+--------+</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 四班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 四班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 四班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 四班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 四班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 四班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 四班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 四班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 四班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 四班   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----+--------+--------+-------+-----+--------+</span><br><span class="hljs-number">40</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="2、使用WHERE"><a class="header-anchor" href="#2、使用WHERE">¶</a>2、使用WHERE</h2>
<blockquote>
<p>同样可以使用WHERE进行限制。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     s.id sid,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     s.name,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     s.gender,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     s.score,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     c.id cid,<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span>     c.name cname<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students s, classes c<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">WHERE</span> s.gender <span class="hljs-operator">=</span> <span class="hljs-string">'M'</span> <span class="hljs-keyword">AND</span> c.id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">-----+--------+--------+-------+-----+--------+</span><br><span class="hljs-operator">|</span> sid <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span> cid <span class="hljs-operator">|</span> cname  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----+--------+--------+-------+-----+--------+</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----+--------+--------+-------+-----+--------+</span><br><span class="hljs-number">5</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h1 id="九、连接（联结）查询"><a class="header-anchor" href="#九、连接（联结）查询">¶</a>九、连接（联结）查询</h1>
<blockquote>
<p>连接查询是另一种类型的多表查询。连接查询对多个表进行JOIN运算，简单地说，就是先确定一个主表作为结果集，然后，把其他表的行有选择性地“连接”在主表结果集上。</p>
</blockquote>
<h2 id="1、INNER-JOIN查询（内连接）"><a class="header-anchor" href="#1、INNER-JOIN查询（内连接）">¶</a>1、INNER JOIN查询（内连接）</h2>
<blockquote>
<p>现在问题来了，存放班级名称的<code>name</code>列存储在<code>classes</code>表中，只有根据<code>students</code>表的<code>class_id</code>，找到<code>classes</code>表对应的行，再取出<code>name</code>列，就可以获得班级名称。</p>
<p>这时，连接查询就派上了用场。</p>
<p>看下方结果，就知道这是连接了classes表的name列，尽可能满足两个表情况，不会出现NULL的情况。</p>
</blockquote>
<ol>
<li>先确定主表，仍然使用<code>FROM &lt;表1&gt;</code>的语法；</li>
<li>再确定需要连接的表，使用<code>INNER JOIN &lt;表2&gt;</code>的语法；</li>
<li>然后确定连接条件，使用<code>ON &lt;条件...&gt;</code>，这里的条件是<code>s.class_id = c.id</code>，表示<code>students</code>表的<code>class_id</code>列与<code>classes</code>表的<code>id</code>列相同的行需要连接；</li>
<li>可选：加上<code>WHERE</code>子句、<code>ORDER BY</code>等子句。</li>
</ol>
<p>示例图如下：</p>
<p><img src="https://i.loli.net/2020/06/03/FnVoJYyXKD5QpZf.png" alt=""></p>
<p>代码如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> s.id, s.name, s.class_id, c.name class_name, s.gender, s.score<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students s<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> classes c<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ON</span> s.class_id <span class="hljs-operator">=</span> c.id;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+----------+------------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> class_name <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+----------+------------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+----------+------------+--------+-------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="2、RIGHT-OUTER-JOIN（右外连接）"><a class="header-anchor" href="#2、RIGHT-OUTER-JOIN（右外连接）">¶</a>2、RIGHT OUTER JOIN（右外连接）</h2>
<blockquote>
<p>尽量满足第二个表的情况，第一个表若没有对应的信息，会以<code>NULL</code>显示：</p>
<p><strong>注意</strong>：左右外连接可以省略写<code>OUTER</code>。</p>
</blockquote>
<p>示例图如下：</p>
<p><img src="https://i.loli.net/2020/06/03/9wUZjqBb5Y4HpQI.png" alt=""></p>
<p>代码如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> s.id, s.name, s.class_id, c.name class_name, s.gender, s.score<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students s<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> classes c<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ON</span> s.class_id <span class="hljs-operator">=</span> c.id;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+--------+----------+------------+--------+-------+</span><br><span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> class_name <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+--------+----------+------------+--------+-------+</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>   <span class="hljs-operator">|</span>     <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> 四班       <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>   <span class="hljs-operator">|</span>  <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+--------+----------+------------+--------+-------+</span><br><span class="hljs-number">11</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、LEFT-OUTER-JOIN（左外连接）"><a class="header-anchor" href="#3、LEFT-OUTER-JOIN（左外连接）">¶</a>3、LEFT OUTER JOIN（左外连接）</h2>
<blockquote>
<p>尽量满足第一个表的情况，第二个表若没有对应信息，会以<code>NULL</code>显示：</p>
<p>由于<code>students</code>表都可以在<code>classes</code>表匹配，所以添加一行吧唧id为5的，来说明左外连接问题。</p>
</blockquote>
<p>示例图如下：</p>
<p><img src="https://i.loli.net/2020/06/03/yTozw3hQbYp8SKU.png" alt=""></p>
<p>代码如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- </span><br>$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> students (class_id, name, gender, score) <span class="hljs-keyword">values</span> (<span class="hljs-number">5</span>, <span class="hljs-string">'新生'</span>, <span class="hljs-string">'M'</span>, <span class="hljs-number">88</span>);<br>Query OK, <span class="hljs-number">1</span> <span class="hljs-type">row</span> affected (<span class="hljs-number">0.01</span> sec)<br><br>$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> s.id, s.name, s.class_id, c.name class_name, s.gender, s.score<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students s<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> classes c<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ON</span> s.class_id <span class="hljs-operator">=</span> c.id;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+----------+------------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> class_name <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+----------+------------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">11</span> <span class="hljs-operator">|</span> 新生   <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+--------+----------+------------+--------+-------+</span><br><span class="hljs-number">11</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="4、FULL-OUTER-JOIN（全外连接）"><a class="header-anchor" href="#4、FULL-OUTER-JOIN（全外连接）">¶</a>4、FULL OUTER JOIN（全外连接）</h2>
<blockquote>
<p>也就是左右外连接的并集，没有的信息显示为<code>NULL</code>：</p>
<p>MySQL并不支持全连接。。。</p>
</blockquote>
<p>示例图如下：</p>
<p><img src="https://i.loli.net/2020/06/03/rhCTO9VMHPtxiDF.png" alt=""></p>
<p>代码如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> s.id, s.name, s.class_id, c.name class_name, s.gender, s.score<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students s<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FULL</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> classes c<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ON</span> s.class_id <span class="hljs-operator">=</span> c.id;<br>ERROR <span class="hljs-number">1064</span> (<span class="hljs-number">42000</span>): You have an error <span class="hljs-keyword">in</span> your <span class="hljs-keyword">SQL</span> syntax; <span class="hljs-keyword">check</span> the manual that corresponds <span class="hljs-keyword">to</span> your MySQL server version <span class="hljs-keyword">for</span> the <span class="hljs-keyword">right</span> syntax <span class="hljs-keyword">to</span> use near <span class="hljs-string">'FULL OUTER JOIN classes c</span><br><span class="hljs-string">ON s.class_id = c.id'</span> <span class="hljs-keyword">at</span> line <span class="hljs-number">3</span><br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>代替解决方案：使用<code>UNION</code>，左连接一次，右连接一次，再使用UNION合并。</li>
</ul>
<p>代码如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> s.id, s.name, s.class_id, c.name class_name, s.gender, s.score<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students s<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> classes c <span class="hljs-keyword">ON</span> class_id <span class="hljs-operator">=</span> c.id<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">UNION</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> s.id, s.name, s.class_id, c.name class_name, s.gender, s.score<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students s<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> classes c <span class="hljs-keyword">ON</span> class_id <span class="hljs-operator">=</span> c.id;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+--------+----------+------------+--------+-------+</span><br><span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> class_name <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+--------+----------+------------+--------+-------+</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小明   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">90</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小红   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">95</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">4</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 一班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">73</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">6</span> <span class="hljs-operator">|</span> 小兵   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">55</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">7</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">8</span> <span class="hljs-operator">|</span> 小新   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">91</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">9</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">10</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 三班       <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>   <span class="hljs-operator">|</span>     <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> 四班       <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>   <span class="hljs-operator">|</span>  <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>   <span class="hljs-number">11</span> <span class="hljs-operator">|</span> 新生   <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>       <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+--------+----------+------------+--------+-------+</span><br><span class="hljs-number">12</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h1 id="十、正则搜索查询"><a class="header-anchor" href="#十、正则搜索查询">¶</a>十、正则搜索查询</h1>
<blockquote>
<p>可以使用正则的所有语法！</p>
<p>参考我之前的<a target="_blank" rel="noopener external nofollow noreferrer" href="https://niuxvdong.top/posts/53926.html">Java教程的正则表达式！</a>，以及<a target="_blank" rel="noopener external nofollow noreferrer" href="https://niuxvdong.top/posts/15769.html">JavaScript教程的正则表达式！</a>，以及<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/niuxvdong/learn-html-css-js/blob/master/js/%E6%AD%A3%E5%88%99.js">加强版的正则表达式!</a></p>
</blockquote>
<p>这里只介绍一些不同点！</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score REGEXP <span class="hljs-string">'8\\d'</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> score <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小军   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 小米   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">83</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小白   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 小林   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">9</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小王   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">89</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">10</span> <span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> 小丽   <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>    <span class="hljs-number">85</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">11</span> <span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span> 新生   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">88</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">12</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 大牛   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">80</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">13</span> <span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> 大宝   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">87</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">14</span> <span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> 二宝   <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>    <span class="hljs-number">81</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+----------+--------+--------+-------+</span><br><span class="hljs-number">10</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="1、语法格式"><a class="header-anchor" href="#1、语法格式">¶</a>1、语法格式</h2>
<blockquote>
<p>与<code>LIKE</code>的通配符类似！</p>
</blockquote>
<p><strong>注意：</strong></p>
<ol>
<li><code>mysql</code>的正则表达式不区分大小写，指的是这样子的 <code>SELECT 'jack 001' REGEXP 'Jack 001';</code></li>
<li>可以加上<code>BINARY</code>来区分大小写，eg：<code>SELECT 'jack 001' REGEXP BINARY 'Jack 001';</code></li>
</ol>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score REGEXP <span class="hljs-string">'8\\d'</span>;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'8%'</span>;<br></code></pre></td></tr></tbody></table></figure>
<p><strong>特殊字符格式：</strong></p>
<blockquote>
<p><code>\\- \\. \\| \\( \\{ \\[</code></p>
<p>以及 <code>\\f \\r \\t \\v</code>分别表示换页，换行，回车，制表符，纵向制表符。</p>
<p><code>\\\</code>表示<code>\</code></p>
</blockquote>
<p><strong>匹配字符类：</strong></p>
<blockquote>
<p>存在找出你自己经常使用的数字、所有字母字符或所有数字字母字符等的匹配。为更方便工作，可以使用预定义的字符集，称为<strong>字符类</strong>.</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@latest/2020/06/29/dd008e71901afce749d899cf855ed33a.png" alt=""></p>
<p>如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-string">'HHH123'</span> REGEXP <span class="hljs-string">'[[:digit:]]{3}'</span>;<br></code></pre></td></tr></tbody></table></figure>
<h2 id="2、使用SELECT进行简单测试"><a class="header-anchor" href="#2、使用SELECT进行简单测试">¶</a>2、使用SELECT进行简单测试</h2>
<blockquote>
<p>匹配返回 1，不匹配返回 0</p>
<p><code>LIKE</code>和<code>REGEXP</code>都可以！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-string">'habc123'</span> <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'ha%3'</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-string">'habc123'</span> <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'ha%3'</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+</span><br><span class="hljs-operator">|</span>                     <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><span class="hljs-comment">-- 如下</span><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-string">'habc123'</span> REGEXP <span class="hljs-string">'^\\w*\\d{3}$'</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-string">'habc123'</span> REGEXP <span class="hljs-string">'^\\w*\\d{3}$'</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------------------+</span><br><span class="hljs-operator">|</span>                               <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、REGEXP-和-LIKE"><a class="header-anchor" href="#3、REGEXP-和-LIKE">¶</a>3、REGEXP 和 LIKE</h2>
<p><strong>一些区别：</strong></p>
<ol>
<li><code>REGEXP</code>可以匹配子串，只要有子串匹配就可以返回真值，当然也可以匹配原串。</li>
<li><code>LIKE</code>只能匹配原串，必须将原串全部匹配才可。</li>
</ol>
<h1 id="十一、创建计算字段"><a class="header-anchor" href="#十一、创建计算字段">¶</a>十一、创建计算字段</h1>
<blockquote>
<p>创建计算字段主要是为了格式化输出，可以获得需要的输出结果！</p>
<p>其他<code>DBMS</code>使用 <code>+</code> ，<code>||</code>来实现拼接来处理格式化，<code>MySql</code>使用<code>Concat()</code>函数进行拼接来处理格式化。</p>
<p>这类普通函数与聚集函数写法规范略有不同，聚集函数全部大写如<code>AVG()</code>，普通函数首字母大写<code>Concat()</code>。</p>
<p>这仅仅是一个规定，约定俗成的规矩，大小写<code>MySql</code>是忽略的。</p>
</blockquote>
<h2 id="1、使用Concat-函数"><a class="header-anchor" href="#1、使用Concat-函数">¶</a>1、使用Concat()函数</h2>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> Concat(name, <span class="hljs-string">' ---------- '</span>, score) name_score <span class="hljs-keyword">FROM</span> students;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------+</span><br><span class="hljs-operator">|</span> name_score           <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------+</span><br><span class="hljs-operator">|</span> 小明 <span class="hljs-comment">---------- 98   |</span><br><span class="hljs-operator">|</span> 小红 <span class="hljs-comment">---------- 95   |</span><br><span class="hljs-operator">|</span> 小军 <span class="hljs-comment">---------- 88   |</span><br><span class="hljs-operator">|</span> 小米 <span class="hljs-comment">---------- 83   |</span><br><span class="hljs-operator">|</span> 小白 <span class="hljs-comment">---------- 81   |</span><br><span class="hljs-operator">|</span> 小兵 <span class="hljs-comment">---------- 65   |</span><br><span class="hljs-operator">|</span> 小林 <span class="hljs-comment">---------- 85   |</span><br><span class="hljs-operator">|</span> 小新 <span class="hljs-comment">---------- 91   |</span><br><span class="hljs-operator">|</span> 小王 <span class="hljs-comment">---------- 89   |</span><br><span class="hljs-operator">|</span> 小丽 <span class="hljs-comment">---------- 85   |</span><br><span class="hljs-operator">|</span> 新生 <span class="hljs-comment">---------- 88   |</span><br><span class="hljs-operator">|</span> 大牛 <span class="hljs-comment">---------- 80   |</span><br><span class="hljs-operator">|</span> 大宝 <span class="hljs-comment">---------- 87   |</span><br><span class="hljs-operator">|</span> 二宝 <span class="hljs-comment">---------- 81   |</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------+</span><br><span class="hljs-number">14</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<p><strong>同样可以使用一些其他函数来进行控制，使用别名来替换该字段：</strong></p>
<blockquote>
<p>这里用到了<code>RTrim()</code>，<code>LTrim()</code>，<code>Trim()</code>，来进行配合，分别为去掉右边空格，左边空格，及两边空格！</p>
<p>也可以使用别名来重命名该列。</p>
<p>别名可以使用<code>a AS b</code>来表示，也可以直接空格隔开，两种写法完全一致，但一般空格隔开即可！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Concat(RTrim(name), <span class="hljs-string">' - '</span>, LTrim(score)) name_score <span class="hljs-keyword">FROM</span> students;<br><br><span class="hljs-keyword">SELECT</span> Concat(RTrim(name), <span class="hljs-string">' - '</span>, LTrim(score)) <span class="hljs-keyword">AS</span> name_score <span class="hljs-keyword">FROM</span> students;<br></code></pre></td></tr></tbody></table></figure>
<h2 id="2、执行算术计算"><a class="header-anchor" href="#2、执行算术计算">¶</a>2、执行算术计算</h2>
<blockquote>
<p>可以使用<code>+-*/</code>来进行计算得到新的一列。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> prod_id, quantity, item_price,<br>quantity <span class="hljs-operator">*</span> item_price expanded_price<br><span class="hljs-keyword">FROM</span> orderitems<br><span class="hljs-keyword">WHERE</span> order_num <span class="hljs-operator">=</span> <span class="hljs-number">20005</span>;<br></code></pre></td></tr></tbody></table></figure>
<ul>
<li><strong>可以使用SELECT的测试功能来简单测试一下</strong></li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">Trim</span>(<span class="hljs-string">'   bsd      '</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-built_in">Trim</span>(<span class="hljs-string">'   bsd      '</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------+</span><br><span class="hljs-operator">|</span> bsd                  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> <span class="hljs-operator">*</span> <span class="hljs-number">5</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">-------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">3</span> <span class="hljs-operator">*</span> <span class="hljs-number">5</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------+</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">15</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h1 id="十二、其他普通函数"><a class="header-anchor" href="#十二、其他普通函数">¶</a>十二、其他普通函数</h1>
<h2 id="1、文本处理函数"><a class="header-anchor" href="#1、文本处理函数">¶</a>1、文本处理函数</h2>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@latest/2020/06/29/1081b217e36291d71ae0278c9e1b9631.png" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@latest/2020/06/29/d3eb81f9a55369963144fcb2e5ded164.png" alt=""></p>
<blockquote>
<p><code>SOUNDEX</code> 是一个将任何文本串转换为描述其语音表示的字母数字模式的算法。 <code>SOUNDEX </code>考虑了类似的发音字符和音节，使得能对串进行发音比较而不是字母比较。虽然<code>SOUNDEX</code> 不是<code>SQL</code>概念，但<code>MySQL</code>（就像多数<code>DBMS</code>一样）都提供对<code>SOUNDEX</code>的支持。</p>
<p>可以在你拼错的时候返回正确的匹配项！有发音相似性匹配。。神奇！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> Soundex(<span class="hljs-string">'Lie'</span>) <span class="hljs-operator">=</span> Soundex(<span class="hljs-string">'Lee'</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------------------+</span><br><span class="hljs-operator">|</span> Soundex(<span class="hljs-string">'Lie'</span>) <span class="hljs-operator">=</span> Soundex(<span class="hljs-string">'Lee'</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------------------+</span><br><span class="hljs-operator">|</span>                               <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br><span class="hljs-keyword">SELECT</span> cust_name，cust_contact<br><span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">WHERE</span> Soundex(cust_contact) <span class="hljs-operator">=</span> Soundex(<span class="hljs-string">'Y Lie'</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">-------------+--------------+</span><br><span class="hljs-operator">|</span> cust_name   <span class="hljs-operator">|</span> cust_contact <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> Coyote Inc. <span class="hljs-operator">|</span> Y Lee        <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-------------+--------------+</span><br><br></code></pre></td></tr></tbody></table></figure>
<h2 id="2、日期和时间处理函数"><a class="header-anchor" href="#2、日期和时间处理函数">¶</a>2、日期和时间处理函数</h2>
<blockquote>
<p>日期和时间采用相应的数据类型和特殊的格式存储，以便能快速和有效地排序或过滤，并且节省物理存储空间。</p>
<p>主要是从<code>DATETIME</code>数据类型中截取需要的数据！</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@latest/2020/06/29/5afb913f2d226283a03e6489dd2c14c9.png" alt=""></p>
<p><strong>部分示例：</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> Now();<br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+</span><br><span class="hljs-operator">|</span> Now()               <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2020</span><span class="hljs-number">-06</span><span class="hljs-number">-29</span> <span class="hljs-number">21</span>:<span class="hljs-number">45</span>:<span class="hljs-number">11</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-type">Date</span>(<span class="hljs-string">'2020--06-29 00:00:00'</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-type">Date</span>(<span class="hljs-string">'2020-06-29 00:00:00'</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2020</span><span class="hljs-number">-06</span><span class="hljs-number">-29</span>                   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> DayOfWeek(<span class="hljs-string">'2020-06-29 00:00:00'</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------------------+</span><br><span class="hljs-operator">|</span> DayOfWeek(<span class="hljs-string">'2020-06-29 00:00:00'</span>) <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------------------+</span><br><span class="hljs-operator">|</span>                                 <span class="hljs-number">2</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> Now();<br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+</span><br><span class="hljs-operator">|</span> Now()               <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2020</span><span class="hljs-number">-06</span><span class="hljs-number">-29</span> <span class="hljs-number">21</span>:<span class="hljs-number">56</span>:<span class="hljs-number">31</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">---------------------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> CurTime();<br><span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span><br><span class="hljs-operator">|</span> CurTime() <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">21</span>:<span class="hljs-number">57</span>:<span class="hljs-number">09</span>  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-----------+</span><br><span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br><br><span class="hljs-comment">-- 实际用于按日期，时间等匹配日期</span><br><span class="hljs-comment">-- 此处的order_date为datetime类型：</span><br>SEL ECT cust_id，order_num<br><span class="hljs-keyword">FROM</span> orders<br><span class="hljs-keyword">WHERE</span> <span class="hljs-type">Date</span>(order_date) <span class="hljs-operator">=</span> <span class="hljs-string">'2020-09-01'</span>;<br><br><span class="hljs-comment">-- 使用 Between And</span><br><span class="hljs-keyword">SELECT</span> cust_id，order_num<br><span class="hljs-keyword">FROM</span> orders<br><span class="hljs-keyword">WHERE</span> <span class="hljs-type">Date</span>(order_date) <span class="hljs-keyword">BETWEEN</span> <span class="hljs-string">'2005-09-01'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'2005-09-30'</span>;<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、数值处理函数"><a class="header-anchor" href="#3、数值处理函数">¶</a>3、数值处理函数</h2>
<blockquote>
<p>数值处理函数仅处理数值数据。这些函数一般主要用于代数、三角或几何运算，因此没有串或日期 — 时间处理函数的使用那么频繁。具有讽刺意味的是，在主要DBMS的函数中，数值函数是最一致最统一的函数。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@latest/2020/06/29/53f96173db9f1881175d8f021d504f8d.png" alt=""></p>
<h1 id="十三、分组（GROUP）"><a class="header-anchor" href="#十三、分组（GROUP）">¶</a>十三、分组（GROUP）</h1>
<blockquote>
<p>用于统计一类数据的方法：<code>GROUP BY 某一列 HAVING 条件</code></p>
<ul>
<li><code>GROUP BY</code> 子句中列出的每个列都必须是检索列或有效的表达式(<code>eg:nums * score</code>)（但<strong>不能是聚集函数</strong>）。如果在 <code>SELECT</code> 中使用表达式，则必须在<code>GROUP BY </code>子句中指定相同的表达式。<strong>不能使用别名</strong>。</li>
<li>除聚集计算语句外， <code>SELECT</code> 语句中的每个列都必须在 <code>GROUP BY</code> 子句中给出。</li>
<li>如果分组列中具有 <code>NULL</code> 值，则 <code>NULL</code> 将作为一个分组返回。如果列中有多行 <code>NULL</code> 值，它们将分为一组。</li>
<li><code>GROUP BY</code> 子句必须出现在 <code>WHERE</code> 子句之后， <code>ORDER BY</code> 子句之前。</li>
</ul>
</blockquote>
<h2 id="1、单列分组"><a class="header-anchor" href="#1、单列分组">¶</a>1、单列分组</h2>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> class_id, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) num <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> class_id;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-----+</span><br><span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> num <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-----+</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>   <span class="hljs-number">4</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>   <span class="hljs-number">3</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-----+</span><br><span class="hljs-number">3</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="2、多列分组"><a class="header-anchor" href="#2、多列分组">¶</a>2、多列分组</h2>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> class_id, gender, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) num <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> class_id, gender;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------+--------+-----+</span><br><span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> gender <span class="hljs-operator">|</span> num <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+--------+-----+</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> F      <span class="hljs-operator">|</span>   <span class="hljs-number">2</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span> M      <span class="hljs-operator">|</span>   <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+--------+-----+</span><br><span class="hljs-number">6</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<ul>
<li><strong>注意</strong>：SQL引擎不能把多个<code>name</code>的值放入一行记录中。因此，聚合查询的列中，只能放入分组的列。</li>
</ul>
<blockquote>
<p>原因：class_id = 1 有 4 个人，他们班级名相同，但name不同，如果有了name列，应该显示几个名字呢？？？</p>
<p>所以干脆直接报错！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">$ mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> name, class_id, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) num <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> class_id;<br>ERROR <span class="hljs-number">1055</span> (<span class="hljs-number">42000</span>): Expression #<span class="hljs-number">1</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">SELECT</span> list <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> clause <span class="hljs-keyword">and</span> <span class="hljs-keyword">contains</span> nonaggregated <span class="hljs-keyword">column</span> <span class="hljs-string">'test.students.name'</span> which <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> functionally dependent <span class="hljs-keyword">on</span> columns <span class="hljs-keyword">in</span> <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> clause; this <span class="hljs-keyword">is</span> incompatible <span class="hljs-keyword">with</span> sql_mode<span class="hljs-operator">=</span>only_full_group_by<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、WITH-ROLLUP"><a class="header-anchor" href="#3、WITH-ROLLUP">¶</a>3、WITH ROLLUP</h2>
<blockquote>
<p>在<code>GROUP BY</code>后面加<code>WITH ROLLUP</code>来进行统计分组的总行数。</p>
<p>如下方的最后一行！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> class_id, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) total <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> class_id <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">ROLLUP</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+</span><br><span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> total <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">5</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">5</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">3</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">5</span> <span class="hljs-operator">|</span>     <span class="hljs-number">1</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>     <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>    <span class="hljs-number">14</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+</span><br><span class="hljs-number">5</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h2 id="4、对分组的过滤"><a class="header-anchor" href="#4、对分组的过滤">¶</a>4、对分组的过滤</h2>
<blockquote>
<p><code>WHERE</code>用于过滤行，<code>HAVING</code>用于过滤分组。</p>
<p>语法与<code>WHERE</code>一模一样。</p>
<p><code>WHERE</code> 在数据分组前进行过滤， <code>HAVING</code> 在数据分组后进行过滤。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs SQL">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> class_id, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) total <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> class_id <span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;=</span> <span class="hljs-number">3</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+</span><br><span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> total <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">5</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">5</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">3</span> <span class="hljs-operator">|</span>     <span class="hljs-number">3</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+</span><br><span class="hljs-number">3</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h3 id="全部使用的顺序"><a class="header-anchor" href="#全部使用的顺序">¶</a>全部使用的顺序</h3>
<blockquote>
<p><code>SELECT</code>子句顺序：<code>SELECT (FROM) (WHERE) (GROUP BY) (ORDER BY) (LIMIT)</code></p>
<p>括号表示可选！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> class_id, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) total<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> students<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">WHERE</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">'M'</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> class_id <span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;=</span> <span class="hljs-number">2</span><br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> total<br>    <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> LIMIT <span class="hljs-number">3</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+</span><br><span class="hljs-operator">|</span> class_id <span class="hljs-operator">|</span> total <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">1</span> <span class="hljs-operator">|</span>     <span class="hljs-number">2</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>        <span class="hljs-number">2</span> <span class="hljs-operator">|</span>     <span class="hljs-number">4</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+</span><br><span class="hljs-number">2</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.01</span> sec)<br></code></pre></td></tr></tbody></table></figure>
<h1 id="十四、子查询"><a class="header-anchor" href="#十四、子查询">¶</a>十四、子查询</h1>
<blockquote>
<p>就是嵌套的多级<code>SELECT</code>语句。</p>
<p>使用连接（联结）通常比子查询要更快！</p>
</blockquote>
<h2 id="1、利用子查询进行过滤"><a class="header-anchor" href="#1、利用子查询进行过滤">¶</a>1、利用子查询进行过滤</h2>
<blockquote>
<p>子查询总是从内向外处理，使用适当的缩进可以更易于阅读和调试。内层子查询的结果作为上层的基础进行查询，如下所示，将内层查询结果转变为<code>IN</code>的格式进行下一次查询。</p>
<p>不仅仅可以使用<code>IN</code>，其他的操作符都是可以的，<code>LIKE</code>，<code>&gt;</code>，，，等等都可以！</p>
<p>嵌套太多会降低性能，不建议嵌套太多！</p>
<p><strong>注意：要保证<code>WHERE</code>的列与子查询<code>SELECT</code>的列相同！</strong></p>
<p>同样：使用多表连接通过<code>WHERE</code>也可以实现相同效果。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> cust_name，cust_contact<br><span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">WHERE</span> cust_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> cust_id<br>				  <span class="hljs-keyword">FROM</span> orders<br>				  <span class="hljs-keyword">WHERE</span> order_num <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> order_num<br>									  <span class="hljs-keyword">FROM</span> orderitems<br>									  <span class="hljs-keyword">WHERE</span> prod_id <span class="hljs-operator">=</span> <span class="hljs-string">'TNT2'</span>));<br><span class="hljs-operator">+</span><span class="hljs-comment">----------------+--------------+</span><br><span class="hljs-operator">|</span> cust_name      <span class="hljs-operator">|</span> cust_contact <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> Coyote InC.    <span class="hljs-operator">|</span> Y Lee		<span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> Yosemite P1ace <span class="hljs-operator">|</span> Y Sam		<span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------+--------------+</span><br><br><span class="hljs-comment">-- 完全相同</span><br><span class="hljs-keyword">SELECT</span> cust_name，cust_contact<br><span class="hljs-keyword">FROM</span> customers，orders，orderitems<br><span class="hljs-keyword">WHERE</span> customers.cust_id <span class="hljs-operator">=</span> orders.cust_id<br><span class="hljs-keyword">AND</span> orderitems.order_num <span class="hljs-operator">=</span> orders.order_num<br><span class="hljs-keyword">AND</span> prod_id <span class="hljs-operator">=</span> <span class="hljs-string">'TNT2'</span> ;<br><br></code></pre></td></tr></tbody></table></figure>
<h2 id="2、利用子查询处理计算字段"><a class="header-anchor" href="#2、利用子查询处理计算字段">¶</a>2、利用子查询处理计算字段</h2>
<blockquote>
<p>除了在<code>WHERE</code>后进行过滤，还可以在<code>WHERE</code>前进行计算字段的查询处理！</p>
<p>这里使用了<strong>完全限定列名</strong>，即使用<code>表.列 orders.cust_id</code>来进行限定列的范围，当然是为了防止多表存在相同列名。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> cust_name,<br>	   cust_state，<br>	   (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>)<br>		<span class="hljs-keyword">FROM</span> orders<br>		<span class="hljs-keyword">WHERE</span> orders.cust_id <span class="hljs-operator">=</span> customers.cust_id) <span class="hljs-keyword">AS</span> orders <br><span class="hljs-keyword">FROM</span> customers<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> cust_name;<br><span class="hljs-operator">+</span><span class="hljs-comment">----------------+------------+--------+</span><br><span class="hljs-operator">|</span>	cust_name    <span class="hljs-operator">|</span>cust_state  <span class="hljs-operator">|</span> orders <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------+------------+--------+</span><br><span class="hljs-operator">|</span> Coyote Inc.    <span class="hljs-operator">|</span> MI		  <span class="hljs-operator">|</span>	<span class="hljs-number">2</span>	   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> E Fudd		 <span class="hljs-operator">|</span> IL		  <span class="hljs-operator">|</span>	<span class="hljs-number">1</span>	   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> Mouse House	 <span class="hljs-operator">|</span> <span class="hljs-number">0</span>H		  <span class="hljs-operator">|</span>	<span class="hljs-number">0</span>	   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> Wascals		 <span class="hljs-operator">|</span> <span class="hljs-keyword">IN</span>		  <span class="hljs-operator">|</span>	<span class="hljs-number">1</span>	   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> Yosemite Place <span class="hljs-operator">|</span> AZ		  <span class="hljs-operator">|</span>	<span class="hljs-number">1</span>	   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----------------+------------+--------+</span><br><br></code></pre></td></tr></tbody></table></figure>
<h1 id="十五、组合查询"><a class="header-anchor" href="#十五、组合查询">¶</a>十五、组合查询</h1>
<blockquote>
<p>即使用<code>UNION</code>来合并多条<code>SELECT</code>语句。</p>
</blockquote>
<h2 id="1、UNION-和-WHERE"><a class="header-anchor" href="#1、UNION-和-WHERE">¶</a>1、UNION 和 WHERE</h2>
<blockquote>
<p><code>UNION</code> 几乎总是完成与多个<code>WHERE</code> 条件相同的工作。</p>
<p><code>UNION ALL</code> 为 <code>UNION</code> 的一种形式，它完成<code>WHERE</code> 子句完成不了的工作。如果确实需要每个条件的匹配行全部出现（包括重复行），则必须使用 <code>UNION ALL</code> 而不是 <code>WHERE</code> 。</p>
<ul>
<li>
<p><code>UNION</code> 中的每个查询必须包含相同的列、表达式或聚集函数！</p>
</li>
<li>
<p>列数据类型必须兼容：类型不必完全相同，但必须是<code>DBMS</code>可以隐含地转换的类型（例如，不同的数值类型或不同的日期类型）。</p>
</li>
</ul>
</blockquote>
<h2 id="2、UNION"><a class="header-anchor" href="#2、UNION">¶</a>2、UNION</h2>
<blockquote>
<p>会过滤重复行！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_id, prod_id, prod_price<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_price <span class="hljs-operator">&lt;=</span> <span class="hljs-number">5</span><br><span class="hljs-keyword">UNION</span><br><span class="hljs-keyword">SELECT</span> vend_id，prod_id，prod_price<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1001</span>,<span class="hljs-number">1002</span>);<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、UNION-ALL"><a class="header-anchor" href="#3、UNION-ALL">¶</a>3、UNION ALL</h2>
<blockquote>
<p>不会过滤重复行！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_id, prod_id, prod_price<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_price <span class="hljs-operator">&lt;=</span> <span class="hljs-number">5</span><br><span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><br><span class="hljs-keyword">SELECT</span> vend_id，prod_id，prod_price<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1001</span>,<span class="hljs-number">1002</span>);<br></code></pre></td></tr></tbody></table></figure>
<h2 id="4、组合结果排序"><a class="header-anchor" href="#4、组合结果排序">¶</a>4、组合结果排序</h2>
<blockquote>
<p>只能在最后使用一条<code>ORDER BY</code> 进行排序，排序作用于<code>UNION</code>的结果！</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> vend_id, prod_id, prod_price<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> prod_price <span class="hljs-operator">&lt;=</span> <span class="hljs-number">5</span><br><span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><br><span class="hljs-keyword">SELECT</span> vend_id，prod_id，prod_price<br><span class="hljs-keyword">FROM</span> products<br><span class="hljs-keyword">WHERE</span> vend_id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1001</span>,<span class="hljs-number">1002</span>)<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> ven_id, prod_price;<br></code></pre></td></tr></tbody></table></figure>
<h1 id="十六、全文本搜索"><a class="header-anchor" href="#十六、全文本搜索">¶</a>十六、全文本搜索</h1>
<h2 id="1、两种引擎"><a class="header-anchor" href="#1、两种引擎">¶</a>1、两种引擎</h2>
<ol>
<li><code>InnoDB</code>是一个可靠的事务处理引擎，它<strong>不支持</strong>全文本搜索，但<strong>支持</strong>事务处理。</li>
<li><code>MyISAM</code>是一个性能极高的引擎，它<strong>支持</strong>全文本搜索，但<strong>不支持</strong>事务处理。</li>
</ol>
<blockquote>
<ol>
<li>
<p><strong>性能</strong>：通配符和正则表达式匹配通常要求<code>MySQL</code>尝试匹配表中所有行（而且这些搜索极少使用表索引）。因此，由于被搜索行数不断增加，这些搜索可能非常耗时。</p>
</li>
<li>
<p><strong>明确控制</strong>：使用通配符和正则表达式匹配，很难（而且并不总是能）明确地控制匹配什么和不匹配什么。例如，指定一个词匹配和指定一个词不匹配…</p>
</li>
<li>
<p><strong>智能化的结果</strong>：虽然基于通配符和正则表达式的搜索提供了非常灵活的搜索，但它们都不能提供一种智能化的选择结果的方法。例如：一个特殊词的搜索将会返回包含这些词的所有行，而不区分包含单个匹配的行和包含多个匹配的行（按照可能是更好地匹配来排列它们）。类似，一个特殊词的搜索将不会找出不包含该词但包含其他相关词的行。</p>
</li>
</ol>
<p>所有这些限制以及更多的限制都可以用<strong>全文本搜索</strong>来解决，在使用全文本搜索时，<code>MySQL</code>不需要分别查看每个行，不需要分别分析和处理每个词。<code>MySQL</code>创建指定列中各词的一个<strong>索引</strong>，搜索可以针对这些词进行。这样，<code>MySQL</code>可以快速有效的决定那些词分配（那些行包含它们），那些词不匹配，它们匹配的频率，等等。</p>
</blockquote>
<h2 id="2、启用全文本搜索"><a class="header-anchor" href="#2、启用全文本搜索">¶</a>2、启用全文本搜索</h2>
<blockquote>
<p>这些列中有一个名为<code>note_text</code>的列，为了进行全文本搜索，<code>MySQL</code>根据字句<code>FULLTEXT(note_text)</code>的指示对它进行了索引，这里的<code>FULLTEXT</code><strong>索引</strong>单个列，如果需要也可以指定<strong>多个列</strong>。</p>
<p>在定义之后，<code>MySQL</code>自动维护该索引。在增加、更新或删除行时，索引随之自动更新。</p>
<p>可以在创建表时指定<code>FULLTEXT</code>，或者在稍后指定。但是不要在导入数据时使用<code>FULLTEXT</code>，因为更新索引需要时间，虽然不是很多，但毕竟要花时间。如果正在导入数据到一个新表，此时不应该启用<code>FULLTEXT</code>索引。应该首先导入所有数据，然后在修改表，定义<code>FULLTEXT</code>，这要有助于更快地导入数据（而且使索引的总时间小于在导入每行每行时分别进行索引所需的总时间）。</p>
<p>在建表最后指出引擎：<code>ENGINE=MyISAM</code></p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> productnotes           <br>(<br>    note_id <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>    prod_id <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    note_text text <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    note_date datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span>(note_id),<br>    FULLTEXT(note_text)<br>)ENGINE<span class="hljs-operator">=</span>MyISAM;<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、进行全文本搜索"><a class="header-anchor" href="#3、进行全文本搜索">¶</a>3、进行全文本搜索</h2>
<p>全文本搜索用到的两个函数：</p>
<blockquote>
<p><strong>传递给<code>Match</code>的值必须与<code>FULLTEXT()</code>定义中的相同，如果指定多个列，则必须列出它们（而且次序相同）。</strong></p>
<p><strong>搜索不区分大小写，除非使用<code>BINARY</code>方式。</strong></p>
<p>全文本搜索的一个重要部分就是对<strong>结果排序</strong>。具有较高等级（单词出现的位置靠前，数量多的优先级更高）的行先返回。<code>LIKE</code>同样可以实现，但是由于使用通配符搜索，效率低，速度慢，且输出无序！</p>
</blockquote>
<ol>
<li><code>Match()</code>指定被搜索的列</li>
<li><code>Against()</code>指定要使用的搜索表达式。</li>
</ol>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">'rabbit'</span>);<br><br><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> note_text <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%rabbit%'</span>;<br></code></pre></td></tr></tbody></table></figure>
<p><strong>如下：可以返回每行计算后的优先级作为<code>RANK</code>一列！</strong></p>
<blockquote>
<p>等级由MySQL根据行中词的数目、唯一词的数目、整个索引中词的总数以及包含该词的行的数目计算出来。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> note_text<br>       <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">'rabbit'</span>) <span class="hljs-keyword">AS</span> RANK<br><span class="hljs-keyword">FROM</span> productnotes;<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@latest/2020/06/30/d3fce39877aa59040f814339489a3e62.png" alt=""></p>
<h2 id="4、使用查询拓展"><a class="header-anchor" href="#4、使用查询拓展">¶</a>4、使用查询拓展</h2>
<blockquote>
<p>查询扩展用来设法放宽所返回的全文本搜索结果的范围。</p>
<p>在<code>Against</code>内添加<code>WITH QUERY EXPANSION</code>表名使用查询拓展！</p>
</blockquote>
<p><strong>使用查询扩展时，MySQL对数据和索引进行两遍扫描来完成搜索：</strong></p>
<ul>
<li>首先，进行一个基本的全文本搜索，找出与搜索条件匹配的所有航</li>
<li>其次，MySQL检查这些匹配行并选择所有有用的词</li>
<li>再其次，MySQL再次进行全文本搜索，这次不仅使用原来的条件，而且还是用使用所有有用的词</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">'anvils'</span> <span class="hljs-keyword">WITH</span> QUERY EXPANSION) ;<br></code></pre></td></tr></tbody></table></figure>
<h2 id="5、布尔文本搜索"><a class="header-anchor" href="#5、布尔文本搜索">¶</a>5、布尔文本搜索</h2>
<blockquote>
<p><code>MySQL</code>支持全文本搜索的另外一种形式，称为<strong>布尔方式</strong>（<code>boolean mode</code>）。</p>
<p><strong>即使没有<code>FULLTEXT</code>索引也可以使用</strong><br>
布尔方式不同于迄今为止使用的全文本搜索语法的地方在于，即使没有定义fulltext索引，也可以使用它。但是这是一种非常<strong>缓慢</strong>的操作（其性能随着数据量的增加而降低）。</p>
<p>在<code>Against</code>内添加<code> IN BOOLEAN MODE</code>来表名使用布尔文本搜索！</p>
</blockquote>
<p>此全文本搜索检索包含词<code>heavy</code>的所有行（有两行）。其中使用了关键字<code>IN BOOLEAN MODE</code>，但实际上没有指定布尔操作符，因此，其结果与没有指定布尔方式的结果相同：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">'heavy'</span> <span class="hljs-keyword">IN</span> <span class="hljs-type">BOOLEAN</span> MODE);<br></code></pre></td></tr></tbody></table></figure>
<p>可匹配包含heavy但不包含任意以rope开始的词的所有行：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span>` `note_text<br><span class="hljs-keyword">FROM</span>` `productnotes<br><span class="hljs-keyword">WHERE</span>` `<span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">'heavy -rope*'</span> <span class="hljs-keyword">IN</span> <span class="hljs-type">BOOLEAN</span> MODE);<br></code></pre></td></tr></tbody></table></figure>
<p><strong>全文本布尔操作符：</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">布尔操作符</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">+</td>
<td style="text-align:center">包含，词必须存在</td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">排除，词必须不出现</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:center">包含，而且增加等级值</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:center">包含，而且减少等级制</td>
</tr>
<tr>
<td style="text-align:center">()</td>
<td style="text-align:center">把词组成表达式(允许这些子表达式作为一个组被包含、排除、排列等)</td>
</tr>
<tr>
<td style="text-align:center">~</td>
<td style="text-align:center">取消一个词的排序值</td>
</tr>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">词尾的通配符</td>
</tr>
<tr>
<td style="text-align:center">“”</td>
<td style="text-align:center">定义一个短语(与单个词的列表不一样，它匹配整个短语以便包含或排除这个短语)</td>
</tr>
</tbody>
</table>
<p>部分示例如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">'+rabbit +bait'</span> <span class="hljs-keyword">IN</span> <span class="hljs-type">BOOLEAN</span> MODE);<br>这个搜索匹配包含词rabbit和bait的行<br> <br> <br><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">'rabbit bait'</span> <span class="hljs-keyword">IN</span> <span class="hljs-type">BOOLEAN</span> MODE);<br>没有指定操作符，这个搜索匹配包含词rabbit和bait中的至少一个词的行；<br> <br> <br><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">'“rabbit bait”'</span> <span class="hljs-keyword">IN</span> <span class="hljs-type">BOOLEAN</span> MODE);<br>这个搜索匹配短语rabbit bait，而不是匹配两个词；<br> <br> <br> <br><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">'&gt;rabbit &lt;carrot'</span> <span class="hljs-keyword">IN</span> <span class="hljs-type">BOOLEAN</span> MODE);<br>这个搜索匹配rabbit 和carrot，增加前者的等级，降低后者的等级；<br> <br> <br><span class="hljs-keyword">SELECT</span> note_text<br><span class="hljs-keyword">FROM</span> productnotes<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Match</span>(note_text) Against(<span class="hljs-string">'+safe +(&lt;combination)'</span> <span class="hljs-keyword">IN</span> <span class="hljs-type">BOOLEAN</span> MODE);<br>这个搜索匹配safe 和combination，降低后者的等级；<br></code></pre></td></tr></tbody></table></figure>
<p><strong>小总结：</strong></p>
<ul>
<li>全文本搜索数据时，短词被忽略而且从索引中删除。短词定义为那些具有3个或者3个以下字符的词（如果需要，这个数目可以修改）。</li>
<li>MySQL带有一个内建的非用词（``stopword`）列表，这些词在索引全文本数据时总是被忽略。如果需要，可以覆盖这个列表（请参阅MySQL文档以了解如何完成此工作）。</li>
<li>许多词出现的频率高，搜索它们没有用处（返回太多的结果），因此，MySQL定义了一条50%的规则，如果一个词出现在50%以上的行中，则将它作为一个非用词忽略。50%规则不用于<code>IN BOOLEAN MODE</code></li>
<li>如果表中的行数小于3行，则全文本搜索将不返回结果（因为每个词或者不出现，或者至少出现在50%的行中）。</li>
<li>忽略词中的单引号 ’ 。例如， <code>don't </code>索引为 <code>dont</code> 。</li>
<li>仅在<code>MyISAM</code>的数据库引擎中支持全文本搜索。</li>
<li>不具有词分隔符（包括日语和汉语）的语言不能恰当地返回全文本搜索结果。</li>
</ul>
<center style="color: red; font-size: 25px">数据库教程之查询数据已完成！敬请期待后续内容！</center><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">ITNXD</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.itnxd.cn/posts/16928.html">https://www.itnxd.cn/posts/16928.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.itnxd.cn" target="_blank">小牛博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SELECT/">SELECT</a><a class="post-meta__tags" href="/tags/%E6%9F%A5%E8%AF%A2/">查询</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/niuxvdong/pic@abcb0ee99d47116058305ed624d2b854c301e126/2021/02/06/a748bd6cf1ce9794a730ee2ac026ca16.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/WeChantQR.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/WeChantQR.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/AliPayQR.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/AliPayQR.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/1495.html"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@555efb3ddebd04d1969e9ab00080635a859b2739/2021/02/06/0eaff35043c619dc102d61019cf0b07b.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JS实战之油猴脚本编写之知乎一键转载</div></div></a></div><div class="next-post pull-right"><a href="/posts/15411.html"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@34dabb7f36c7e10af6f9cd383f5884a83fcbf94e/2021/02/06/9fd846795f34be8edc6238ce1ef30584.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">数据库教程之基础知识</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A6%96%E5%85%88%E6%9D%A5%E9%A6%96%E6%AD%8C%E6%9B%B2%E6%9D%A5%E6%94%BE%E6%9D%BE%E4%B8%80%E4%B8%8B%E5%90%A7%EF%BC%81"><span class="toc-text">首先来首歌曲来放松一下吧！</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE"><span class="toc-text">一、准备数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="toc-text">二、基本查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81SELECT%E8%AF%AD%E5%8F%A5"><span class="toc-text">1、SELECT语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81DISTINCT%E5%8F%AA%E8%BF%94%E5%9B%9E%E4%B8%8D%E5%90%8C%E5%80%BC"><span class="toc-text">2、DISTINCT只返回不同值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E7%94%A8%E4%BA%8E%E8%AE%A1%E7%AE%97%E7%9A%84SELECT"><span class="toc-text">3、用于计算的SELECT</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-text">三、条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81WHERE-%E6%9D%A1%E4%BB%B6"><span class="toc-text">1、WHERE 条件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="toc-text">2、逻辑运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-AND"><span class="toc-text">2.1 AND</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-OR"><span class="toc-text">2.2 OR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-NOT"><span class="toc-text">2.3 NOT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%A4%9A%E6%9D%A1%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8B%AC%E5%8F%B7"><span class="toc-text">2.4 多条件使用括号</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AC%A6%E5%8F%B7"><span class="toc-text">3、条件表达式符号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81-%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">4、 其他操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-IN"><span class="toc-text">4.1 IN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-LIKE"><span class="toc-text">4.2 LIKE</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-%E7%99%BE%E5%88%86%E5%8F%B7%EF%BC%88-%EF%BC%89%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-text">4.2.1 百分号（%）通配符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-%E4%B8%8B%E5%88%92%E7%BA%BF%EF%BC%88-%EF%BC%89%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-text">4.2.2 下划线（_）通配符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-%E4%BD%BF%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-text">4.2.3 使用通配符的优缺点</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%8A%95%E5%BD%B1%E6%9F%A5%E8%AF%A2"><span class="toc-text">四、投影查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%99%AE%E9%80%9A%E6%8A%95%E5%BD%B1"><span class="toc-text">1、普通投影</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%88%AB%E5%90%8D%E6%8A%95%E5%BD%B1"><span class="toc-text">2、别名投影</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%A4%8D%E6%9D%82%E6%8A%95%E5%BD%B1"><span class="toc-text">3、复杂投影</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%8E%92%E5%BA%8F"><span class="toc-text">五、排序</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%8D%87%E5%BA%8F"><span class="toc-text">1、升序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E9%99%8D%E5%BA%8F"><span class="toc-text">2、降序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%A4%8D%E6%9D%82%E6%8E%92%E5%BA%8F"><span class="toc-text">3、复杂排序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%A4%9A%E5%88%97%E6%8E%92%E5%BA%8F"><span class="toc-text">3.1 多列排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%9D%A1%E4%BB%B6%E6%8E%92%E5%BA%8F"><span class="toc-text">3.2 条件排序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-text">六、分页查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="toc-text">注意：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%84%E5%88%99%EF%BC%9A"><span class="toc-text">规则：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%B8%8B%EF%BC%9A"><span class="toc-text">如下：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E8%81%9A%E5%90%88%EF%BC%88%E8%81%9A%E9%9B%86%EF%BC%89%E6%9F%A5%E8%AF%A2"><span class="toc-text">七、聚合（聚集）查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81COUNT-%E5%87%BD%E6%95%B0"><span class="toc-text">1、COUNT()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%85%B6%E4%BB%96%E8%81%9A%E9%9B%86%E5%87%BD%E6%95%B0"><span class="toc-text">2、其他聚集函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E4%BD%BF%E7%94%A8DISTINCT"><span class="toc-text">3、使用DISTINCT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E7%BB%84%E5%90%88%E8%81%9A%E9%9B%86%E5%87%BD%E6%95%B0"><span class="toc-text">4、组合聚集函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-text">八、多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-text">1、语法：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%BD%BF%E7%94%A8WHERE"><span class="toc-text">2、使用WHERE</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E8%BF%9E%E6%8E%A5%EF%BC%88%E8%81%94%E7%BB%93%EF%BC%89%E6%9F%A5%E8%AF%A2"><span class="toc-text">九、连接（联结）查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81INNER-JOIN%E6%9F%A5%E8%AF%A2%EF%BC%88%E5%86%85%E8%BF%9E%E6%8E%A5%EF%BC%89"><span class="toc-text">1、INNER JOIN查询（内连接）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81RIGHT-OUTER-JOIN%EF%BC%88%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5%EF%BC%89"><span class="toc-text">2、RIGHT OUTER JOIN（右外连接）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81LEFT-OUTER-JOIN%EF%BC%88%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5%EF%BC%89"><span class="toc-text">3、LEFT OUTER JOIN（左外连接）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81FULL-OUTER-JOIN%EF%BC%88%E5%85%A8%E5%A4%96%E8%BF%9E%E6%8E%A5%EF%BC%89"><span class="toc-text">4、FULL OUTER JOIN（全外连接）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E6%AD%A3%E5%88%99%E6%90%9C%E7%B4%A2%E6%9F%A5%E8%AF%A2"><span class="toc-text">十、正则搜索查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-text">1、语法格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%BD%BF%E7%94%A8SELECT%E8%BF%9B%E8%A1%8C%E7%AE%80%E5%8D%95%E6%B5%8B%E8%AF%95"><span class="toc-text">2、使用SELECT进行简单测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81REGEXP-%E5%92%8C-LIKE"><span class="toc-text">3、REGEXP 和 LIKE</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5"><span class="toc-text">十一、创建计算字段</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E4%BD%BF%E7%94%A8Concat-%E5%87%BD%E6%95%B0"><span class="toc-text">1、使用Concat()函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%89%A7%E8%A1%8C%E7%AE%97%E6%9C%AF%E8%AE%A1%E7%AE%97"><span class="toc-text">2、执行算术计算</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E5%85%B6%E4%BB%96%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0"><span class="toc-text">十二、其他普通函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-text">1、文本处理函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-text">2、日期和时间处理函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%95%B0%E5%80%BC%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-text">3、数值处理函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E5%88%86%E7%BB%84%EF%BC%88GROUP%EF%BC%89"><span class="toc-text">十三、分组（GROUP）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%8D%95%E5%88%97%E5%88%86%E7%BB%84"><span class="toc-text">1、单列分组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%A4%9A%E5%88%97%E5%88%86%E7%BB%84"><span class="toc-text">2、多列分组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81WITH-ROLLUP"><span class="toc-text">3、WITH ROLLUP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%AF%B9%E5%88%86%E7%BB%84%E7%9A%84%E8%BF%87%E6%BB%A4"><span class="toc-text">4、对分组的过滤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E9%83%A8%E4%BD%BF%E7%94%A8%E7%9A%84%E9%A1%BA%E5%BA%8F"><span class="toc-text">全部使用的顺序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">十四、子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%88%A9%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4"><span class="toc-text">1、利用子查询进行过滤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%88%A9%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%A4%84%E7%90%86%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5"><span class="toc-text">2、利用子查询处理计算字段</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%94%E3%80%81%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-text">十五、组合查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81UNION-%E5%92%8C-WHERE"><span class="toc-text">1、UNION 和 WHERE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81UNION"><span class="toc-text">2、UNION</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81UNION-ALL"><span class="toc-text">3、UNION ALL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E7%BB%84%E5%90%88%E7%BB%93%E6%9E%9C%E6%8E%92%E5%BA%8F"><span class="toc-text">4、组合结果排序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%85%AD%E3%80%81%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2"><span class="toc-text">十六、全文本搜索</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E4%B8%A4%E7%A7%8D%E5%BC%95%E6%93%8E"><span class="toc-text">1、两种引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%90%AF%E7%94%A8%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2"><span class="toc-text">2、启用全文本搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E8%BF%9B%E8%A1%8C%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2"><span class="toc-text">3、进行全文本搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E4%BD%BF%E7%94%A8%E6%9F%A5%E8%AF%A2%E6%8B%93%E5%B1%95"><span class="toc-text">4、使用查询拓展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%B8%83%E5%B0%94%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2"><span class="toc-text">5、布尔文本搜索</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By ITNXD</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">CDN BY <a target="_blank" rel="external nofollow" href="https://www.jsdelivr.com/"><b>jsDelivr</b></a> | HOST BY  <a target="_blank" rel="external nofollow" href="https://vercel.com/"><b>Vercel</b></a> && <a target="_blank" rel="external nofollow" href="https://github.com/"><b>Github</b></a><br><img style="vertical-align:middle" src="https://cdn.jsdelivr.net/gh/lzyblog/image@4b122354dee27f3056fd3a7fc6a43dbf68cebf33/2020/11/16/025e5329f3592dfa03a13c5365323ba1.png" alt=""> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.beian.miit.gov.cn/"><b>晋ICP备19005025号-2</b></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      true && mermaid.init()
    })
  }
}</script><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'itnxd-8g1z2i760e99f516',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'itnxd-8g1z2i760e99f516',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'itnxd-8g1z2i760e99f516',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><div class="aplayer no-destroy" data-id="1551071404" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/6dc9e8f9.js","daovoice")
</script><script>var isChatBtn = true
daovoice('init', {
  app_id: '6dc9e8f9',},{
  launcher: { 
     disableLauncherIcon: isChatBtn // 悬浮 ICON 是否显示
  },
});
daovoice('update');

if (isChatBtn) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      daovoice('show')
    });
  }
  chatBtnFn()
} else {
  if (false) {
    function chatBtnHide () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: true // 悬浮 ICON 是否显示
        },
      });
    }
    function chatBtnShow () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: false // 悬浮 ICON 是否显示
        },
      });
    }
  }
}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>