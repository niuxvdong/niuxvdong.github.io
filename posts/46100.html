<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Java教程系列之集合 | 小牛博客</title><meta name="keywords" content="集合"><meta name="author" content="ITNXD"><meta name="copyright" content="ITNXD"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="¶首先来首歌曲来放松一下吧！       ¶一、Java集合介绍  在Java中，如果一个Java对象可以在内部持有若干其他Java对象，并对外提供访问接口，我们把这种Java对象称为集合！   数组就是一种集合：  123String[] ss &#x3D; new String[10]; &#x2F;&#x2F; 可以持有10个String对象ss[0] &#x3D; &quot;Hello&quot;; &#x2F;&#x2F; 可以放入String对象String f">
<meta property="og:type" content="article">
<meta property="og:title" content="Java教程系列之集合">
<meta property="og:url" content="https://www.itnxd.cn/posts/46100.html">
<meta property="og:site_name" content="小牛博客">
<meta property="og:description" content="¶首先来首歌曲来放松一下吧！       ¶一、Java集合介绍  在Java中，如果一个Java对象可以在内部持有若干其他Java对象，并对外提供访问接口，我们把这种Java对象称为集合！   数组就是一种集合：  123String[] ss &#x3D; new String[10]; &#x2F;&#x2F; 可以持有10个String对象ss[0] &#x3D; &quot;Hello&quot;; &#x2F;&#x2F; 可以放入String对象String f">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/niuxvdong/pic@a7ba0705416b80093aaa91cac65656b3cd023871/2021/02/06/d5787bbd8ec29096932f5b1b12823ec4.png">
<meta property="article:published_time" content="2020-04-07T08:23:56.000Z">
<meta property="article:modified_time" content="2021-02-06T14:12:51.589Z">
<meta property="article:author" content="ITNXD">
<meta property="article:tag" content="集合">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/niuxvdong/pic@a7ba0705416b80093aaa91cac65656b3cd023871/2021/02/06/d5787bbd8ec29096932f5b1b12823ec4.png"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/favicon.ico"><link rel="canonical" href="https://www.itnxd.cn/posts/46100"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="H9LW1qdxrkJ55YbkfWulMvpaexxx3Rk0Yo6dVANeNHc"/><meta name="baidu-site-verification" content="code-YglH3DObCb"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8d3bd59bf6303bd5f44677445d369df5";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":300,"languages":{"author":"作者: ITNXD","link":"链接: ","source":"来源: 小牛博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Java教程系列之集合',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-02-06 22:12:51'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><link rel="stylesheet" href="/css/my.css"><style type="text/css">#toggle-sidebar {bottom: 80px}</style><link rel="stylesheet" href="//at.alicdn.com/t/font_1828588_zrw9f0qqie.css"><link rel="stylesheet" href="/self/atom-one-light.css"><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="小牛博客" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@2f11f173da64ba6a270c2e93d23e00911b1019d3/2021/02/06/e373babbf340391956b673128a84185d.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">259</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">213</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">30</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/niuxvdong/pic@a7ba0705416b80093aaa91cac65656b3cd023871/2021/02/06/d5787bbd8ec29096932f5b1b12823ec4.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">小牛博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Java教程系列之集合</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-04-07T08:23:56.000Z" title="发表于 2020-04-07 16:23:56">2020-04-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-02-06T14:12:51.589Z" title="更新于 2021-02-06 22:12:51">2021-02-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java%E6%95%99%E7%A8%8B/">Java教程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">11.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>46分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Java教程系列之集合"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="首先来首歌曲来放松一下吧！"><a class="header-anchor" href="#首先来首歌曲来放松一下吧！">¶</a>首先来首歌曲来放松一下吧！</h2>

    <div id="aplayer-PeMPjifS" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="1304861566" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#FF4081"></div>
<h2 id="一、Java集合介绍"><a class="header-anchor" href="#一、Java集合介绍">¶</a>一、Java集合介绍</h2>
<blockquote>
<p>在Java中，如果一个Java对象可以在内部持有若干其他Java对象，并对外提供访问接口，我们把这种Java对象称为集合！</p>
</blockquote>
<ul>
<li>数组就是一种集合：</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">String[] ss = <span class="hljs-keyword">new</span> String[<span class="hljs-number">10</span>]; <span class="hljs-comment">// 可以持有10个String对象</span><br>ss[<span class="hljs-number">0</span>] = <span class="hljs-string">"Hello"</span>; <span class="hljs-comment">// 可以放入String对象</span><br>String first = ss[<span class="hljs-number">0</span>]; <span class="hljs-comment">// 可以获取String对象</span><br></code></pre></td></tr></tbody></table></figure>
<h3 id="1、数组的不足"><a class="header-anchor" href="#1、数组的不足">¶</a>1、数组的不足</h3>
<ul>
<li>数组初始化后大小不可变；</li>
<li>数组只能按索引顺序存取。</li>
</ul>
<h3 id="2、需要各种类型的集合"><a class="header-anchor" href="#2、需要各种类型的集合">¶</a>2、需要各种类型的集合</h3>
<ul>
<li>可变大小的顺序链表；</li>
<li>保证无重复元素的集合；</li>
<li>…</li>
</ul>
<h3 id="3、Collection"><a class="header-anchor" href="#3、Collection">¶</a>3、Collection</h3>
<blockquote>
<p><code>Collection</code>，它是除<code>Map</code>外所有其他集合类的根接口，来自于<code>java.util</code>包！</p>
</blockquote>
<h4 id="3-1-三种主要集合："><a class="header-anchor" href="#3-1-三种主要集合：">¶</a>3.1 三种主要集合：</h4>
<ul>
<li><code>List</code>：一种有序列表的集合</li>
<li><code>Set</code>：一种保证没有重复元素的集合</li>
<li><code>Map</code>：一种通过键值（key-value）查找的映射表集合</li>
</ul>
<h4 id="3-2-Java集合的特点："><a class="header-anchor" href="#3-2-Java集合的特点：">¶</a>3.2 Java集合的特点：</h4>
<ul>
<li>一是实现了接口和实现类相分离，例如，有序表的接口是<code>List</code>，具体的实现类有<code>ArrayList</code>，<code>LinkedList</code>等.</li>
<li>二是支持泛型，我们可以限制在一个集合中只能放入同一种数据类型的元素.</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;(); <span class="hljs-comment">// 只能放入String类型</span><br></code></pre></td></tr></tbody></table></figure>
<h4 id="3-3-集合访问（Iterator）"><a class="header-anchor" href="#3-3-集合访问（Iterator）">¶</a>3.3 集合访问（Iterator）</h4>
<blockquote>
<p>Java访问集合总是通过统一的方式——迭代器（Iterator）来实现，它最明显的好处在于无需知道集合内部元素是按什么方式存储的。</p>
</blockquote>
<blockquote>
<p>Java访问集合总是通过统一的方式——迭代器（Iterator）来实现，它最明显的好处在于无需知道集合内部元素是按什么方式存储的。</p>
</blockquote>
<h4 id="3-4-不建议继续使用的集合"><a class="header-anchor" href="#3-4-不建议继续使用的集合">¶</a>3.4 不建议继续使用的集合</h4>
<p>由于Java的集合设计非常久远，中间经历过大规模改进，我们要注意到有一小部分集合类是遗留类，不应该继续使用：</p>
<ul>
<li><code>Hashtable</code>：一种线程安全的<code>Map</code>实现；</li>
<li><code>Vector</code>：一种线程安全的<code>List</code>实现；</li>
<li><code>Stack</code>：基于<code>Vector</code>实现的<code>LIFO</code>的栈。</li>
</ul>
<p>还有一小部分接口是遗留接口，也不应该继续使用：</p>
<ul>
<li><code>Enumeration</code>：已被<code>Iterator</code>取代。</li>
</ul>
<h2 id="二、使用List"><a class="header-anchor" href="#二、使用List">¶</a>二、使用List</h2>
<blockquote>
<p><code>List</code>是最基础的一种集合：它是一种有序链表。</p>
</blockquote>
<h3 id="1、数组的删除和添加"><a class="header-anchor" href="#1、数组的删除和添加">¶</a>1、数组的删除和添加</h3>
<ul>
<li>删除：删掉指定索引位置后将后面元素整体前移一位；</li>
<li>添加：将指定索引位置及之后元素后移一位，将新元素插入该位置；</li>
</ul>
<p>可见：操作增删是很复杂的，需要人为介入去处理！</p>
<h3 id="2、ArrayList"><a class="header-anchor" href="#2、ArrayList">¶</a>2、ArrayList</h3>
<blockquote>
<p>把添加和删除的操作封装起来，让我们操作<code>List</code>类似于操作数组，却不用关心内部元素如何移动。</p>
<p>变成了自动操作！</p>
</blockquote>
<ul>
<li>增删可以直接使用，已经封装为函数！</li>
<li>数组已满时的操作：
<ul>
<li>先创建一个更大的新数组，然后把旧数组的所有元素复制到新数组，紧接着用新数组取代旧数组</li>
</ul>
</li>
</ul>
<h3 id="3、List-E-接口"><a class="header-anchor" href="#3、List-E-接口">¶</a>3、<code>List&lt;E&gt;</code>接口</h3>
<p>主要的接口方法：</p>
<ul>
<li>在末尾添加一个元素：<code>void add(E e)</code></li>
<li>在指定索引添加一个元素：<code>void add(int index, E e)</code></li>
<li>删除指定索引的元素：<code>int remove(int index)</code>：返回索引+1，从1开始计数！</li>
<li>删除某个元素：<code>int remove(Object e)</code></li>
<li>获取指定索引的元素：<code>E get(int index)</code></li>
<li>获取链表大小（包含元素的个数）：<code>int size()</code></li>
</ul>
<h3 id="4、ArrayList与LinkedList"><a class="header-anchor" href="#4、ArrayList与LinkedList">¶</a>4、ArrayList与LinkedList</h3>
<blockquote>
<p>都是List接口实现的实例类！</p>
<p><code>LinkedList</code>相当于单链表，有前后的指针关系！</p>
<p>通常情况下，我们总是优先使用<code>ArrayList</code>。</p>
</blockquote>
<p>区别：</p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left">ArrayList</th>
<th style="text-align:left">LinkedList</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">获取指定元素</td>
<td style="text-align:left">速度很快</td>
<td style="text-align:left">需要从头开始查找元素</td>
</tr>
<tr>
<td style="text-align:left">添加元素到末尾</td>
<td style="text-align:left">速度很快</td>
<td style="text-align:left">速度很快</td>
</tr>
<tr>
<td style="text-align:left">在指定位置添加/删除</td>
<td style="text-align:left">需要移动元素</td>
<td style="text-align:left">不需要移动元素</td>
</tr>
<tr>
<td style="text-align:left">内存占用</td>
<td style="text-align:left">少</td>
<td style="text-align:left">较大</td>
</tr>
</tbody>
</table>
<h3 id="5、List的特点"><a class="header-anchor" href="#5、List的特点">¶</a>5、List的特点</h3>
<ul>
<li>元素可重复</li>
<li>允许添加<code>null</code></li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        list.add(<span class="hljs-string">"hello"</span>);<br>        list.add(<span class="hljs-string">"hello"</span>);<br>        list.add(<span class="hljs-keyword">null</span>);<br>        System.out.println(list.size()); <span class="hljs-comment">// 3</span><br>        System.out.println(list.toString()); <span class="hljs-comment">// [hello, hello, null]</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="6、创建List"><a class="header-anchor" href="#6、创建List">¶</a>6、创建List</h3>
<blockquote>
<p>通过<code>List</code>接口提供的<code>of()</code>方法，根据给定元素快速创建<code>List</code>：</p>
<p>但是<code>List.of()</code>方法不接受<code>null</code>值，如果传入<code>null</code>，会抛出<code>NullPointerException</code>异常。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; list1 = List.of(<span class="hljs-string">"hello"</span>, <span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>);<br><span class="hljs-comment">// 无法传入null:</span><br>List&lt;String&gt; list2 = List.of(<span class="hljs-keyword">null</span>);<br></code></pre></td></tr></tbody></table></figure>
<h3 id="7、遍历List"><a class="header-anchor" href="#7、遍历List">¶</a>7、遍历List</h3>
<h4 id="7-1-通过get方法遍历（不推荐）"><a class="header-anchor" href="#7-1-通过get方法遍历（不推荐）">¶</a>7.1 通过get方法遍历（不推荐）</h4>
<blockquote>
<p>缺点：</p>
<p>一是代码复杂；</p>
<p>二是因为<code>get(int)</code>方法只有<code>ArrayList</code>的实现是高效的，换成<code>LinkedList</code>后，索引越大，访问速度越慢。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        list.add(<span class="hljs-string">"hello"</span>);<br>        list.add(<span class="hljs-string">"hello"</span>);<br>        list.add(<span class="hljs-keyword">null</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; list.size(); i++) {<br>            System.out.println(list.get(i));<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h4 id="7-2-通过Iterator遍历"><a class="header-anchor" href="#7-2-通过Iterator遍历">¶</a>7.2 通过Iterator遍历</h4>
<blockquote>
<p>使用迭代器<code>Iterator</code>来访问<code>List</code>。</p>
<p><code>Iterator</code>本身也是一个对象，但它是由<code>List</code>的实例调用<code>iterator()</code>方法的时候创建的。</p>
<p><code>Iterator</code>对象知道如何遍历一个<code>List</code>，并且不同的<code>List</code>类型，返回的<code>Iterator</code>对象实现也是不同的，但总是具有最高的访问效率。</p>
</blockquote>
<p>两个方法：</p>
<ul>
<li><code>boolean hasNext()</code>：判断是否有下一个元素</li>
<li><code>E next()</code>：返回下一个元素</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        list.add(<span class="hljs-string">"hello"</span>);<br>        list.add(<span class="hljs-string">"hello"</span>);<br>        list.add(<span class="hljs-keyword">null</span>);<br>        <span class="hljs-keyword">for</span> (Iterator&lt;String&gt; it = list.iterator(); it.hasNext(); ){<br>            System.out.println(it.next());<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h4 id="7-3-通过for-each遍历（推荐）"><a class="header-anchor" href="#7-3-通过for-each遍历（推荐）">¶</a>7.3 通过for each遍历（推荐）</h4>
<blockquote>
<p>编译器内部其实会通过Iterator来实现遍历，达到最高效！</p>
<p>和7.2的实现是一样的，但是更加简单使用，推荐使用！</p>
<p>只要实现了<code>Iterable</code>接口的集合类都可以直接用<code>for each</code>循环来遍历，Java编译器本身并不知道如何遍历集合对象，但它会自动把<code>for each</code>循环变成<code>Iterator</code>的调用，原因就在于<code>Iterable</code>接口定义了一个<code>Iterator iterator()</code>方法，强迫集合类必须返回一个<code>Iterator</code>实例。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        list.add(<span class="hljs-string">"hello"</span>);<br>        list.add(<span class="hljs-string">"hello"</span>);<br>        list.add(<span class="hljs-keyword">null</span>);<br>        <span class="hljs-keyword">for</span> (String s : list) {<br>            System.out.println(s);<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="8、List转换为Array"><a class="header-anchor" href="#8、List转换为Array">¶</a>8、List转换为Array</h3>
<h4 id="8-1-使用toArray-方法"><a class="header-anchor" href="#8-1-使用toArray-方法">¶</a>8.1 使用toArray()方法</h4>
<blockquote>
<p>调用<code>toArray()</code>方法直接返回一个<code>Object[]</code>数组：</p>
<p>这种方法会丢失类型信息，所以实际应用很少。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; list = List.of(<span class="hljs-string">"apple"</span>, <span class="hljs-string">"pear"</span>, <span class="hljs-string">"banana"</span>);<br>Object[] array = list.toArray();<br></code></pre></td></tr></tbody></table></figure>
<h4 id="8-2-使用toArray-T-方法"><a class="header-anchor" href="#8-2-使用toArray-T-方法">¶</a>8.2 使用toArray(T[])方法</h4>
<blockquote>
<p>给<code>toArray(T[])</code>传入一个类型相同的<code>Array</code>，<code>List</code>内部自动把元素复制到传入的<code>Array</code>中：</p>
<p>该方法的泛型参数<code>&lt;T&gt;</code>并不是<code>List</code>接口定义的泛型参数<code>&lt;E&gt;</code>！</p>
<p>参数可传入实际类型及其父类：</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;Integer&gt; list = List.of(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>);<br>        Number[] arr = list.toArray(<span class="hljs-keyword">new</span> Number[<span class="hljs-number">3</span>]);<br>        Object[] arr1 = list.toArray(<span class="hljs-keyword">new</span> Object[<span class="hljs-number">3</span>]);<br><br>        <span class="hljs-keyword">for</span> (Number number : arr) {<br>            System.out.print(number + <span class="hljs-string">" "</span>);<br>        }<br>        System.out.println();<br>        <span class="hljs-keyword">for</span> (Object o : arr1) {<br>            System.out.print(o + <span class="hljs-string">" "</span>);<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>
<p>如果传入的数组不够大，那么<code>List</code>内部会创建一个新的刚好够大的数组，填充后返回；</p>
</li>
<li>
<p>如果传入的数组比<code>List</code>元素还要多，那么填充完元素后，剩下的数组元素一律填充<code>null</code>。</p>
</li>
</ul>
<h4 id="8-3-传入恰好大小的数组"><a class="header-anchor" href="#8-3-传入恰好大小的数组">¶</a>8.3 传入恰好大小的数组</h4>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;Integer&gt; list = List.of(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>);<br>Integer[] array = list.toArray(<span class="hljs-keyword">new</span> Integer[list.size()]);<br></code></pre></td></tr></tbody></table></figure>
<h4 id="8-4-使用函数式写法"><a class="header-anchor" href="#8-4-使用函数式写法">¶</a>8.4 使用函数式写法</h4>
<blockquote>
<p>更简洁的写法是通过<code>List</code>接口定义的<code>T[] toArray(IntFunction generator)</code>方法：</p>
<p>函数式写法后面会讲到：</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Integer[] array = list.toArray(Integer[]::<span class="hljs-keyword">new</span>);<br></code></pre></td></tr></tbody></table></figure>
<h3 id="9、Array转换为List"><a class="header-anchor" href="#9、Array转换为List">¶</a>9、Array转换为List</h3>
<blockquote>
<p>直接借助List.of()方法：</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">Integer[] array = { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> };<br>List&lt;Integer&gt; list = List.of(array);<br><br><span class="hljs-comment">// jdk11之前可以这样用：</span><br>List&lt;Integer&gt; list = Arrays.asList(array);<br></code></pre></td></tr></tbody></table></figure>
<blockquote>
<p>使用List.of()方法返回的是一个只读的List，无法调用add和remove等方法！</p>
<p>会抛出<code>UnsupportedOperationException</code>。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 正确：</span><br>List&lt;Integer&gt; lis = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>lis.add(<span class="hljs-number">3</span>);<br><br><span class="hljs-comment">// 抛出错误：</span><br>List&lt;Integer&gt; list = List.of(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>);<br>list.add(<span class="hljs-number">5</span>);<br></code></pre></td></tr></tbody></table></figure>
<h2 id="三、编写equals方法"><a class="header-anchor" href="#三、编写equals方法">¶</a>三、编写equals方法</h2>
<h3 id="1、contains-和-indexOf方法"><a class="header-anchor" href="#1、contains-和-indexOf方法">¶</a>1、contains 和 indexOf方法</h3>
<ul>
<li><code>List</code>还提供了<code>boolean contains(Object o)</code>方法来判断<code>List</code>是否包含某个指定元素.</li>
<li><code>int indexOf(Object o)</code>方法可以返回某个元素的索引，如果元素不存在，就返回<code>-1</code>。</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Equals</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;String&gt; list = List.of(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>);<br>        System.out.println(list.contains(<span class="hljs-string">"C"</span>)); <span class="hljs-comment">// true</span><br>        System.out.println(list.contains(<span class="hljs-string">"X"</span>)); <span class="hljs-comment">// false</span><br>        System.out.println(list.indexOf(<span class="hljs-string">"C"</span>)); <span class="hljs-comment">// 2</span><br>        System.out.println(list.indexOf(<span class="hljs-string">"X"</span>)); <span class="hljs-comment">// -1</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2、判断两个元素相等"><a class="header-anchor" href="#2、判断两个元素相等">¶</a>2、判断两个元素相等</h3>
<blockquote>
<p>传入不同的实例，仍然可以通过下面两个函数比较得到结果：</p>
<p>因为<code>List</code>内部并不是通过<code>==</code>判断两个元素是否相等，而是使用<code>equals()</code>方法判断两个元素是否相等：</p>
<p>Java标准中的引用类型定义的类已经正确实现了equals方法！</p>
<p>所以自定义的类需要手动覆写equals方法；</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(list.contains(<span class="hljs-keyword">new</span> String(<span class="hljs-string">"C"</span>))); <span class="hljs-comment">// true</span><br>System.out.println(list.indexOf(<span class="hljs-keyword">new</span> String(<span class="hljs-string">"C"</span>))); <span class="hljs-comment">// 2</span><br></code></pre></td></tr></tbody></table></figure>
<h3 id="3、编写equals方法"><a class="header-anchor" href="#3、编写equals方法">¶</a>3、编写equals方法</h3>
<h4 id="3-1-equals方法需要满足的条件"><a class="header-anchor" href="#3-1-equals方法需要满足的条件">¶</a>3.1 equals方法需要满足的条件</h4>
<ul>
<li>自反性（Reflexive）：对于非<code>null</code>的<code>x</code>来说，<code>x.equals(x)</code>必须返回<code>true</code>；</li>
<li>对称性（Symmetric）：对于非<code>null</code>的<code>x</code>和<code>y</code>来说，如果<code>x.equals(y)</code>为<code>true</code>，则<code>y.equals(x)</code>也必须为<code>true</code>；</li>
<li>传递性（Transitive）：对于非<code>null</code>的<code>x</code>、<code>y</code>和<code>z</code>来说，如果<code>x.equals(y)</code>为<code>true</code>，<code>y.equals(z)</code>也为<code>true</code>，那么<code>x.equals(z)</code>也必须为<code>true</code>；</li>
<li>一致性（Consistent）：对于非<code>null</code>的<code>x</code>和<code>y</code>来说，只要<code>x</code>和<code>y</code>状态不变，则<code>x.equals(y)</code>总是一致地返回<code>true</code>或者<code>false</code>；</li>
<li>对<code>null</code>的比较：即<code>x.equals(null)</code>永远返回<code>false</code>。</li>
</ul>
<h4 id="3-2-equals方法编写步骤"><a class="header-anchor" href="#3-2-equals方法编写步骤">¶</a>3.2 equals方法编写步骤</h4>
<ol>
<li>先确定实例“相等”的逻辑，即哪些字段相等，就认为实例相等；</li>
<li>用<code>instanceof</code>判断传入的待比较的<code>Object</code>是不是当前类型，如果是，继续比较，否则，返回<code>false</code>；</li>
<li>对引用类型用<code>Objects.equals()</code>比较，对基本类型直接用<code>==</code>比较。</li>
</ol>
<blockquote>
<p>对于引用字段比较，我们使用<code>equals()</code>，对于基本类型字段的比较，我们使用<code>==</code>。</p>
<p>使用<code>instanceof</code>来判断两个对象类型是否一致！当然参数为当前对象子类时也可以进入判断！</p>
</blockquote>
<ul>
<li>普通方法编写：</li>
</ul>
<blockquote>
<p>要判断<code>null</code>的特殊情况！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{<br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> age;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object o)</span> </span>{<br>        <span class="hljs-keyword">if</span> (o <span class="hljs-keyword">instanceof</span> Person) {<br>            Person p = (Person) o;<br>            <span class="hljs-keyword">boolean</span> nameEquals = <span class="hljs-keyword">false</span>;<br>            <span class="hljs-comment">// 都是null返回true</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.name == <span class="hljs-keyword">null</span> &amp;&amp; p.name == <span class="hljs-keyword">null</span>) {<br>                nameEquals = <span class="hljs-keyword">true</span>;<br>            }<br>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.name != <span class="hljs-keyword">null</span>) {<br>                nameEquals = <span class="hljs-keyword">this</span>.name.equals(p.name);<br>            }<br>            <span class="hljs-keyword">return</span> nameEquals &amp;&amp; <span class="hljs-keyword">this</span>.age == p.age;<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>    }<br>    <br>}<br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>借助Objects.equals()方法判断</li>
</ul>
<blockquote>
<p>使用<code>Objects.equals()</code>比较两个引用类型是否相等的目的是省去了判断<code>null</code>的麻烦。两个引用类型都是<code>null</code>时它们也是相等的。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{<br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> age;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object o)</span> </span>{<br>        <span class="hljs-keyword">if</span> (o <span class="hljs-keyword">instanceof</span> Person) {<br>            Person p = (Person) o;<br>            <span class="hljs-keyword">return</span> Objects.equals(<span class="hljs-keyword">this</span>.name, p.name) &amp;&amp; <span class="hljs-keyword">this</span>.age == p.age;<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>    }<br>    <br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="4、什么时候需要编写equals方法"><a class="header-anchor" href="#4、什么时候需要编写equals方法">¶</a>4、什么时候需要编写equals方法</h3>
<p>如果不调用<code>List</code>的<code>contains()</code>、<code>indexOf()</code>这些方法，那么放入的元素就不需要实现<code>equals()</code>方法。</p>
<p>总而言之：不需要进行元素的比较就不需要编写！</p>
<h2 id="四、使用Map"><a class="header-anchor" href="#四、使用Map">¶</a>四、使用Map</h2>
<blockquote>
<p>Map是一种键值（key-value）映射表的数据结构，作用就是能高效通过<code>key</code>快速查找<code>value</code>（元素）。</p>
<p><code>Map</code>和<code>List</code>一样也是一个接口，最常用的实现类是<code>HashMap</code>。</p>
</blockquote>
<h3 id="1、常用方法"><a class="header-anchor" href="#1、常用方法">¶</a>1、常用方法</h3>
<ul>
<li><code>V put(K key, V value)</code>：存储键值对，没有键时返回<code>null</code>，有键时返回<code>旧的value</code>，新的覆盖旧的！</li>
<li><code>V get(K key)</code>：获取键对应的值！</li>
<li><code>boolean containsKey(K key)</code>：查询键是否存在！</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        Map&lt;String, Integer&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        map.put(<span class="hljs-string">"apple"</span>, <span class="hljs-number">123</span>);<br>        map.put(<span class="hljs-string">"pear"</span>, <span class="hljs-number">456</span>);<br>        System.out.println(map.get(<span class="hljs-string">"apple"</span>)); <span class="hljs-comment">// 123</span><br>        map.put(<span class="hljs-string">"apple"</span>, <span class="hljs-number">789</span>); <span class="hljs-comment">// 再次放入apple作为key，但value变为789</span><br>        System.out.println(map.get(<span class="hljs-string">"apple"</span>)); <span class="hljs-comment">// 789</span><br>        <br>        <span class="hljs-comment">// 当然：value可重复</span><br>        Map&lt;String, Integer&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        map.put(<span class="hljs-string">"apple"</span>, <span class="hljs-number">123</span>);<br>        map.put(<span class="hljs-string">"pear"</span>, <span class="hljs-number">123</span>); <span class="hljs-comment">// ok</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2、Map遍历"><a class="header-anchor" href="#2、Map遍历">¶</a>2、Map遍历</h3>
<blockquote>
<p><code>Map</code>存储的是<code>key-value</code>的映射关系，并且，它<em>不保证顺序</em>，即遍历的顺序是不确定的！</p>
</blockquote>
<p>三种遍历如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        Map&lt;String, Integer&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        map.put(<span class="hljs-string">"niu"</span>, <span class="hljs-number">20</span>);<br>        map.put(<span class="hljs-string">"ge"</span>, <span class="hljs-number">30</span>);<br>        map.put(<span class="hljs-string">"hello"</span>, <span class="hljs-number">30</span>);<br><br>        <span class="hljs-comment">// 遍历key</span><br>        <span class="hljs-keyword">for</span>(String key : map.keySet()){<br>            System.out.println(key);<br>        }<br>        <span class="hljs-comment">// 遍历value</span><br>        <span class="hljs-keyword">for</span>(Integer value : map.values()){<br>            System.out.println(value);<br>        }<br>        <span class="hljs-comment">// 遍历key-value</span><br>        <span class="hljs-keyword">for</span>(Map.Entry&lt;String, Integer&gt; entry : map.entrySet()){<br>            System.out.println(entry.getKey() + <span class="hljs-string">" "</span> + entry.getValue());<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="3、高效查找例子"><a class="header-anchor" href="#3、高效查找例子">¶</a>3、高效查找例子</h3>
<blockquote>
<p>List来存储所有信息，Map来存储经常需要查询的信息！提高查找效率！</p>
<p>现在Map中找，找到直接返回，找不到再从List中找，找到将这组信息放入Map，并返回该信息！</p>
<p>Map永远存储最常用的信息，极大提高效率！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapWork</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;Student&gt; list = List.of(<br>                <span class="hljs-keyword">new</span> Student(<span class="hljs-string">"Bob"</span>, <span class="hljs-number">78</span>),<br>                <span class="hljs-keyword">new</span> Student(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">85</span>),<br>                <span class="hljs-keyword">new</span> Student(<span class="hljs-string">"Brush"</span>, <span class="hljs-number">66</span>),<br>                <span class="hljs-keyword">new</span> Student(<span class="hljs-string">"Newton"</span>, <span class="hljs-number">99</span>));<br>        <span class="hljs-keyword">var</span> holder = <span class="hljs-keyword">new</span> Students(list);<br>        System.out.println(holder.getScore(<span class="hljs-string">"Bob"</span>) == <span class="hljs-number">78</span> ? <span class="hljs-string">"测试成功!"</span> : <span class="hljs-string">"测试失败!"</span>);<br>        System.out.println(holder.getScore(<span class="hljs-string">"Alice"</span>) == <span class="hljs-number">85</span> ? <span class="hljs-string">"测试成功!"</span> : <span class="hljs-string">"测试失败!"</span>);<br>        System.out.println(holder.getScore(<span class="hljs-string">"Tom"</span>) == -<span class="hljs-number">1</span> ? <span class="hljs-string">"测试成功!"</span> : <span class="hljs-string">"测试失败!"</span>);<br>    }<br>}<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Students</span> </span>{<br>    List&lt;Student&gt; list;<br>    Map&lt;String, Integer&gt; cache;<br><br>    Students(List&lt;Student&gt; list) {<br>        <span class="hljs-keyword">this</span>.list = list;<br>        cache = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据name查找score，找到返回score，未找到返回-1</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">Integer <span class="hljs-title">getScore</span><span class="hljs-params">(String name)</span> </span>{<br>        <span class="hljs-comment">// 先在Map中查找:</span><br>        Integer score = <span class="hljs-keyword">this</span>.cache.get(name);<br>        <span class="hljs-keyword">if</span> (score == <span class="hljs-keyword">null</span>) {<br>            <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span></span><br>            score = findInList(name);<br>            <span class="hljs-keyword">if</span>(score != <span class="hljs-keyword">null</span>){<br>                cache.put(name, score);<br>            }<br>        }<br>        <span class="hljs-keyword">return</span> score == <span class="hljs-keyword">null</span> ? -<span class="hljs-number">1</span> : score;<br>    }<br><br>    <span class="hljs-function">Integer <span class="hljs-title">findInList</span><span class="hljs-params">(String name)</span> </span>{<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> ss : <span class="hljs-keyword">this</span>.list) {<br>            <span class="hljs-keyword">if</span> (ss.name.equals(name)) {<br>                <span class="hljs-keyword">return</span> ss.score;<br>            }<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    }<br>}<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>{<br>    String name;<br>    <span class="hljs-keyword">int</span> score;<br><br>    Student(String name, <span class="hljs-keyword">int</span> score) {<br>        <span class="hljs-keyword">this</span>.name = name;<br>        <span class="hljs-keyword">this</span>.score = score;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="五、编写hashCode和equals方法"><a class="header-anchor" href="#五、编写hashCode和equals方法">¶</a>五、编写hashCode和equals方法</h2>
<blockquote>
<p>当然是针对HashMap的，get方法查找的时候HashMap内部要进行比对，通过equals方法，编写方法同第三大节的编写equals方法，当自定义的类出现时，就需要去覆写equals方法。</p>
<p>在<code>Map</code>的内部，对<code>key</code>做比较是通过<code>equals()</code>实现的，这一点和<code>List</code>查找元素需要正确覆写<code>equals()</code>是一样的，即正确使用<code>Map</code>必须保证：作为<code>key</code>的对象必须正确覆写<code>equals()</code>方法。</p>
<p>Map内部是通过<code>hashCode()</code>方法来计算key对应的value的索引，</p>
</blockquote>
<p>正确使用<code>Map</code>必须保证：</p>
<ol>
<li>作为<code>key</code>的对象必须正确覆写<code>equals()</code>方法，相等的两个<code>key</code>实例调用<code>equals()</code>必须返回<code>true</code>；</li>
<li>作为<code>key</code>的对象还必须正确覆写<code>hashCode()</code>方法，且<code>hashCode()</code>方法要严格遵循以下规范：</li>
</ol>
<ul>
<li>如果两个对象相等，则两个对象的<code>hashCode()</code>必须相等；</li>
<li>如果两个对象不相等，则两个对象的<code>hashCode()</code>尽量不要相等。</li>
</ul>
<p>第一条规范是正确性，必须保证实现，否则<code>HashMap</code>不能正常工作。</p>
<p>而第二条如果尽量满足，则可以保证查询效率，因为不同的对象，如果返回相同的<code>hashCode()</code>，会造成<code>Map</code>内部存储冲突，使存取的效率下降。</p>
<h3 id="1、equals方法覆写"><a class="header-anchor" href="#1、equals方法覆写">¶</a>1、equals方法覆写</h3>
<p>同第三节的编写equals方法！</p>
<h3 id="2、编写hashCode方法"><a class="header-anchor" href="#2、编写hashCode方法">¶</a>2、编写hashCode方法</h3>
<blockquote>
<p>当然还是针对自定义类的覆写，标准库的类，java内部已经实现！</p>
</blockquote>
<h4 id="2-1-实现原理"><a class="header-anchor" href="#2-1-实现原理">¶</a>2.1 实现原理</h4>
<blockquote>
<p>此方法并没有处理参数为<code>null</code>的问题，要想写完整需要加上关于<code>null</code>的判断！</p>
<p>在计算<code>Person</code>的<code>hashCode()</code>时，反复使用<code>31*h</code>，这样做的目的是为了尽量把不同的<code>Person</code>实例的<code>hashCode()</code>均匀分布到整个<code>int</code>范围。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{<br>    String firstName;<br>    String lastName;<br>    <span class="hljs-keyword">int</span> age;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>{<br>        <span class="hljs-keyword">int</span> h = <span class="hljs-number">0</span>;<br>        h = <span class="hljs-number">31</span> * h + firstName.hashCode();<br>        h = <span class="hljs-number">31</span> * h + lastName.hashCode();<br>        h = <span class="hljs-number">31</span> * h + age;<br>        <span class="hljs-keyword">return</span> h;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h4 id="2-2-使用Objects-hash方法"><a class="header-anchor" href="#2-2-使用Objects-hash方法">¶</a>2.2 使用Objects.hash方法</h4>
<blockquote>
<p>直接借助<code>Objects.hash()</code>方法，自动实现<code>null</code>的处理；</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>{<br>    <span class="hljs-keyword">return</span> Objects.hash(firstName, lastName, age);<br>}<br></code></pre></td></tr></tbody></table></figure>
<h4 id="2-3-编写原则"><a class="header-anchor" href="#2-3-编写原则">¶</a>2.3 编写原则</h4>
<ul>
<li><code>equals()</code>用到的用于比较的每一个字段，都必须在<code>hashCode()</code>中用于计算；</li>
<li><code>equals()</code>中没有使用到的字段，绝不可放在<code>hashCode()</code>中计算。</li>
</ul>
<p>另外注意，对于放入<code>HashMap</code>的<code>value</code>对象，没有任何要求。</p>
<h4 id="2-4-完整示例"><a class="header-anchor" href="#2-4-完整示例">¶</a>2.4 完整示例</h4>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.Objects;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HashCode</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        Map&lt;Persons, String&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        map.put(<span class="hljs-keyword">new</span> Persons(<span class="hljs-string">"hello1"</span>, <span class="hljs-string">"world1"</span>, <span class="hljs-number">20</span>), <span class="hljs-string">"first"</span>);<br>        map.put(<span class="hljs-keyword">new</span> Persons(<span class="hljs-string">"hello2"</span>, <span class="hljs-string">"world2"</span>, <span class="hljs-number">21</span>), <span class="hljs-string">"second"</span>);<br>        map.put(<span class="hljs-keyword">new</span> Persons(<span class="hljs-string">"hello3"</span>, <span class="hljs-string">"world3"</span>, <span class="hljs-number">22</span>), <span class="hljs-string">"three"</span>);<br><br>        String str = map.get(<span class="hljs-keyword">new</span> Persons(<span class="hljs-string">"hello2"</span>, <span class="hljs-string">"world2"</span>, <span class="hljs-number">21</span>));<br>        System.out.println(str); <span class="hljs-comment">// second</span><br><br>        Persons key = <span class="hljs-keyword">new</span> Persons(<span class="hljs-string">"hello2"</span>, <span class="hljs-string">"world2"</span>, <span class="hljs-number">21</span>);<br>        <span class="hljs-keyword">int</span> index = key.hashCode() &amp; <span class="hljs-number">0xf</span>;<br>        System.out.println(index); <span class="hljs-comment">// 4</span><br>    }<br>}<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Persons</span> </span>{<br>    String firstName;<br>    String lastName;<br>    <span class="hljs-keyword">int</span> age;<br><br>    Persons(String firstName, String lastName, <span class="hljs-keyword">int</span> age){<br>        <span class="hljs-keyword">this</span>.firstName = firstName;<br>        <span class="hljs-keyword">this</span>.lastName = lastName;<br>        <span class="hljs-keyword">this</span>.age = age;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object o)</span></span>{<br>        <span class="hljs-keyword">if</span>(o <span class="hljs-keyword">instanceof</span> Persons){<br>            Persons p = (Persons) o;<br>            <span class="hljs-keyword">return</span> Objects.equals(<span class="hljs-keyword">this</span>.firstName, p.firstName) &amp;&amp; Objects.equals(<span class="hljs-keyword">this</span>.lastName, p.lastName)<br>                    &amp;&amp; <span class="hljs-keyword">this</span>.age == p.age;<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>    }<br><br>    <span class="hljs-comment">/*@Override</span><br><span class="hljs-comment">    // 普通方法：</span><br><span class="hljs-comment">    public int hashCode() {</span><br><span class="hljs-comment">        int h = 0;</span><br><span class="hljs-comment">        h = 31 * h + firstName.hashCode();</span><br><span class="hljs-comment">        h = 31 * h + lastName.hashCode();</span><br><span class="hljs-comment">        h = 31 * h + age;</span><br><span class="hljs-comment">        return h;</span><br><span class="hljs-comment">    }*/</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span></span>{<br>        <span class="hljs-keyword">return</span> Objects.hash(firstName, lastName, age);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="3、hashCode延伸"><a class="header-anchor" href="#3、hashCode延伸">¶</a>3、hashCode延伸</h3>
<blockquote>
<p><code>HashMap</code>内部使用了数组，通过计算<code>key</code>的<code>hashCode()</code>直接定位<code>value</code>所在的索引！</p>
</blockquote>
<h4 id="3-1-HashMap的数组变化"><a class="header-anchor" href="#3-1-HashMap的数组变化">¶</a>3.1 HashMap的数组变化</h4>
<p><code>HashMap</code>初始化时默认的数组大小只有16，索引为在0～15，超过范围，自动扩容为原来的二倍，即长度为16的数组扩展为长度32，相应地，需要重新确定<code>hashCode()</code>计算的索引位置。</p>
<blockquote>
<p>扩容会导致重新分布已有的<code>key-value</code>，所以，频繁扩容对<code>HashMap</code>的性能影响很大，所以在创建时就指定容量！</p>
<p>虽然指定容量是<code>10000</code>，但<code>HashMap</code>内部的数组长度总是2<sup>n</sup>，因此，实际数组长度被初始化为比<code>10000</code>大的<code>16384</code>（2<sup>14</sup>）。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">Persons key = <span class="hljs-keyword">new</span> Persons(<span class="hljs-string">"hello2"</span>, <span class="hljs-string">"world2"</span>, <span class="hljs-number">21</span>);<br><span class="hljs-comment">// 调用hashCode方法与容量做按位与获取value下标：</span><br><span class="hljs-keyword">int</span> index = key.hashCode() &amp; <span class="hljs-number">0xf</span>;<br>System.out.println(index);<br><br><span class="hljs-comment">// 在创建时指定容量：</span><br>Map&lt;String, Integer&gt; maps = <span class="hljs-keyword">new</span> HashMap&lt;&gt;(<span class="hljs-number">10000</span>);<br></code></pre></td></tr></tbody></table></figure>
<h4 id="3-2-hashCode计算得到的索引相同"><a class="header-anchor" href="#3-2-hashCode计算得到的索引相同">¶</a>3.2 hashCode计算得到的索引相同</h4>
<blockquote>
<p>若计算出的数组索引相同，并不会发生覆盖现象，只要<code>key</code>不相同，它们映射的<code>value</code>就互不干扰！</p>
<p>假设<code>"a"</code>和<code>"b"</code>这两个<code>key</code>最终计算出的索引都是5，那么，在<code>HashMap</code>的数组中，实际存储的不是一个<code>Person</code>实例，而是一个<code>List</code>，它包含两个<code>Entry</code>，一个是<code>"a"</code>的映射，一个是<code>"b"</code>的映射！</p>
<p>HashMap内部通过<code>"a"</code>找到的实际上是<code>List&gt;</code>，它还需要遍历这个<code>List</code>，并找到一个<code>Entry</code>，它的<code>key</code>字段是<code>"a"</code>，才能返回对应的<code>Person</code>实例！</p>
<p>我们把不同的<code>key</code>具有相同的<code>hashCode()</code>的情况称之为哈希冲突。在冲突的时候，一种最简单的解决办法是用<code>List</code>存储<code>hashCode()</code>相同的<code>key-value</code>。显然，如果冲突的概率越大，这个<code>List</code>就越长，<code>Map</code>的<code>get()</code>方法效率就越低，这就是为什么要尽量满足条件二：</p>
<p>如果两个对象不相等，则两个对象的hashCode()尽量不要相等。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">map.put(<span class="hljs-string">"a"</span>, <span class="hljs-keyword">new</span> Person(<span class="hljs-string">"Xiao Ming"</span>));<br>map.put(<span class="hljs-string">"b"</span>, <span class="hljs-keyword">new</span> Person(<span class="hljs-string">"Xiao Hong"</span>));<br></code></pre></td></tr></tbody></table></figure>
<h2 id="六、使用EnumMap"><a class="header-anchor" href="#六、使用EnumMap">¶</a>六、使用EnumMap</h2>
<blockquote>
<p><code>HashMap</code>是一种通过对key计算<code>hashCode()</code>，通过空间换时间的方式，直接定位到value所在的内部数组的索引，因此，查找效率非常高。</p>
<p>如果作为key的对象是<code>enum</code>类型，那么，还可以使用Java集合库提供的一种<code>EnumMap</code>，它在内部以一个非常紧凑的数组存储value，并且根据<code>enum</code>类型的key直接定位到内部数组的索引，并不需要计算<code>hashCode()</code>，不但效率最高，而且没有额外的空间浪费。</p>
<p>使用<code>EnumMap</code>的时候，我们总是用<code>Map</code>接口来引用它，因此，实际上把<code>HashMap</code>和<code>EnumMap</code>互换，在客户端看来没有任何区别。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.time.DayOfWeek;<br><span class="hljs-keyword">import</span> java.util.EnumMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EnumMapTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        <span class="hljs-comment">// 参数作用：泛型擦除，方法内部从T拿不到class</span><br>        Map&lt;DayOfWeek, String&gt; map = <span class="hljs-keyword">new</span> EnumMap&lt;&gt;(DayOfWeek.class);<br>        map.put(DayOfWeek.MONDAY, <span class="hljs-string">"星期一"</span>);<br>        map.put(DayOfWeek.TUESDAY, <span class="hljs-string">"星期二"</span>);<br>        map.put(DayOfWeek.WEDNESDAY, <span class="hljs-string">"星期三"</span>);<br>        map.put(DayOfWeek.THURSDAY, <span class="hljs-string">"星期四"</span>);<br>        map.put(DayOfWeek.FRIDAY, <span class="hljs-string">"星期五"</span>);<br>        map.put(DayOfWeek.SATURDAY, <span class="hljs-string">"星期六"</span>);<br>        map.put(DayOfWeek.SUNDAY, <span class="hljs-string">"星期日"</span>);<br>        System.out.println(map);<br>        System.out.println(map.get(DayOfWeek.MONDAY));<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        {MONDAY=星期一, TUESDAY=星期二, WEDNESDAY=星期三, THURSDAY=星期四, FRIDAY=星期五, SATURDAY=星期六, SUNDAY=星期日}</span><br><span class="hljs-comment">		星期一</span><br><span class="hljs-comment">		*/</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="七、使用TreeMap"><a class="header-anchor" href="#七、使用TreeMap">¶</a>七、使用TreeMap</h2>
<blockquote>
<p><code>HashMap</code>是一种以空间换时间的映射表，它的实现原理决定了内部的Key是无序的，即遍历<code>HashMap</code>的Key时，其顺序是不可预测的（但每个Key都会遍历一次且仅遍历一次）。</p>
<p>还有一种<code>Map</code>，它在内部会对Key进行排序，这种<code>Map</code>就是<code>SortedMap</code>。</p>
<p>注意到<code>SortedMap</code>是接口，它的实现类是<code>TreeMap</code>。</p>
</blockquote>
<h3 id="1、Map的继承关系："><a class="header-anchor" href="#1、Map的继承关系：">¶</a>1、Map的继承关系：</h3>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ascii">       ┌───┐<br>       │Map│<br>       └───┘<br>         ▲<br>    ┌────┴─────┐<br>    │          │<br>┌───────┐ ┌─────────┐<br>│HashMap│ │SortedMap│<br>└───────┘ └─────────┘<br>               ▲<br>               │<br>          ┌─────────┐<br>          │ TreeMap │<br>          └─────────┘<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2、普通排序"><a class="header-anchor" href="#2、普通排序">¶</a>2、普通排序</h3>
<blockquote>
<p>使用<code>TreeMap</code>时，放入的Key必须实现<code>Comparable</code>接口。<code>String</code>、<code>Integer</code>这些类已经实现了<code>Comparable</code>接口，因此可以直接作为Key使用。作为Value的对象则没有任何要求。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        Map&lt;String, Integer&gt; map = <span class="hljs-keyword">new</span> TreeMap&lt;&gt;();<br>        map.put(<span class="hljs-string">"orange"</span>, <span class="hljs-number">1</span>);<br>        map.put(<span class="hljs-string">"apple"</span>, <span class="hljs-number">2</span>);<br>        map.put(<span class="hljs-string">"pear"</span>, <span class="hljs-number">3</span>);<br>        <span class="hljs-keyword">for</span> (String key : map.keySet()) {<br>            System.out.println(key);<br>        }<br>        <span class="hljs-comment">// apple, orange, pear</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="3、自定义类的排序"><a class="header-anchor" href="#3、自定义类的排序">¶</a>3、自定义类的排序</h3>
<blockquote>
<p>通过<code>Comparable</code>接口实现一个自定义排序算法：</p>
<ul>
<li>String类型通过compareTo()方法比较，int通过<code>-</code>比较！</li>
<li>不需要覆写<code>equals()</code>和<code>hashCode()</code>，因为<code>TreeMap</code>不使用<code>equals()</code>和<code>hashCode()</code>。</li>
</ul>
<p>在创建TreeMap时的参数中传入排序算法：</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.TreeMap;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TreeMapTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        Map&lt;Person1, Integer&gt; map = <span class="hljs-keyword">new</span> TreeMap&lt;&gt;(<span class="hljs-keyword">new</span> Comparator&lt;Person1&gt;() {<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(Person1 o1, Person1 o2)</span> </span>{<br>                <span class="hljs-keyword">return</span> o1.name.compareTo(o2.name);<br>            }<br>        });<br><br>        map.put(<span class="hljs-keyword">new</span> Person1(<span class="hljs-string">"Tom"</span>), <span class="hljs-number">1</span>);<br>        map.put(<span class="hljs-keyword">new</span> Person1(<span class="hljs-string">"Bob"</span>), <span class="hljs-number">2</span>);<br>        map.put(<span class="hljs-keyword">new</span> Person1(<span class="hljs-string">"Lily"</span>), <span class="hljs-number">3</span>);<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> key : map.keySet()){<br>            System.out.println(key);<br>        }<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> entry : map.entrySet()){<br>            System.out.println(entry.getKey() + <span class="hljs-string">" "</span> + entry.getValue());<br>        }<br><br>        System.out.println(map.get(<span class="hljs-keyword">new</span> Person1(<span class="hljs-string">"Lily"</span>))); <span class="hljs-comment">// 3</span><br>    }<br>}<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person1</span></span>{<br>    <span class="hljs-keyword">public</span> String name;<br><br>    Person1(String name){<br>        <span class="hljs-keyword">this</span>.name = name;<br>    }<br><br>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span></span>{<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"name: "</span> + name;<br>   }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="八、使用Properties"><a class="header-anchor" href="#八、使用Properties">¶</a>八、使用Properties</h2>
<blockquote>
<p>在编写应用程序的时候，经常需要读写配置文件！</p>
<p>配置文件的特点是，它的Key-Value一般都是<code>String</code>-<code>String</code>类型的，因此我们完全可以用<code>Map</code>来表示它。</p>
<p>因为配置文件非常常用，所以Java集合库提供了一个<code>Properties</code>来表示一组“配置”。由于历史遗留原因，<code>Properties</code>内部本质上是一个<code>Hashtable</code>，但我们只需要用到<code>Properties</code>自身关于读写配置的接口。</p>
</blockquote>
<h3 id="1、读取配置文件"><a class="header-anchor" href="#1、读取配置文件">¶</a>1、读取配置文件</h3>
<blockquote>
<p>用<code>Properties</code>读取配置文件非常简单。Java默认配置文件以<code>.properties</code>为扩展名，每行以<code>key=value</code>表示，以<code>#</code>课开头的是注释。以下是一个典型的配置文件：</p>
</blockquote>
<ul>
<li>配置文件实例：</li>
</ul>
<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># setting.properties</span><br><br><span class="hljs-attr">last_open_file</span>=<span class="hljs-string">/data/hello.txt</span><br><span class="hljs-attr">auto_save_interval</span>=<span class="hljs-string">60</span><br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>读取步骤：</li>
</ul>
<p><code>Properties</code>读取配置文件，一共有三步：</p>
<ol>
<li>创建<code>Properties</code>实例；</li>
<li>调用<code>load()</code>读取文件；</li>
<li>调用<code>getProperty()</code>获取配置。（如果key不存在，将返回<code>null</code>。我们还可以提供一个默认值，这样，当key不存在的时候，就返回默认值。）</li>
</ol>
<blockquote>
<p>也可以从classpath读取<code>.properties</code>文件，因为<code>load(InputStream)</code>方法接收一个<code>InputStream</code>实例，表示一个字节流，它不一定是文件流，也可以是从jar包中读取的资源流！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 读取步骤：</span><br>String f = <span class="hljs-string">"setting.properties"</span>;<br>Properties props = <span class="hljs-keyword">new</span> Properties();<br>props.load(<span class="hljs-keyword">new</span> java.io.FileInputStream(f));<br><span class="hljs-comment">// 获取属性值：</span><br>String filepath = props.getProperty(<span class="hljs-string">"last_open_file"</span>);<br>String interval = props.getProperty(<span class="hljs-string">"auto_save_interval"</span>, <span class="hljs-string">"120"</span>);<br><br><span class="hljs-comment">// 从classpath读取配置文件：</span><br>Properties props = <span class="hljs-keyword">new</span> Properties();<br>props.load(getClass().getResourceAsStream(<span class="hljs-string">"/common/setting.properties"</span>));<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2、配置读取实例"><a class="header-anchor" href="#2、配置读取实例">¶</a>2、配置读取实例</h3>
<blockquote>
<p>从内存读取一个字节流：</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.io.ByteArrayInputStream;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PropertiesTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception</span>{<br>        String settings = <span class="hljs-string">"# test"</span> + <span class="hljs-string">"\n"</span> + <span class="hljs-string">"course=Java"</span> + <span class="hljs-string">"\n"</span> + <span class="hljs-string">"last_open_date=2019-08-07T12:35:01"</span>;<br>        ByteArrayInputStream input = <span class="hljs-keyword">new</span> ByteArrayInputStream(settings.getBytes(<span class="hljs-string">"UTF-8"</span>));<br>        Properties props = <span class="hljs-keyword">new</span> Properties();<br>        props.load(input);<br><br>        System.out.println(<span class="hljs-string">"course: "</span> + props.getProperty(<span class="hljs-string">"course"</span>));<br>        System.out.println(<span class="hljs-string">"last_open_date: "</span> + props.getProperty(<span class="hljs-string">"last_open_date"</span>));<br>        System.out.println(<span class="hljs-string">"last_open_file: "</span> + props.getProperty(<span class="hljs-string">"last_open_file"</span>));<br>        System.out.println(<span class="hljs-string">"auto_save: "</span> + props.getProperty(<span class="hljs-string">"auto_save"</span>, <span class="hljs-string">"60"</span>));<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">course: Java<br>last_open_date: 2019-08-07T12:35:01<br>last_open_file: null<br>auto_save: 60<br></code></pre></td></tr></tbody></table></figure>
<h3 id="3、多配置文件"><a class="header-anchor" href="#3、多配置文件">¶</a>3、多配置文件</h3>
<blockquote>
<p>可以反复调用<code>load()</code>读取，后读取的key-value会覆盖已读取的key-value：</p>
<p>下面的代码演示了<code>Properties</code>的一个常用用法：可以把默认配置文件放到classpath中，然后，根据机器的环境编写另一个配置文件，覆盖某些默认的配置。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">Properties props = <span class="hljs-keyword">new</span> Properties();<br>props.load(getClass().getResourceAsStream(<span class="hljs-string">"/common/setting.properties"</span>));<br>props.load(<span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-string">"C:\\conf\\setting.properties"</span>));<br></code></pre></td></tr></tbody></table></figure>
<p><code>Properties</code>设计的目的是存储<code>String</code>类型的key－value，但<code>Properties</code>实际上是从<code>Hashtable</code>派生的，它的设计实际上是有问题的，但是为了保持兼容性，现在已经没法修改了。除了<code>getProperty()</code>和<code>setProperty()</code>方法外，还有从<code>Hashtable</code>继承下来的<code>get()</code>和<code>put()</code>方法，这些方法的参数签名是<code>Object</code>，我们在使用<code>Properties</code>的时候，不要去调用这些从<code>Hashtable</code>继承下来的方法。</p>
<h3 id="4、写入配置文件"><a class="header-anchor" href="#4、写入配置文件">¶</a>4、写入配置文件</h3>
<blockquote>
<p>使用<code>setProperty()</code>方法修改<code>Properties</code>实例；</p>
<p>可以把配置写入文件，以便下次启动时获得最新配置。写入配置文件使用<code>store()</code>方法！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">Properties props2 = <span class="hljs-keyword">new</span> Properties();<br>props2.setProperty(<span class="hljs-string">"url"</span>, <span class="hljs-string">"https://niuxvdong.top/"</span>);<br>props2.setProperty(<span class="hljs-string">"language"</span>, <span class="hljs-string">"Java"</span>);<br><span class="hljs-comment">//E:\MyJavaProgram\Settings 已写入我的E盘</span><br>props2.store(<span class="hljs-keyword">new</span> FileOutputStream(<span class="hljs-string">"E:\\MyJavaProgram\\Settings\\setting.properties"</span>), <span class="hljs-string">"这是写入的properties注释"</span>);<br><br></code></pre></td></tr></tbody></table></figure>
<p>结果如下：</p>
<blockquote>
<p>第一行是“这是写入的properties注释”的Unicode编码！</p>
<p>第二行是生成的时间：</p>
<p>后面是你设置的属性！</p>
</blockquote>
<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment">#\u8FD9\u662F\u5199\u5165\u7684properties\u6CE8\u91CA</span><br><span class="hljs-comment">#Wed Apr 08 21:58:45 CST 2020</span><br><span class="hljs-attr">url</span>=<span class="hljs-string">https\://niuxvdong.top/</span><br><span class="hljs-attr">language</span>=<span class="hljs-string">Java</span><br></code></pre></td></tr></tbody></table></figure>
<h3 id="5、编码"><a class="header-anchor" href="#5、编码">¶</a>5、编码</h3>
<blockquote>
<p>早期版本的Java规定<code>.properties</code>文件编码是ASCII编码（ISO8859-1），如果涉及到中文就必须用<code>name=\u4e2d\u6587</code>来表示，非常别扭。从JDK9开始，Java的<code>.properties</code>文件可以使用UTF-8编码了。</p>
<p>不过，需要注意的是，由于<code>load(InputStream)</code>默认总是以ASCII编码读取字节流，所以会导致读到乱码。我们需要用另一个重载方法<code>load(Reader)</code>读取！</p>
<p>就可以正常读取中文。<code>InputStream</code>和<code>Reader</code>的区别是一个是字节流，一个是字符流。字符流在内存中已经以<code>char</code>类型表示了，不涉及编码问题。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">Properties props3 = <span class="hljs-keyword">new</span> Properties();<br>props3.load(<span class="hljs-keyword">new</span> FileReader(<span class="hljs-string">"E:\\MyJavaProgram\\Settings\\setting.properties"</span>, StandardCharsets.UTF_8));<br>System.out.println(props3.getProperty(<span class="hljs-string">"language"</span>)); <span class="hljs-comment">// Java</span><br>System.out.println(props3.getProperty(<span class="hljs-string">"url"</span>)); <span class="hljs-comment">// https://niuxvdong.top/</span><br></code></pre></td></tr></tbody></table></figure>
<h2 id="九、使用Set"><a class="header-anchor" href="#九、使用Set">¶</a>九、使用Set</h2>
<blockquote>
<p><code>Map</code>用于存储key-value的映射，对于充当key的对象，是不能重复的，并且，不但需要正确覆写<code>equals()</code>方法，还要正确覆写<code>hashCode()</code>方法。</p>
<p>如果我们只需要存储不重复的key，并不需要存储映射的value，那么就可以使用<code>Set</code>。</p>
<p><code>Set</code>实际上相当于只存储key、不存储value的<code>Map</code>。我们经常用<code>Set</code>用于去除重复元素。</p>
<p>因为放入<code>Set</code>的元素和<code>Map</code>的key类似，都要正确实现<code>equals()</code>和<code>hashCode()</code>方法，否则该元素无法正确地放入<code>Set</code>。</p>
</blockquote>
<h3 id="1、常用方法-2"><a class="header-anchor" href="#1、常用方法-2">¶</a>1、常用方法</h3>
<ul>
<li>将元素添加进<code>Set</code>：<code>boolean add(E e)</code></li>
<li>将元素从<code>Set</code>删除：<code>boolean remove(Object e)</code></li>
<li>判断是否包含元素：<code>boolean contains(Object e)</code></li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.HashSet;<br><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SetTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        Set&lt;String&gt; set = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();<br>        System.out.println(set.add(<span class="hljs-string">"abc"</span>)); <span class="hljs-comment">// true</span><br>        System.out.println(set.add(<span class="hljs-string">"xyz"</span>)); <span class="hljs-comment">// true</span><br>        System.out.println(set.add(<span class="hljs-string">"xyz"</span>)); <span class="hljs-comment">// false，添加失败，因为元素已存在</span><br>        System.out.println(set.contains(<span class="hljs-string">"xyz"</span>)); <span class="hljs-comment">// true，元素存在</span><br>        System.out.println(set.contains(<span class="hljs-string">"XYZ"</span>)); <span class="hljs-comment">// false，元素不存在</span><br>        System.out.println(set.remove(<span class="hljs-string">"hello"</span>)); <span class="hljs-comment">// false，删除失败，因为元素不存在</span><br>        System.out.println(set.size()); <span class="hljs-comment">// 2，一共两个元素</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2、Set实现代码简化版"><a class="header-anchor" href="#2、Set实现代码简化版">¶</a>2、Set实现代码简化版</h3>
<blockquote>
<p>最常用的<code>Set</code>实现类是<code>HashSet</code>，实际上，<code>HashSet</code>仅仅是对<code>HashMap</code>的一个简单封装，它的核心代码如下：</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HashSet</span>&lt;<span class="hljs-title">E</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">Set</span>&lt;<span class="hljs-title">E</span>&gt; </span>{<br>    <span class="hljs-comment">// 持有一个HashMap:</span><br>    <span class="hljs-keyword">private</span> HashMap&lt;E, Object&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br><br>    <span class="hljs-comment">// 放入HashMap的value:</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Object PRESENT = <span class="hljs-keyword">new</span> Object();<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(E e)</span> </span>{<br>        <span class="hljs-comment">// 放入成功会返回null，失败返回旧value</span><br>        <span class="hljs-keyword">return</span> map.put(e, PRESENT) == <span class="hljs-keyword">null</span>;<br>    }<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">contains</span><span class="hljs-params">(Object o)</span> </span>{<br>        <span class="hljs-keyword">return</span> map.containsKey(o);<br>    }<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">remove</span><span class="hljs-params">(Object o)</span> </span>{<br>        <span class="hljs-comment">// 删除成功返回value,失败返回null</span><br>        <span class="hljs-keyword">return</span> map.remove(o) == PRESENT;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="3、两种Set实现类"><a class="header-anchor" href="#3、两种Set实现类">¶</a>3、两种Set实现类</h3>
<ul>
<li><code>HashSet</code>是无序的，因为它实现了<code>Set</code>接口，并没有实现<code>SortedSet</code>接口；</li>
<li><code>TreeSet</code>是有序的，因为它实现了<code>SortedSet</code>接口。</li>
</ul>
<p>继承关系如下：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ascii">       ┌───┐<br>       │Set│<br>       └───┘<br>         ▲<br>    ┌────┴─────┐<br>    │          │<br>┌───────┐ ┌─────────┐<br>│HashSet│ │SortedSet│<br>└───────┘ └─────────┘<br>               ▲<br>               │<br>          ┌─────────┐<br>          │ TreeSet │<br>          └─────────┘<br></code></pre></td></tr></tbody></table></figure>
<h4 id="3-1-HashSet"><a class="header-anchor" href="#3-1-HashSet">¶</a>3.1 HashSet</h4>
<blockquote>
<p>是无序的，类似HashMap！</p>
<p>自定义类同样需要实现<code>equals()</code> 和 <code>hashCode()</code>方法！</p>
</blockquote>
<h4 id="3-2-TreeSet"><a class="header-anchor" href="#3-2-TreeSet">¶</a>3.2 TreeSet</h4>
<blockquote>
<p>实现了<code>SortedSet</code>接口！</p>
<p>自定义类必须正确实现<code>Comparable</code>接口！</p>
<p>TreeSet不需要覆写<code>equals()</code>和<code>hashCode()</code>方法：</p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zhidao.baidu.com/question/181297973472160204.html">关于TreeSet不需要覆写两个方法！</a></p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.Set;<br><span class="hljs-keyword">import</span> java.util.TreeSet;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TreeSetTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        Set&lt;Person2&gt; set = <span class="hljs-keyword">new</span> TreeSet&lt;&gt;(<span class="hljs-keyword">new</span> Comparator&lt;Person2&gt;() {<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(Person2 o1, Person2 o2)</span> </span>{<br>                <span class="hljs-keyword">if</span>(o1.age != o2.age) <span class="hljs-keyword">return</span> o1.age - o2.age;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> o1.name.compareTo(o2.name);<br>            }<br>        });<br><br>        set.add(<span class="hljs-keyword">new</span> Person2(<span class="hljs-string">"hello"</span>, <span class="hljs-number">25</span>));<br>        set.add(<span class="hljs-keyword">new</span> Person2(<span class="hljs-string">"world"</span>, <span class="hljs-number">25</span>));<br>        set.add(<span class="hljs-keyword">new</span> Person2(<span class="hljs-string">"abc"</span>, <span class="hljs-number">30</span>));<br>        set.add(<span class="hljs-keyword">new</span> Person2(<span class="hljs-string">"abc"</span>, <span class="hljs-number">30</span>));<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> p : set){<br>            System.out.println(p.toString());<br>        }<br>    }<br>}<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person2</span></span>{<br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> age;<br><br>    Person2(String name, <span class="hljs-keyword">int</span> age){<br>        <span class="hljs-keyword">this</span>.age = age;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span></span>{<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.name + <span class="hljs-string">" "</span> + <span class="hljs-keyword">this</span>.age;<br>    }<br><br>    <span class="hljs-comment">/* 不需要覆写：</span><br><span class="hljs-comment">    @Override</span><br><span class="hljs-comment">    public boolean equals(Object o){</span><br><span class="hljs-comment">        if(o instanceof Person2){</span><br><span class="hljs-comment">            Person2 p = (Person2) o;</span><br><span class="hljs-comment">            return Objects.equals(this.name, p.name) &amp;&amp; this.age == p.age;</span><br><span class="hljs-comment">        }</span><br><span class="hljs-comment">        return false;</span><br><span class="hljs-comment">    }</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    @Override</span><br><span class="hljs-comment">    public int hashCode(){</span><br><span class="hljs-comment">        return Objects.hash(name, age);</span><br><span class="hljs-comment">    }*/</span><br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="4、一个去重例子"><a class="header-anchor" href="#4、一个去重例子">¶</a>4、一个去重例子</h3>
<blockquote>
<p>在聊天软件中，发送方发送消息时，遇到网络超时后就会自动重发，因此，接收方可能会收到重复的消息，在显示给用户看的时候，需要首先去重，使用Set去重！</p>
<p>注释中的两种方法：</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TreeSetTest02</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span></span>{<br>        List&lt;Message&gt; received = List.of(<br>                <span class="hljs-keyword">new</span> Message(<span class="hljs-number">1</span>, <span class="hljs-string">"Hello!"</span>),<br>                <span class="hljs-keyword">new</span> Message(<span class="hljs-number">2</span>, <span class="hljs-string">"发工资了吗？"</span>),<br>                <span class="hljs-keyword">new</span> Message(<span class="hljs-number">2</span>, <span class="hljs-string">"发工资了吗？"</span>),<br>                <span class="hljs-keyword">new</span> Message(<span class="hljs-number">3</span>, <span class="hljs-string">"去哪吃饭？"</span>),<br>                <span class="hljs-keyword">new</span> Message(<span class="hljs-number">3</span>, <span class="hljs-string">"去哪吃饭？"</span>),<br>                <span class="hljs-keyword">new</span> Message(<span class="hljs-number">4</span>, <span class="hljs-string">"Bye"</span>)<br>        );<br>        List&lt;Message&gt; displayMessages = process(received);<br>        <span class="hljs-keyword">for</span> (Message message : displayMessages) {<br>            System.out.println(message.text);<br>        }<br>    }<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> List&lt;Message&gt; <span class="hljs-title">process</span><span class="hljs-params">(List&lt;Message&gt; received)</span> </span>{<br>        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> 按sequence去除重复消息</span><br>        <br>        <span class="hljs-comment">// 方法一：通过覆写equals和hashCode方法，来使用Set去重</span><br>		<span class="hljs-comment">/*Set&lt;Message&gt; set = new HashSet&lt;&gt;();</span><br><span class="hljs-comment">        List&lt;Message&gt; ls = new ArrayList&lt;&gt;();</span><br><span class="hljs-comment">        for(var list : received) {</span><br><span class="hljs-comment">            if (set.add(list)) ls.add(list);</span><br><span class="hljs-comment">        }</span><br><span class="hljs-comment">        return ls;*/</span><br><br>        <span class="hljs-comment">// 方法二：使用TreeSet进行去重，不需要覆写那两个方法：当然必须实现一个Comparator方法</span><br>        Set&lt;Message&gt; set = <span class="hljs-keyword">new</span> TreeSet&lt;&gt;(<span class="hljs-keyword">new</span> Comparator&lt;Message&gt;() {<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(Message o1, Message o2)</span> </span>{<br>                <span class="hljs-comment">// 这里随便，按照sequence从小到大排</span><br>                <span class="hljs-keyword">return</span> o1.sequence - o2.sequence;<br>            }<br>        });<br><br>		<span class="hljs-comment">// 将原List放入TreeSet自动实现去重</span><br>        set.addAll(received);<br>        <span class="hljs-comment">// 返回一个由Set构造的List</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ArrayList&lt;Message&gt;(set);<br>    }<br>}<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Message</span> </span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> sequence;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> String text;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Message</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sequence, String text)</span> </span>{<br>        <span class="hljs-keyword">this</span>.sequence = sequence;<br>        <span class="hljs-keyword">this</span>.text = text;<br>    }<br>    <span class="hljs-comment">/* 方法一的覆写：</span><br><span class="hljs-comment">    @Override</span><br><span class="hljs-comment">    public boolean equals(Object o){</span><br><span class="hljs-comment">        if(o instanceof Message){</span><br><span class="hljs-comment">            Message m = (Message) o;</span><br><span class="hljs-comment">            return Objects.equals(this.text, m.text) &amp;&amp; this.sequence == m.sequence;</span><br><span class="hljs-comment">        }</span><br><span class="hljs-comment">        return false;</span><br><span class="hljs-comment">    }</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    @Override</span><br><span class="hljs-comment">    public int hashCode(){</span><br><span class="hljs-comment">        return Objects.hash(sequence, text);</span><br><span class="hljs-comment">    }*/</span><br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="十、使用Queue"><a class="header-anchor" href="#十、使用Queue">¶</a>十、使用Queue</h2>
<blockquote>
<p>队列（<code>Queue</code>）是一种经常使用的集合。<code>Queue</code>实际上是实现了一个先进先出（FIFO：First In First Out）的有序表。它和<code>List</code>的区别在于，<code>List</code>可以在任意位置添加和删除元素，而<code>Queue</code>只有两个操作：</p>
</blockquote>
<ul>
<li>把元素添加到队列末尾；</li>
<li>从队列头部取出元素。</li>
</ul>
<h3 id="1、常用方法-3"><a class="header-anchor" href="#1、常用方法-3">¶</a>1、常用方法</h3>
<ul>
<li><code>int size()</code>：获取队列长度；</li>
<li><code>boolean add(E)</code>/<code>boolean offer(E)</code>：添加元素到队尾；</li>
<li><code>E remove()</code>/<code>E poll()</code>：获取队首元素并从队列中删除；</li>
<li><code>E element()</code>/<code>E peek()</code>：获取队首元素但并不从队列中删除。</li>
</ul>
<p>关于上面方法的区别：</p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left">THROW EXCEPTION</th>
<th>返回false或null</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">添加元素到队尾</td>
<td style="text-align:left">add(E e)</td>
<td>boolean offer(E e)</td>
</tr>
<tr>
<td style="text-align:left">取队首元素并删除</td>
<td style="text-align:left">E remove()</td>
<td>E poll()</td>
</tr>
<tr>
<td style="text-align:left">取队首元素但不删除</td>
<td style="text-align:left">E element()</td>
<td>E peek()</td>
</tr>
</tbody>
</table>
<ul>
<li>add方法超过队列容量会抛出异常，offer方法超过队列容量会返回false；</li>
<li>remove方法删除空队列会抛出异常，poll方法删除空队列会返回null;</li>
<li>…</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><span class="hljs-keyword">import</span> java.util.Queue;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QueueTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        Queue&lt;String&gt; queue = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();<br><br>        System.out.println(queue.peek()); <span class="hljs-comment">// null</span><br>        <span class="hljs-comment">//System.out.println(queue.element()); // throws NoSuchElementException</span><br>        System.out.println(queue.poll()); <span class="hljs-comment">// null</span><br>        <span class="hljs-comment">//System.out.println(queue.remove()); // throws NoSuchElementException</span><br><br>        queue.offer(<span class="hljs-string">"hello"</span>);<br>        queue.offer(<span class="hljs-string">"world"</span>);<br>        queue.add(<span class="hljs-string">"add"</span>);<br><br>        System.out.println(queue.size()); <span class="hljs-comment">// 3</span><br>        <span class="hljs-comment">// 获取队首并删除</span><br>        System.out.println(queue.remove()); <span class="hljs-comment">// hello</span><br>        System.out.println(queue.poll()); <span class="hljs-comment">// world</span><br>        <span class="hljs-comment">// 获取队首不删除</span><br>        System.out.println(queue.element()); <span class="hljs-comment">// add</span><br>        System.out.println(queue.peek()); <span class="hljs-comment">// add</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2、注意点"><a class="header-anchor" href="#2、注意点">¶</a>2、注意点</h3>
<ul>
<li>
<p>注意：不要把<code>null</code>添加到队列中，否则<code>poll()</code>方法返回<code>null</code>时，很难确定是取到了<code>null</code>元素还是队列为空。</p>
</li>
<li>
<p><code>LinkedList</code>即实现了<code>List</code>接口，又实现了<code>Queue</code>接口，但是，在使用的时候，如果我们把它当作List，就获取List的引用，如果我们把它当作Queue，就获取Queue的引用：</p>
</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 这是一个List:</span><br>List&lt;String&gt; list = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();<br><span class="hljs-comment">// 这是一个Queue:</span><br>Queue&lt;String&gt; queue = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();<br></code></pre></td></tr></tbody></table></figure>
<h2 id="十一、使用PriorityQueue"><a class="header-anchor" href="#十一、使用PriorityQueue">¶</a>十一、使用PriorityQueue</h2>
<blockquote>
<p>用来实现“VIP插队”的业务！</p>
<p><code>PriorityQueue</code>和<code>Queue</code>的区别在于，它的出队顺序与元素的优先级有关，对<code>PriorityQueue</code>调用<code>remove()</code>或<code>poll()</code>方法，返回的总是优先级最高的元素。</p>
</blockquote>
<h3 id="1、标准类的优先队列"><a class="header-anchor" href="#1、标准类的优先队列">¶</a>1、标准类的优先队列</h3>
<blockquote>
<p>所谓不需要实现Comparable接口，因为Java已经实现了这些标准类了！</p>
<p>String当然是按照字母顺序来排列的！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.PriorityQueue;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PriorityQueueTest01</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        PriorityQueue&lt;String&gt; pq = <span class="hljs-keyword">new</span> PriorityQueue&lt;&gt;();<br>        pq.offer(<span class="hljs-string">"hello"</span>);<br>        pq.offer(<span class="hljs-string">"world"</span>);<br>        pq.offer(<span class="hljs-string">"ababa"</span>);<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> s : pq){<br>            System.out.println(s);<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2、自定义类的优先队列"><a class="header-anchor" href="#2、自定义类的优先队列">¶</a>2、自定义类的优先队列</h3>
<blockquote>
<p>和TreeSet一样，实现一个Comparator对象即可！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.PriorityQueue;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PriorityQueueTest02</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        PriorityQueue&lt;User&gt;  pq = <span class="hljs-keyword">new</span> PriorityQueue&lt;User&gt;(<span class="hljs-keyword">new</span> Comparator&lt;User&gt;() {<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(User o1, User o2)</span> </span>{<br>                <span class="hljs-keyword">if</span>(o1.age == o2.age){<br>                    <span class="hljs-keyword">return</span> o1.name .compareTo(o2.name);<br>                }<br>                <span class="hljs-keyword">return</span> o1.age - o2.age;<br>            }<br>        });<br><br>        pq.offer(<span class="hljs-keyword">new</span> User(<span class="hljs-string">"hello"</span>, <span class="hljs-number">25</span>));<br>        pq.offer(<span class="hljs-keyword">new</span> User(<span class="hljs-string">"world"</span>, <span class="hljs-number">10</span>));<br>        pq.offer(<span class="hljs-keyword">new</span> User(<span class="hljs-string">"abcde"</span>, <span class="hljs-number">25</span>));<br>        pq.offer(<span class="hljs-keyword">new</span> User(<span class="hljs-string">"cfgeg"</span>, <span class="hljs-number">30</span>));<br><br>        <span class="hljs-keyword">while</span> (!pq.isEmpty()){<br>            System.out.println(pq.poll());<br>        }<br><br>    }<br>}<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span></span>{<br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> age;<br><br>    User(String name, <span class="hljs-keyword">int</span> age) {<br>        <span class="hljs-keyword">this</span>.name = name;<br>        <span class="hljs-keyword">this</span>.age = age;<br>    }<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span></span>{<br>        <span class="hljs-keyword">return</span> name + <span class="hljs-string">" "</span> + age;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>也可以这样写</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.PriorityQueue;<br><span class="hljs-keyword">import</span> java.util.Queue;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PriorityQueueTest03</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        Queue&lt;Users&gt; pq = <span class="hljs-keyword">new</span> PriorityQueue&lt;Users&gt;(<span class="hljs-keyword">new</span> UsersComparator());<br><br>        pq.offer(<span class="hljs-keyword">new</span> Users(<span class="hljs-string">"hello"</span>, <span class="hljs-number">25</span>));<br>        pq.offer(<span class="hljs-keyword">new</span> Users(<span class="hljs-string">"world"</span>, <span class="hljs-number">10</span>));<br>        pq.offer(<span class="hljs-keyword">new</span> Users(<span class="hljs-string">"abcde"</span>, <span class="hljs-number">25</span>));<br>        pq.offer(<span class="hljs-keyword">new</span> Users(<span class="hljs-string">"cfgeg"</span>, <span class="hljs-number">30</span>));<br><br>        <span class="hljs-keyword">while</span> (!pq.isEmpty()){<br>            System.out.println(pq.poll());<br>        }<br>    }<br>}<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsersComparator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Comparator</span>&lt;<span class="hljs-title">Users</span>&gt; </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(Users o1, Users o2)</span> </span>{<br>        <span class="hljs-keyword">if</span>(o1.age == o2.age){<br>            <span class="hljs-keyword">return</span> o1.name .compareTo(o2.name);<br>        }<br>        <span class="hljs-keyword">return</span> o1.age - o2.age;<br>    }<br>}<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Users</span></span>{<br>    <span class="hljs-keyword">public</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> age;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Users</span><span class="hljs-params">(String name, <span class="hljs-keyword">int</span> age)</span> </span>{<br>        <span class="hljs-keyword">this</span>.name = name;<br>        <span class="hljs-keyword">this</span>.age = age;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span></span>{<br>        <span class="hljs-keyword">return</span> name + <span class="hljs-string">" "</span> + age;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="十二、使用Deque"><a class="header-anchor" href="#十二、使用Deque">¶</a>十二、使用Deque</h2>
<blockquote>
<p><code>Deque</code>是一个接口，它的实现类有<code>ArrayDeque</code>和<code>LinkedList</code>。</p>
<p><code>LinkedList</code>真是一个全能选手，它即是<code>List</code>，又是<code>Queue</code>，还是<code>Deque</code>的接口！</p>
<p>两头都进，两头都出，这种队列叫双端队列（Double Ended Queue），学名<code>Deque</code>。</p>
</blockquote>
<h3 id="1、常用方法-4"><a class="header-anchor" href="#1、常用方法-4">¶</a>1、常用方法</h3>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left">queue</th>
<th>Deque</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">添加元素到队尾</td>
<td style="text-align:left">add(E e) / offer(E e)</td>
<td>addLast(E e) / offerLast(E e)</td>
</tr>
<tr>
<td style="text-align:left">取队首元素并删除</td>
<td style="text-align:left">E remove() / E poll()</td>
<td>E removeFirst() / E pollFirst()</td>
</tr>
<tr>
<td style="text-align:left">取队首元素但不删除</td>
<td style="text-align:left">E element() / E peek()</td>
<td>E getFirst() / E peekFirst()</td>
</tr>
<tr>
<td style="text-align:left">添加元素到队首</td>
<td style="text-align:left">无</td>
<td>addFirst(E e) / offerFirst(E e)</td>
</tr>
<tr>
<td style="text-align:left">取队尾元素并删除</td>
<td style="text-align:left">无</td>
<td>E removeLast() / E pollLast()</td>
</tr>
<tr>
<td style="text-align:left">取队尾元素但不删除</td>
<td style="text-align:left">无</td>
<td>E getLast() / E peekLast()</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.Deque;<br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DequeTest01</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        Deque&lt;String&gt; deque = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();<br>        deque.offerLast(<span class="hljs-string">"A"</span>); <span class="hljs-comment">// A</span><br>        deque.offerLast(<span class="hljs-string">"B"</span>); <span class="hljs-comment">// B -&gt; A</span><br>        deque.offerFirst(<span class="hljs-string">"C"</span>); <span class="hljs-comment">// B -&gt; A -&gt; C</span><br>        System.out.println(deque.pollFirst()); <span class="hljs-comment">// C, 剩下B -&gt; A</span><br>        System.out.println(deque.pollLast()); <span class="hljs-comment">// B</span><br>        System.out.println(deque.pollFirst()); <span class="hljs-comment">// A</span><br>        System.out.println(deque.pollFirst()); <span class="hljs-comment">// null</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2、一些建议"><a class="header-anchor" href="#2、一些建议">¶</a>2、一些建议</h3>
<ul>
<li><code>Deque</code>接口实际上扩展自<code>Queue</code>！<code>Queue</code>提供的<code>add()</code>/<code>offer()</code>方法在<code>Deque</code>中也可以使用，但是，使用<code>Deque</code>，最好不要调用<code>offer()</code>，而是调用<code>offerLast()</code>：</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Deque</span>&lt;<span class="hljs-title">E</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">Queue</span>&lt;<span class="hljs-title">E</span>&gt; </span>{<br>    ...<br>}<br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>不要使用接口去实例化</li>
</ul>
<blockquote>
<p>尽量持有接口，而不是具体的实现类。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 不推荐的写法:</span><br>LinkedList&lt;String&gt; d1 = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();<br>d1.offerLast(<span class="hljs-string">"z"</span>);<br><span class="hljs-comment">// 推荐的写法：</span><br>Deque&lt;String&gt; d2 = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();<br>d2.offerLast(<span class="hljs-string">"z"</span>);<br></code></pre></td></tr></tbody></table></figure>
<h2 id="十三、使用Stack"><a class="header-anchor" href="#十三、使用Stack">¶</a>十三、使用Stack</h2>
<blockquote>
<p>栈（Stack）是一种后进先出（LIFO：Last In First Out）的数据结构。</p>
</blockquote>
<p><code>Stack</code>只有入栈和出栈的操作：</p>
<ul>
<li>把元素压栈：<code>push(E)</code>；</li>
<li>把栈顶的元素“弹出”：<code>pop(E)</code>；</li>
<li>取栈顶元素但不弹出：<code>peek(E)</code>。</li>
</ul>
<p>在Java中，我们用<code>Deque</code>可以实现<code>Stack</code>的功能：</p>
<ul>
<li>把元素压栈：<code>push(E)</code>/<code>addFirst(E)</code>；</li>
<li>把栈顶的元素“弹出”：<code>pop(E)</code>/<code>removeFirst()</code>；</li>
<li>取栈顶元素但不弹出：<code>peek(E)</code>/<code>peekFirst()</code>。</li>
</ul>
<blockquote>
<p>Java的集合类没有单独的<code>Stack</code>接口呢？因为有个遗留类名字就叫<code>Stack</code>，出于兼容性考虑，所以没办法创建<code>Stack</code>接口，只能用<code>Deque</code>接口来“模拟”一个<code>Stack</code>了。</p>
<p>当我们把<code>Deque</code>作为<code>Stack</code>使用时，注意只调用<code>push()</code>/<code>pop()</code>/<code>peek()</code>方法，不要调用<code>addFirst()</code>/<code>removeFirst()</code>/<code>peekFirst()</code>方法，这样代码更加清晰。</p>
<p>不要使用遗留类<code>Stack</code>。使用Deque来实现Stack即可！</p>
</blockquote>
<h3 id="1、一个例子"><a class="header-anchor" href="#1、一个例子">¶</a>1、一个例子</h3>
<blockquote>
<p>使用Stack实现十进制转化为十六进制：</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.Deque;<br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StackTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        String hex = toHex(<span class="hljs-number">12500</span>);<br>        <span class="hljs-keyword">if</span> (hex.equalsIgnoreCase(<span class="hljs-string">"30D4"</span>)) {<br>            System.out.println(<span class="hljs-string">"测试通过"</span>);<br>        } <span class="hljs-keyword">else</span> {<br>            System.out.println(<span class="hljs-string">"测试失败"</span>);<br>        }<br>    }<br><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> String <span class="hljs-title">toHex</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>{<br>        Deque&lt;String&gt; stack = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();<br><br>        String[] str = {<span class="hljs-string">"0"</span>,<span class="hljs-string">"1"</span>,<span class="hljs-string">"2"</span>,<span class="hljs-string">"3"</span>,<span class="hljs-string">"4"</span>,<span class="hljs-string">"5"</span>,<span class="hljs-string">"6"</span>,<span class="hljs-string">"7"</span>,<span class="hljs-string">"8"</span>,<span class="hljs-string">"9"</span>,<span class="hljs-string">"A"</span>,<span class="hljs-string">"B"</span>,<span class="hljs-string">"C"</span>,<span class="hljs-string">"D"</span>,<span class="hljs-string">"E"</span>,<span class="hljs-string">"F"</span>};<br><br>        <span class="hljs-keyword">while</span>(n != <span class="hljs-number">0</span>){<br>            <span class="hljs-keyword">int</span> t = n % <span class="hljs-number">16</span>; n /= <span class="hljs-number">16</span>;<br>            stack.push(str[t]);<br>        }<br>        <br>        StringBuilder s = <span class="hljs-keyword">new</span> StringBuilder();<br>        <span class="hljs-keyword">while</span>(!stack.isEmpty()) {<br>            s.append(stack.pop());<br>        }<br>        <span class="hljs-keyword">return</span> s.toString();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="十四、使用Iterator"><a class="header-anchor" href="#十四、使用Iterator">¶</a>十四、使用Iterator</h2>
<h3 id="1、for-each遍历的实现"><a class="header-anchor" href="#1、for-each遍历的实现">¶</a>1、<code>for each</code>遍历的实现</h3>
<blockquote>
<p>Java编译器并不知道如何遍历<code>List</code>。上述代码能够编译通过，只是因为编译器把<code>for each</code>循环通过<code>Iterator</code>改写为了普通的<code>for</code>循环：</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; list = List.of(<span class="hljs-string">"Apple"</span>, <span class="hljs-string">"Orange"</span>, <span class="hljs-string">"Pear"</span>);<br><span class="hljs-keyword">for</span> (String s : list) {<br>    System.out.println(s);<br>}<br><br><span class="hljs-comment">// 编译器编译为如下：</span><br><span class="hljs-keyword">for</span> (Iterator&lt;String&gt; it = list.iterator(); it.hasNext(); ) {<br>     String s = it.next();<br>     System.out.println(s);<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2、迭代器"><a class="header-anchor" href="#2、迭代器">¶</a>2、迭代器</h3>
<blockquote>
<p>我们把这种通过<code>Iterator</code>对象遍历集合的模式称为迭代器。</p>
<p>使用迭代器的好处在于，调用方总是以统一的方式遍历各种集合类型，而不必关系它们内部的存储结构。</p>
<p>这样一来，调用方就必须知道集合的内部存储结构。并且，如果把<code>ArrayList</code>换成<code>LinkedList</code>，<code>get(int)</code>方法耗时会随着index的增加而增加。如果把<code>ArrayList</code>换成<code>Set</code>，上述代码就无法编译，因为<code>Set</code>内部没有索引。</p>
<p>用<code>Iterator</code>遍历就没有上述问题，因为<code>Iterator</code>对象是集合对象自己在内部创建的，它自己知道如何高效遍历内部的数据集合，调用方则获得了统一的代码，编译器才能把标准的<code>for each</code>循环自动转换为<code>Iterator</code>遍历。</p>
</blockquote>
<h3 id="3、编写Iterator"><a class="header-anchor" href="#3、编写Iterator">¶</a>3、编写Iterator</h3>
<p>我们自己编写了一个集合类，想要使用<code>for each</code>循环，只需满足以下条件：</p>
<ul>
<li>集合类实现<code>Iterable</code>接口，该接口要求返回一个<code>Iterator</code>对象；</li>
<li>用<code>Iterator</code>对象迭代集合内部数据。</li>
</ul>
<p>这里的关键在于，集合类通过调用<code>iterator()</code>方法，返回一个<code>Iterator</code>对象，这个对象必须自己知道如何遍历该集合。</p>
<blockquote>
<p>一个例子：实现List逆序的迭代器！</p>
<p>稍有点复杂，要记得多看多练多查资料！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IteratorTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        ReverseList&lt;String&gt; rlist = <span class="hljs-keyword">new</span> ReverseList&lt;&gt;();<br>        rlist.add(<span class="hljs-string">"Apple"</span>);<br>        rlist.add(<span class="hljs-string">"Orange"</span>);<br>        rlist.add(<span class="hljs-string">"Pear"</span>);<br>        <span class="hljs-keyword">for</span> (String s : rlist) {<br>            System.out.println(s);<br>        }<br>    }<br>}<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReverseList</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">Iterable</span>&lt;<span class="hljs-title">T</span>&gt; </span>{<br>	<span class="hljs-comment">// 内部使用List存储</span><br>    <span class="hljs-keyword">private</span> List&lt;T&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(T t)</span> </span>{<br>        list.add(t);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-comment">// 覆写Iterator方法：</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Iterator&lt;T&gt; <span class="hljs-title">iterator</span><span class="hljs-params">()</span> </span>{<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ReverseIterator(list.size());<br>    }<br>	<br>    <span class="hljs-comment">// 实现迭代器：内部类：</span><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReverseIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Iterator</span>&lt;<span class="hljs-title">T</span>&gt; </span>{<br>        <span class="hljs-keyword">int</span> index;<br>		<br>        <span class="hljs-comment">// 内部类构造方法：</span><br>        ReverseIterator(<span class="hljs-keyword">int</span> index) {<br>            <span class="hljs-keyword">this</span>.index = index;<br>        }<br><br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-comment">// 覆写hasNext</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">hasNext</span><span class="hljs-params">()</span> </span>{<br>            <span class="hljs-keyword">return</span> index &gt; <span class="hljs-number">0</span>;<br>        }<br><br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-comment">// 覆写next</span><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">next</span><span class="hljs-params">()</span> </span>{<br>            index--;<br>            <span class="hljs-comment">// 从index输出，即从后向前，访问外部类ReverseList的list的get方法来获取元素：</span><br>            <span class="hljs-keyword">return</span> ReverseList.<span class="hljs-keyword">this</span>.list.get(index);<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="十五、使用Collections"><a class="header-anchor" href="#十五、使用Collections">¶</a>十五、使用Collections</h2>
<blockquote>
<p><code>Collection</code>，它是除<code>Map</code>外所有其他集合类的根接口，来自于<code>java.util</code>包！</p>
<p><code>Collections</code>是JDK提供的工具类，同样位于<code>java.util</code>包中。它提供了一系列静态方法，能更方便地操作各种集合。</p>
<p>注意Collections结尾多了一个s，不是Collection！</p>
</blockquote>
<h3 id="1、addAll方法"><a class="header-anchor" href="#1、addAll方法">¶</a>1、addAll方法</h3>
<blockquote>
<p>方法可以给一个<code>Collection</code>类型的集合添加若干元素。因为方法签名是<code>Collection</code>，所以我们可以传入<code>List</code>，<code>Set</code>等各种集合类型。</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">addAll</span><span class="hljs-params">(Collection&lt;? <span class="hljs-keyword">super</span> T&gt; c, T... elements)</span> </span>{ ... }<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CollectionsTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;String&gt; list2 = List.of(<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>, <span class="hljs-string">"hello"</span>);<br>        <span class="hljs-comment">// 1. 分开写</span><br>        <span class="hljs-comment">/*Set&lt;String&gt; set = new HashSet&lt;&gt;();</span><br><span class="hljs-comment">        set.addAll(list2);*/</span><br>        <span class="hljs-comment">// 2.直接可以合并</span><br>        Set&lt;String&gt; set1 = <span class="hljs-keyword">new</span> HashSet&lt;&gt;(list2);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> s : set1){<br>            System.out.println(s);<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="2、创建空集合"><a class="header-anchor" href="#2、创建空集合">¶</a>2、创建空集合</h3>
<ul>
<li>创建空List：<code>List emptyList()</code></li>
<li>创建空Map：<code>Map emptyMap()</code></li>
<li>创建空Set：<code>Set emptySet()</code></li>
</ul>
<blockquote>
<p>要注意到返回的空集合是不可变集合，无法向其中添加或删除元素。</p>
<p>其他类还可以用<code>类.of()</code>方法来创建空集合！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CollectionsTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;String&gt; list = Collections.emptyList();<br>        List&lt;String&gt; list1 = List.of();<br>        list.add(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// throws UnsupportedOperationException</span><br>        list1.add(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// throws UnsupportedOperationException</span><br>        Map&lt;String, Integer&gt; map = Collections.emptyMap();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="3、创建单元素集合"><a class="header-anchor" href="#3、创建单元素集合">¶</a>3、创建单元素集合</h3>
<ul>
<li>创建一个元素的List：<code>List singletonList(T o)</code></li>
<li>创建一个元素的Map：<code>Map singletonMap(K key, V value)</code></li>
<li>创建一个元素的Set：<code>Set singleton(T o)</code></li>
</ul>
<blockquote>
<p>要注意到返回的单元素集合也是不可变集合，无法向其中添加或删除元素。</p>
<p>也可以用各个集合接口提供的<code>of(T...)</code>方法创建单元素集合</p>
<p>使用<code>of()</code>方法创建的都是不变集合，无法进行增删！</p>
<p>使用<code>of()</code>方法可以实现任意大小的不变集合，比Collections更加方便！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; list5 = List.of(<span class="hljs-string">"apple"</span>);<br>List&lt;String&gt; list6 = Collections.singletonList(<span class="hljs-string">"apple"</span>);<br>list5.add(<span class="hljs-string">"hhh"</span>); <span class="hljs-comment">// UnsupportedOperationException</span><br><br>List&lt;String&gt; list7 = List.of(); <span class="hljs-comment">// empty list</span><br> List&lt;String&gt; list8 = List.of(<span class="hljs-string">"apple"</span>); <span class="hljs-comment">// 1 element</span><br>List&lt;String&gt; list3 = List.of(<span class="hljs-string">"apple"</span>, <span class="hljs-string">"pear"</span>); <span class="hljs-comment">// 2 elements</span><br>List&lt;String&gt; list4 = List.of(<span class="hljs-string">"apple"</span>, <span class="hljs-string">"pear"</span>, <span class="hljs-string">"orange"</span>); <span class="hljs-comment">// 3 elements</span><br><br>list3.add(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// UnsupportedOperationException</span><br></code></pre></td></tr></tbody></table></figure>
<h3 id="4、排序"><a class="header-anchor" href="#4、排序">¶</a>4、排序</h3>
<blockquote>
<p><code>Collections</code>可以对<code>List</code>进行排序。因为排序会直接修改<code>List</code>元素的位置，因此必须传入可变<code>List</code>：</p>
<p>只能对List排序！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CollectionsTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;String&gt; list01 = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        list01.add(<span class="hljs-string">"apple"</span>);<br>        list01.add(<span class="hljs-string">"pear"</span>);<br>        list01.add(<span class="hljs-string">"orange"</span>);<br>        <span class="hljs-comment">// 排序前:</span><br>        System.out.println(list01); <span class="hljs-comment">// [apple, pear, orange]</span><br>        Collections.sort(list01);<br>        <span class="hljs-comment">// 排序后:</span><br>        System.out.println(list01); <span class="hljs-comment">// [apple, orange, pear]</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="5、洗牌算法"><a class="header-anchor" href="#5、洗牌算法">¶</a>5、洗牌算法</h3>
<blockquote>
<p><code>Collections</code>提供了洗牌算法，即传入一个有序的<code>List</code>，可以随机打乱<code>List</code>内部元素的顺序，效果相当于让计算机洗牌：</p>
<p>只针对List！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CollectionsTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;Integer&gt; list02 = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++) {<br>            list02.add(i);<br>        }<br>        <span class="hljs-comment">// 洗牌前:</span><br>        System.out.println(list02); <span class="hljs-comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br>        Collections.shuffle(list02);<br>        <span class="hljs-comment">// 洗牌后:</span><br>        System.out.println(list02); <span class="hljs-comment">// [5, 7, 1, 4, 9, 2, 6, 0, 8, 3]</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="6、不可变集合"><a class="header-anchor" href="#6、不可变集合">¶</a>6、不可变集合</h3>
<p><code>Collections</code>还提供了一组方法把可变集合封装成不可变集合：</p>
<ul>
<li>封装成不可变List：<code>List unmodifiableList(List list)</code></li>
<li>封装成不可变Set：<code>Set unmodifiableSet(Set set)</code></li>
<li>封装成不可变Map：<code>Map unmodifiableMap(Map m)</code></li>
</ul>
<blockquote>
<p>下面这种情况可以用<code>of()</code>方法代替，不过其他情况就不一定了，必须使用该方法了！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CollectionsTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;String&gt; mutable = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        mutable.add(<span class="hljs-string">"apple"</span>);<br>        mutable.add(<span class="hljs-string">"pear"</span>);<br>        <span class="hljs-comment">// 变为不可变集合:</span><br>        List&lt;String&gt; immutable = Collections.unmodifiableList(mutable);<br>        List&lt;String&gt; immutable = List.of(<span class="hljs-string">"apple"</span>, <span class="hljs-string">"pear"</span>);<br>        immutable.add(<span class="hljs-string">"orange"</span>); <span class="hljs-comment">// UnsupportedOperationException!</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>继续对原始的可变<code>List</code>进行增删是可以的，并且，会直接影响到封装后的“不可变”<code>List</code>：</li>
</ul>
<blockquote>
<p>原List可修改，会影响到封装后的List！所以需要将原List扔掉！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CollectionsTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;String&gt; mutable = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        mutable.add(<span class="hljs-string">"apple"</span>);<br>        mutable.add(<span class="hljs-string">"pear"</span>);<br>        <span class="hljs-comment">// 变为不可变集合:</span><br>        List&lt;String&gt; immutable = Collections.unmodifiableList(mutable);<br>        List&lt;String&gt; immutable = List.of(<span class="hljs-string">"apple"</span>, <span class="hljs-string">"pear"</span>);<br>        immutable.add(<span class="hljs-string">"orange"</span>); <span class="hljs-comment">// UnsupportedOperationException!</span><br>        System.out.println(immutable); <span class="hljs-comment">//[apple, pear]</span><br>        mutable.add(<span class="hljs-string">"orange"</span>); <br>        System.out.println(immutable); <span class="hljs-comment">//[apple, pear, orange]</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>扔掉原List</li>
</ul>
<blockquote>
<p>操作：将原List置为null即可！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.learn.java;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CollectionsTest</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<br>        List&lt;String&gt; mutable = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        mutable.add(<span class="hljs-string">"apple"</span>);<br>        mutable.add(<span class="hljs-string">"pear"</span>);<br>        <span class="hljs-comment">// 变为不可变集合:</span><br>        List&lt;String&gt; immutable = Collections.unmodifiableList(mutable);<br>        <span class="hljs-comment">// 立刻扔掉mutable的引用:</span><br>        mutable = <span class="hljs-keyword">null</span>;<br>         System.out.println(immutable); <span class="hljs-comment">//[apple, pear]</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3 id="7、线程安全集合"><a class="header-anchor" href="#7、线程安全集合">¶</a>7、线程安全集合</h3>
<p><code>Collections</code>还提供了一组方法，可以把线程不安全的集合变为线程安全的集合：</p>
<ul>
<li>变为线程安全的List：<code>List synchronizedList(List list)</code></li>
<li>变为线程安全的Set：<code>Set synchronizedSet(Set s)</code></li>
<li>变为线程安全的Map：<code>Map synchronizedMap(Map m)</code></li>
</ul>
<p>多线程的概念我们会在后面讲。因为从Java 5开始，引入了更高效的并发集合类，所以上述这几个同步方法已经没有什么用了。</p>
<center style="color:red; font-size:25px">集合这一章完结，敬请期待后续章节！</center><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">ITNXD</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.itnxd.cn/posts/46100.html">https://www.itnxd.cn/posts/46100.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.itnxd.cn" target="_blank">小牛博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%9B%86%E5%90%88/">集合</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/niuxvdong/pic@a7ba0705416b80093aaa91cac65656b3cd023871/2021/02/06/d5787bbd8ec29096932f5b1b12823ec4.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/WeChantQR.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/WeChantQR.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/AliPayQR.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/AliPayQR.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/61053.html"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@1609fa8769d274cc92c39376995b3200c5e4a296/2021/02/06/8c45a4ecb931635b21bb72595f059933.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java教程系列之IO流</div></div></a></div><div class="next-post pull-right"><a href="/posts/16438.html"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@e2981267335bb8b3e88cd487fc290abd2695874a/2021/02/06/98d2ed3a9828ab66607e1b1a637e676e.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java教程系列之泛型</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/54748.html" title="再学Java之StringBuffer、StringBuilder、枚举类、注解、集合和泛型"><img class="cover" src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@34dabb7f36c7e10af6f9cd383f5884a83fcbf94e/2021/02/06/9fd846795f34be8edc6238ce1ef30584.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-15</div><div class="title">再学Java之StringBuffer、StringBuilder、枚举类、注解、集合和泛型</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E5%85%88%E6%9D%A5%E9%A6%96%E6%AD%8C%E6%9B%B2%E6%9D%A5%E6%94%BE%E6%9D%BE%E4%B8%80%E4%B8%8B%E5%90%A7%EF%BC%81"><span class="toc-text">首先来首歌曲来放松一下吧！</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Java%E9%9B%86%E5%90%88%E4%BB%8B%E7%BB%8D"><span class="toc-text">一、Java集合介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%8D%E8%B6%B3"><span class="toc-text">1、数组的不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E9%9C%80%E8%A6%81%E5%90%84%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%9B%86%E5%90%88"><span class="toc-text">2、需要各种类型的集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Collection"><span class="toc-text">3、Collection</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E4%B8%89%E7%A7%8D%E4%B8%BB%E8%A6%81%E9%9B%86%E5%90%88%EF%BC%9A"><span class="toc-text">3.1 三种主要集合：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-Java%E9%9B%86%E5%90%88%E7%9A%84%E7%89%B9%E7%82%B9%EF%BC%9A"><span class="toc-text">3.2 Java集合的特点：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E9%9B%86%E5%90%88%E8%AE%BF%E9%97%AE%EF%BC%88Iterator%EF%BC%89"><span class="toc-text">3.3 集合访问（Iterator）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-%E4%B8%8D%E5%BB%BA%E8%AE%AE%E7%BB%A7%E7%BB%AD%E4%BD%BF%E7%94%A8%E7%9A%84%E9%9B%86%E5%90%88"><span class="toc-text">3.4 不建议继续使用的集合</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8List"><span class="toc-text">二、使用List</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%95%B0%E7%BB%84%E7%9A%84%E5%88%A0%E9%99%A4%E5%92%8C%E6%B7%BB%E5%8A%A0"><span class="toc-text">1、数组的删除和添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81ArrayList"><span class="toc-text">2、ArrayList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81List-E-%E6%8E%A5%E5%8F%A3"><span class="toc-text">3、List&lt;E&gt;接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81ArrayList%E4%B8%8ELinkedList"><span class="toc-text">4、ArrayList与LinkedList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81List%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-text">5、List的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E5%88%9B%E5%BB%BAList"><span class="toc-text">6、创建List</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E9%81%8D%E5%8E%86List"><span class="toc-text">7、遍历List</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-%E9%80%9A%E8%BF%87get%E6%96%B9%E6%B3%95%E9%81%8D%E5%8E%86%EF%BC%88%E4%B8%8D%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">7.1 通过get方法遍历（不推荐）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-%E9%80%9A%E8%BF%87Iterator%E9%81%8D%E5%8E%86"><span class="toc-text">7.2 通过Iterator遍历</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-%E9%80%9A%E8%BF%87for-each%E9%81%8D%E5%8E%86%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">7.3 通过for each遍历（推荐）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81List%E8%BD%AC%E6%8D%A2%E4%B8%BAArray"><span class="toc-text">8、List转换为Array</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-%E4%BD%BF%E7%94%A8toArray-%E6%96%B9%E6%B3%95"><span class="toc-text">8.1 使用toArray()方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-%E4%BD%BF%E7%94%A8toArray-T-%E6%96%B9%E6%B3%95"><span class="toc-text">8.2 使用toArray(T[])方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-%E4%BC%A0%E5%85%A5%E6%81%B0%E5%A5%BD%E5%A4%A7%E5%B0%8F%E7%9A%84%E6%95%B0%E7%BB%84"><span class="toc-text">8.3 传入恰好大小的数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%BC%8F%E5%86%99%E6%B3%95"><span class="toc-text">8.4 使用函数式写法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81Array%E8%BD%AC%E6%8D%A2%E4%B8%BAList"><span class="toc-text">9、Array转换为List</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%BC%96%E5%86%99equals%E6%96%B9%E6%B3%95"><span class="toc-text">三、编写equals方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81contains-%E5%92%8C-indexOf%E6%96%B9%E6%B3%95"><span class="toc-text">1、contains 和 indexOf方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%88%A4%E6%96%AD%E4%B8%A4%E4%B8%AA%E5%85%83%E7%B4%A0%E7%9B%B8%E7%AD%89"><span class="toc-text">2、判断两个元素相等</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E7%BC%96%E5%86%99equals%E6%96%B9%E6%B3%95"><span class="toc-text">3、编写equals方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-equals%E6%96%B9%E6%B3%95%E9%9C%80%E8%A6%81%E6%BB%A1%E8%B6%B3%E7%9A%84%E6%9D%A1%E4%BB%B6"><span class="toc-text">3.1 equals方法需要满足的条件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-equals%E6%96%B9%E6%B3%95%E7%BC%96%E5%86%99%E6%AD%A5%E9%AA%A4"><span class="toc-text">3.2 equals方法编写步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E9%9C%80%E8%A6%81%E7%BC%96%E5%86%99equals%E6%96%B9%E6%B3%95"><span class="toc-text">4、什么时候需要编写equals方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BD%BF%E7%94%A8Map"><span class="toc-text">四、使用Map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">1、常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Map%E9%81%8D%E5%8E%86"><span class="toc-text">2、Map遍历</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E9%AB%98%E6%95%88%E6%9F%A5%E6%89%BE%E4%BE%8B%E5%AD%90"><span class="toc-text">3、高效查找例子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E7%BC%96%E5%86%99hashCode%E5%92%8Cequals%E6%96%B9%E6%B3%95"><span class="toc-text">五、编写hashCode和equals方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81equals%E6%96%B9%E6%B3%95%E8%A6%86%E5%86%99"><span class="toc-text">1、equals方法覆写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%BC%96%E5%86%99hashCode%E6%96%B9%E6%B3%95"><span class="toc-text">2、编写hashCode方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-text">2.1 实现原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E4%BD%BF%E7%94%A8Objects-hash%E6%96%B9%E6%B3%95"><span class="toc-text">2.2 使用Objects.hash方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E7%BC%96%E5%86%99%E5%8E%9F%E5%88%99"><span class="toc-text">2.3 编写原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B"><span class="toc-text">2.4 完整示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81hashCode%E5%BB%B6%E4%BC%B8"><span class="toc-text">3、hashCode延伸</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-HashMap%E7%9A%84%E6%95%B0%E7%BB%84%E5%8F%98%E5%8C%96"><span class="toc-text">3.1 HashMap的数组变化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-hashCode%E8%AE%A1%E7%AE%97%E5%BE%97%E5%88%B0%E7%9A%84%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%90%8C"><span class="toc-text">3.2 hashCode计算得到的索引相同</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E4%BD%BF%E7%94%A8EnumMap"><span class="toc-text">六、使用EnumMap</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E4%BD%BF%E7%94%A8TreeMap"><span class="toc-text">七、使用TreeMap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81Map%E7%9A%84%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%EF%BC%9A"><span class="toc-text">1、Map的继承关系：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%99%AE%E9%80%9A%E6%8E%92%E5%BA%8F"><span class="toc-text">2、普通排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E7%9A%84%E6%8E%92%E5%BA%8F"><span class="toc-text">3、自定义类的排序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E4%BD%BF%E7%94%A8Properties"><span class="toc-text">八、使用Properties</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">1、读取配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96%E5%AE%9E%E4%BE%8B"><span class="toc-text">2、配置读取实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%A4%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">3、多配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%86%99%E5%85%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">4、写入配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E7%BC%96%E7%A0%81"><span class="toc-text">5、编码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E4%BD%BF%E7%94%A8Set"><span class="toc-text">九、使用Set</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-2"><span class="toc-text">1、常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Set%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E7%AE%80%E5%8C%96%E7%89%88"><span class="toc-text">2、Set实现代码简化版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E4%B8%A4%E7%A7%8DSet%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-text">3、两种Set实现类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-HashSet"><span class="toc-text">3.1 HashSet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-TreeSet"><span class="toc-text">3.2 TreeSet</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E4%B8%80%E4%B8%AA%E5%8E%BB%E9%87%8D%E4%BE%8B%E5%AD%90"><span class="toc-text">4、一个去重例子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E4%BD%BF%E7%94%A8Queue"><span class="toc-text">十、使用Queue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-3"><span class="toc-text">1、常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-text">2、注意点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E4%BD%BF%E7%94%A8PriorityQueue"><span class="toc-text">十一、使用PriorityQueue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%A0%87%E5%87%86%E7%B1%BB%E7%9A%84%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97"><span class="toc-text">1、标准类的优先队列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E7%9A%84%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97"><span class="toc-text">2、自定义类的优先队列</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8Deque"><span class="toc-text">十二、使用Deque</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-4"><span class="toc-text">1、常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E4%B8%80%E4%BA%9B%E5%BB%BA%E8%AE%AE"><span class="toc-text">2、一些建议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E4%BD%BF%E7%94%A8Stack"><span class="toc-text">十三、使用Stack</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90"><span class="toc-text">1、一个例子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81%E4%BD%BF%E7%94%A8Iterator"><span class="toc-text">十四、使用Iterator</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81for-each%E9%81%8D%E5%8E%86%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-text">1、for each遍历的实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-text">2、迭代器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E7%BC%96%E5%86%99Iterator"><span class="toc-text">3、编写Iterator</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%94%E3%80%81%E4%BD%BF%E7%94%A8Collections"><span class="toc-text">十五、使用Collections</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81addAll%E6%96%B9%E6%B3%95"><span class="toc-text">1、addAll方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%88%9B%E5%BB%BA%E7%A9%BA%E9%9B%86%E5%90%88"><span class="toc-text">2、创建空集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%88%9B%E5%BB%BA%E5%8D%95%E5%85%83%E7%B4%A0%E9%9B%86%E5%90%88"><span class="toc-text">3、创建单元素集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E6%8E%92%E5%BA%8F"><span class="toc-text">4、排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E6%B4%97%E7%89%8C%E7%AE%97%E6%B3%95"><span class="toc-text">5、洗牌算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E4%B8%8D%E5%8F%AF%E5%8F%98%E9%9B%86%E5%90%88"><span class="toc-text">6、不可变集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%9B%86%E5%90%88"><span class="toc-text">7、线程安全集合</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By ITNXD</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">CDN BY <a target="_blank" rel="external nofollow" href="https://www.jsdelivr.com/"><b>jsDelivr</b></a> | HOST BY  <a target="_blank" rel="external nofollow" href="https://vercel.com/"><b>Vercel</b></a> && <a target="_blank" rel="external nofollow" href="https://github.com/"><b>Github</b></a><br><img style="vertical-align:middle" src="https://cdn.jsdelivr.net/gh/lzyblog/image@4b122354dee27f3056fd3a7fc6a43dbf68cebf33/2020/11/16/025e5329f3592dfa03a13c5365323ba1.png" alt=""> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.beian.miit.gov.cn/"><b>晋ICP备19005025号-2</b></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      true && mermaid.init()
    })
  }
}</script><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'itnxd-8g1z2i760e99f516',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'itnxd-8g1z2i760e99f516',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'itnxd-8g1z2i760e99f516',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><div class="aplayer no-destroy" data-id="1551071404" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="false" muted></div><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/6dc9e8f9.js","daovoice")
</script><script>var isChatBtn = true
daovoice('init', {
  app_id: '6dc9e8f9',},{
  launcher: { 
     disableLauncherIcon: isChatBtn // 悬浮 ICON 是否显示
  },
});
daovoice('update');

if (isChatBtn) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      daovoice('show')
    });
  }
  chatBtnFn()
} else {
  if (false) {
    function chatBtnHide () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: true // 悬浮 ICON 是否显示
        },
      });
    }
    function chatBtnShow () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: false // 悬浮 ICON 是否显示
        },
      });
    }
  }
}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>