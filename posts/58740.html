<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>JavaWeb之Servlet使用总结 | 小牛博客</title><meta name="keywords" content="Servlet"><meta name="author" content="ITNXD"><meta name="copyright" content="ITNXD"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="¶一、Servlet介绍  Servlet 是 JavaEE 规范之一。规范就是接口！ Servlet 就 JavaWeb 三大组件之一。三大组件分别是：Servlet 程序、Filter 过滤器、Listener 监听器。 Servlet 是运行在服务器上的一个 java 小程序，它可以接收客户端发送过来的请求，并响应数据给客户端。  ¶二、Servlet程序创建 ¶1、通过实现Servlet接">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb之Servlet使用总结">
<meta property="og:url" content="https://www.itnxd.cn/posts/58740.html">
<meta property="og:site_name" content="小牛博客">
<meta property="og:description" content="¶一、Servlet介绍  Servlet 是 JavaEE 规范之一。规范就是接口！ Servlet 就 JavaWeb 三大组件之一。三大组件分别是：Servlet 程序、Filter 过滤器、Listener 监听器。 Servlet 是运行在服务器上的一个 java 小程序，它可以接收客户端发送过来的请求，并响应数据给客户端。  ¶二、Servlet程序创建 ¶1、通过实现Servlet接">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/niuxvdong/pic@96012753424dea53bf52f439d37afab1758bdf9f/2021/03/08/ba2bb57f28e91a5b1ea717ac93817640.png">
<meta property="article:published_time" content="2021-03-08T12:03:24.000Z">
<meta property="article:modified_time" content="2021-03-09T07:13:22.618Z">
<meta property="article:author" content="ITNXD">
<meta property="article:tag" content="Servlet">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/niuxvdong/pic@96012753424dea53bf52f439d37afab1758bdf9f/2021/03/08/ba2bb57f28e91a5b1ea717ac93817640.png"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/favicon.ico"><link rel="canonical" href="https://www.itnxd.cn/posts/58740"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="H9LW1qdxrkJ55YbkfWulMvpaexxx3Rk0Yo6dVANeNHc"/><meta name="baidu-site-verification" content="code-YglH3DObCb"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8d3bd59bf6303bd5f44677445d369df5";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":300,"languages":{"author":"作者: ITNXD","link":"链接: ","source":"来源: 小牛博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaWeb之Servlet使用总结',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-03-09 15:13:22'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><link rel="stylesheet" href="/css/my.css"><style type="text/css">#toggle-sidebar {bottom: 80px}</style><link rel="stylesheet" href="//at.alicdn.com/t/font_1828588_zrw9f0qqie.css"><link rel="stylesheet" href="/self/atom-one-light.css"><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="小牛博客" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@2f11f173da64ba6a270c2e93d23e00911b1019d3/2021/02/06/e373babbf340391956b673128a84185d.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">251</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">199</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">25</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/niuxvdong/pic@96012753424dea53bf52f439d37afab1758bdf9f/2021/03/08/ba2bb57f28e91a5b1ea717ac93817640.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">小牛博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaWeb之Servlet使用总结</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-08T12:03:24.000Z" title="发表于 2021-03-08 20:03:24">2021-03-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-09T07:13:22.618Z" title="更新于 2021-03-09 15:13:22">2021-03-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/JavaWeb/">JavaWeb</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>29分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaWeb之Servlet使用总结"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一、Servlet介绍"><a class="header-anchor" href="#一、Servlet介绍">¶</a>一、Servlet介绍</h1>
<ol>
<li>Servlet 是 JavaEE 规范之一。规范就是接口！</li>
<li>Servlet 就 JavaWeb 三大组件之一。三大组件分别是：Servlet 程序、Filter 过滤器、Listener 监听器。</li>
<li>Servlet 是运行在服务器上的一个 java 小程序，<strong>它可以接收客户端发送过来的请求，并响应数据给客户端。</strong></li>
</ol>
<h1 id="二、Servlet程序创建"><a class="header-anchor" href="#二、Servlet程序创建">¶</a>二、Servlet程序创建</h1>
<h2 id="1、通过实现Servlet接口创建Servlet程序"><a class="header-anchor" href="#1、通过实现Servlet接口创建Servlet程序">¶</a>1、通过实现Servlet接口创建Servlet程序</h2>
<h4 id="1-1、创建步骤"><a class="header-anchor" href="#1-1、创建步骤">¶</a>1.1、创建步骤</h4>
<blockquote>
<p><a href="https://www.itnxd.cn/posts/61877.html#2-1%E3%80%81%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9AWeb%E5%B7%A5%E7%A8%8B">创建Web工程方式，点击这里！</a></p>
</blockquote>
<ol>
<li>编写一个类去实现 <code>Servlet</code> 接口</li>
<li>实现 <code>service</code> 方法，处理请求，并响应数据</li>
<li>到 <code>web.xml</code> 中去配置 <code>servlet</code> 程序的访问地址</li>
</ol>
<h4 id="1-2、Servlet创建"><a class="header-anchor" href="#1-2、Servlet创建">¶</a>1.2、Servlet创建</h4>
<blockquote>
<p><strong>注意</strong>：需要导入servlet的jar包，直接去Tomcat安装目录下的lib目录找到<code>servlet-api.jar</code>复制到当前lib目录并<code>Add as Library</code>即可！</p>
<p><strong>包名略有不同：</strong></p>
<ul>
<li>旧版本包名为为<code>javax.servlet.xxx</code></li>
<li>新版本包名为<code>jakarta.servlet.xxx</code></li>
</ul>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloServlet</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Servlet</span> </span>{<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">HelloServlet</span><span class="hljs-params">()</span></span>{<br>        System.out.println(<span class="hljs-string">"1. 构造器方法"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(ServletConfig servletConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>{<br>        System.out.println(<span class="hljs-string">"2. 初始化方法"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> ServletConfig <span class="hljs-title">getServletConfig</span><span class="hljs-params">()</span> </span>{<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *service方法专门用来处理请求和响应！</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> servletRequest</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> servletResponse</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">service</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        System.out.println(<span class="hljs-string">"3. service方法 ---- HelloServlet被执行了！"</span>);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 处理Get请求！</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">()</span></span>{<br>        System.out.println(<span class="hljs-string">"Get请求"</span>);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 处理Post请求！</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">()</span></span>{<br>        System.out.println(<span class="hljs-string">"Post请求"</span>);<br>    }<br><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getServletInfo</span><span class="hljs-params">()</span> </span>{<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>{<br>        System.out.println(<span class="hljs-string">"4. destroy销毁方法"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h4 id="1-3、配置XML"><a class="header-anchor" href="#1-3、配置XML">¶</a>1.3、配置XML</h4>
<blockquote>
<p><code>servlet</code>和<code>servlet-mapping</code>标签共同配置一个Servlet程序，一个程序一组配置！</p>
<p><strong>注意：Servlet程序的访问地址区分大小写！</strong></p>
</blockquote>
<ol>
<li>创建<code>servlet</code>标签：表示配置一个Servlet程序
<ol>
<li>创建<code>servlet-name</code>标签：给Servlet程序起别名（一般为类名）</li>
<li>创建<code>servlet-class</code>标签：Servlet程序的全类名</li>
</ol>
</li>
<li>创建<code>servlet-mapping</code>标签：为Servlet程序配置访问地址
<ol>
<li>创建<code>servlet-name</code>标签：指明访问地址的配置对象（一般为类名）</li>
<li>创建<code>url-pattern</code>标签：访问地址，以<code>/</code>开始</li>
</ol>
</li>
</ol>
<p><strong>注意</strong>：<code>/</code>表示 <code>http://ip:port/工程名</code>，全地址为<code>http://ip:端口/工程名 + url-pattern信息</code></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span><br><span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">"4.0"</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- 一、servlet标签给Tomcat配置Servlet程序 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--servlet-name标签 Servlet程序起一个别名（一般是类名） --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--servlet-class是Servlet程序的全类名--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atguigu.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--二、servlet-mapping标签给servlet程序配置访问地址--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--servlet-name标签的作用是告诉服务器，当前配置的地址给哪个Servlet程序使用--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">            url-pattern标签配置访问地址</span><br><span class="hljs-comment">            访问地址为：http://localhost:8081/工程名/hello</span><br><span class="hljs-comment">        --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>
<h4 id="1-4、运行Servlet程序"><a class="header-anchor" href="#1-4、运行Servlet程序">¶</a>1.4、运行Servlet程序</h4>
<blockquote>
<p>点击运行即可！</p>
</blockquote>
<p><strong>注意点：</strong> 配置文件，web文件，java源文件更改需要重新部署<code>Redeploy</code>，除了java文件外似乎可以直接使用选项<code>Update classes and resouces</code>，但是似乎好多时候部署的项目都不会自动更新，建议直接使用<code>Redeploy</code>进行重新部署，可解决一切bug问题，当然重启服务器也可解决，但重启耗时属实费事耗时！</p>
<h4 id="1-5、Servlet的生命周期"><a class="header-anchor" href="#1-5、Servlet的生命周期">¶</a>1.5、Servlet的生命周期</h4>
<ol>
<li>构造器和初始化：第一次创建<code>Servlet</code>时调用</li>
<li><code>service</code>方法：每次请求都会调用</li>
<li><code>destroy</code>方法：web工程停止时调用</li>
</ol>
<h4 id="1-6、URL地址访问Servlet过程"><a class="header-anchor" href="#1-6、URL地址访问Servlet过程">¶</a>1.6、URL地址访问Servlet过程</h4>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@b64e9b1a6266367c13b63d42ea5a43dcf0bae34a/2021/03/08/dc61049254c888868b487c6e1dfdf732.png" alt=""></p>
<h4 id="1-7、GET和POST请求分发处理"><a class="header-anchor" href="#1-7、GET和POST请求分发处理">¶</a>1.7、GET和POST请求分发处理</h4>
<blockquote>
<p>将<code>ServletRequest</code>对象向下转型为<code>HttpServletRequest</code>来调用<code>getMethod()</code>方法获取<code>method</code>类型！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *service方法专门用来处理请求和响应！</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> servletRequest</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> servletResponse</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">service</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>    System.out.println(<span class="hljs-string">"3. service方法 ---- HelloServlet被执行了！"</span>);<br><br>    <span class="hljs-comment">// 1. 向下转型调用getMethod()方法！</span><br>    HttpServletRequest request = (HttpServletRequest) servletRequest;<br>    String method = request.getMethod();<br>    <span class="hljs-keyword">if</span>(<span class="hljs-string">"GET"</span>.equals(method)){<br>        doGet();<br>    }<span class="hljs-keyword">else</span>{<br>        doPost();<br>    }<br>}<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 处理Get请求！</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">()</span></span>{<br>    System.out.println(<span class="hljs-string">"Get请求"</span>);<br>}<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 处理Post请求！</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">()</span></span>{<br>    System.out.println(<span class="hljs-string">"Post请求"</span>);<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="2、通过继承HttpServlet创建Servlet程序（推荐）"><a class="header-anchor" href="#2、通过继承HttpServlet创建Servlet程序（推荐）">¶</a>2、通过继承HttpServlet创建Servlet程序（推荐）</h2>
<h4 id="2-1、创建步骤"><a class="header-anchor" href="#2-1、创建步骤">¶</a>2.1、创建步骤</h4>
<blockquote>
<p>一般在实际项目开发中，都是使用继承 <code>HttpServlet</code> 类的方式去实现 Servlet 程序。</p>
</blockquote>
<ol>
<li>编写一个类去继承 <code>HttpServlet</code> 类</li>
<li>根据业务需要重写 <code>doGet</code> 或 <code>doPost</code> 方法</li>
<li>到 <code>web.xml</code> 中的配置 <code>Servlet</code> 程序的访问地址</li>
</ol>
<h4 id="2-2、Servlet创建"><a class="header-anchor" href="#2-2、Servlet创建">¶</a>2.2、Servlet创建</h4>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloServlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * HelloServlet2的doGet方法！</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        System.out.println(<span class="hljs-string">"HelloServlet2的doGet方法调用！"</span>);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * HelloServlet2的doPost方法！</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> resp</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        System.out.println(<span class="hljs-string">"HelloServlet2的doPost方法调用！"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h4 id="2-3、配置XML"><a class="header-anchor" href="#2-3、配置XML">¶</a>2.3、配置XML</h4>
<p><strong>略：同上一种方式！</strong></p>
<h2 id="3、使用IDEA创建Servlet程序"><a class="header-anchor" href="#3、使用IDEA创建Servlet程序">¶</a>3、使用IDEA创建Servlet程序</h2>
<blockquote>
<p><strong>注意：新版本IDEA并无此选项可直接创建Servlet程序！</strong></p>
</blockquote>
<h4 id="3-1、使IDEA支持直接创建Servlet的方法"><a class="header-anchor" href="#3-1、使IDEA支持直接创建Servlet的方法">¶</a>3.1、使IDEA支持直接创建Servlet的方法</h4>
<ol>
<li>找到当前web工程下的<code>imi</code>配置文件，例如：<code>07_Servlet.iml</code></li>
<li>找到如下位置添加如下信息即可！</li>
<li>无需重启即可生效，若无法生效，可重启尝试</li>
</ol>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs imi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&lt;module type="JAVA_MODULE" version="4"&gt;<br>  &lt;component name="FacetManager"&gt;<br>    &lt;facet type="web" name="Web"&gt;<br>      &lt;configuration&gt;<br>        &lt;descriptors&gt;<br>          &lt;deploymentDescriptor name="web.xml" url="file://$MODULE_DIR$/web/WEB-INF/web.xml" /&gt;<br>        &lt;/descriptors&gt;<br>        &lt;webroots&gt;<br>          &lt;root url="file://$MODULE_DIR$/web" relative="/" /&gt;<br>        &lt;/webroots&gt;<br>        <br>        在这里添加如下内容：<br>        ------------------------------------------------------<br>        &lt;sourceRoots&gt;<br>          &lt;root url="file://$MODULE_DIR$/src" /&gt;<br>        &lt;/sourceRoots&gt;<br>        -----------------------------------------------------<br>        <br>      &lt;/configuration&gt;<br>    &lt;/facet&gt;<br>  &lt;/component&gt;<br>  &lt;component name="NewModuleRootManager" inherit-compiler-output="true"&gt;<br>    &lt;exclude-output /&gt;<br>    &lt;content url="file://$MODULE_DIR$"&gt;<br>      &lt;sourceFolder url="file://$MODULE_DIR$/src" isTestSource="false" /&gt;<br>    &lt;/content&gt;<br>    &lt;orderEntry type="jdk" jdkName="14" jdkType="JavaSDK" /&gt;<br>    &lt;orderEntry type="sourceFolder" forTests="false" /&gt;<br>    &lt;orderEntry type="module-library"&gt;<br>      &lt;library&gt;<br>        &lt;CLASSES&gt;<br>          &lt;root url="jar://$MODULE_DIR$/web/WEB-INF/lib/servlet-api.jar!/" /&gt;<br>        &lt;/CLASSES&gt;<br>        &lt;JAVADOC /&gt;<br>        &lt;SOURCES&gt;<br>          &lt;root url="jar://$MODULE_DIR$/../../../学习笔记/4、JavaWeb/apache-tomcat-10.0.2-src.zip!/apache-tomcat-10.0.2-src/java" /&gt;<br>        &lt;/SOURCES&gt;<br>      &lt;/library&gt;<br>    &lt;/orderEntry&gt;<br>  &lt;/component&gt;<br>&lt;/module&gt;<br></code></pre></td></tr></tbody></table></figure>
<p><strong>配置生效后，会在右键菜单出现创建选项，如下：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@d42038af5f0416cd70b31e12f56dba621e411621/2021/03/08/f56a6c227cb52a1d38eed157cfbfc23d.png" alt=""></p>
<h4 id="3-2、Servlet创建"><a class="header-anchor" href="#3-2、Servlet创建">¶</a>3.2、Servlet创建</h4>
<blockquote>
<p>通过IDEA创建Servlet特点：</p>
<ol>
<li>自动生成两个重写方法<code>doGet()、doPost()</code>方法</li>
<li>自动生成一半XML配置文件<code>servelt</code>标签，<code>servlet-mapping</code>标签仍需手动配置</li>
</ol>
</blockquote>
<p><strong>注意：</strong> 当前先以XML配置，后续再讲注解配置！先不要勾选如下配置！</p>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@76317036a7446c91242b87ad13506be9f6f5bd99/2021/03/08/e76879bd855202d23767b0b6e9598d54.png" alt=""></p>
<p><strong>生成代码如下：</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloServlet3</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        System.out.println(<span class="hljs-string">"HelloServlet3的doGet方法调用！"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        System.out.println(<span class="hljs-string">"HelloServlet3的doPost方法调用！"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h1 id="三、Servlet类继承体系"><a class="header-anchor" href="#三、Servlet类继承体系">¶</a>三、Servlet类继承体系</h1>
<p><strong>类继承体系如下：</strong></p>
<ul>
<li>GenericServlet实现了三大接口：<code>Servlet、ServletConfig、java.io.Serializable</code></li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@7e2d21f17281694d69e0db245a136bdf9fd289b1/2021/03/08/52b063fa55ca37c504939958f226d6dd.png" alt=""></p>
<h1 id="四、ServletConfig类介绍"><a class="header-anchor" href="#四、ServletConfig类介绍">¶</a>四、ServletConfig类介绍</h1>
<h2 id="1、概述"><a class="header-anchor" href="#1、概述">¶</a>1、概述</h2>
<blockquote>
<p>简单理解，局部变量，局部配置信息！</p>
</blockquote>
<ol>
<li>ServletConfig 类从类名上来看，就知道是 Servlet 程序的<strong>配置信息类</strong>。</li>
<li>Servlet 程序和 ServletConfig 对象都是由 Tomcat 负责创建，我们负责使用。</li>
<li>Servlet 程序默认是第一次访问的时候创建，ServletConfig 是<strong>每个 Servlet 程序创建时，就创建一个对应的 ServletConfig 对象</strong>。</li>
</ol>
<h2 id="2、作用"><a class="header-anchor" href="#2、作用">¶</a>2、作用</h2>
<ol>
<li>可以获取 Servlet 程序的<strong>别名</strong> <code>servlet-name</code> 的值</li>
<li>获取<strong>初始化参数</strong> <code>init-param</code></li>
<li>获取 <code>ServletContext</code> 对象</li>
</ol>
<h2 id="3、配置XML"><a class="header-anchor" href="#3、配置XML">¶</a>3、配置XML</h2>
<blockquote>
<p>配置位置：<code>servlet</code>标签内部，局部配置，正常！</p>
<p>初始化参数：是一组组键值对！可以多组！</p>
</blockquote>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 一、servlet标签给Tomcat配置Servlet程序 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atguigu.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><br><br>    <br>    <span class="hljs-comment">&lt;!-----------------------------------------------------------------------------------------&gt;</span><br>    <span class="hljs-comment">&lt;!--二、配置init-param初始化参数！--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--参数名--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>password<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--参数值--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>xxx<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>username<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>root<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>url<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/test<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-----------------------------------------------------------------------------------------&gt;</span><br><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>
<h2 id="4、通过Java程序获取配置"><a class="header-anchor" href="#4、通过Java程序获取配置">¶</a>4、通过Java程序获取配置</h2>
<blockquote>
<p>当前ServletConfig对象只能获取当前Servlet程序的配置信息，无法获取其他人的信息！（局部配置只给自己用！）</p>
</blockquote>
<p><strong>关于获取servletConfig对象：</strong></p>
<ul>
<li>可以通过<code>getServletConfig()</code>方法获取<code>servletConfig</code>对象！
<ul>
<li>在<code>implements Servlet</code>的类中，需要重写<code>public ServletConfig getServletConfig() {}</code>方法才可获取！</li>
<li>在<code>extends HttpServlet</code>的类中，父类的父类<code>GenericServlet</code>有该类实现返回当前<code>ServletConfig</code>对象!
<ul>
<li>**注意：**该方法需要在重写的<code>init</code>方法中显示调用父类的<code>super.init(config)</code>方法为<code>ServletConfig</code>对象赋值！否则将发生空指针异常！</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// implements Servlet的init方法：</span><br><br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(ServletConfig servletConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>{<br>    System.out.println(<span class="hljs-string">"2. 初始化方法"</span>);<br><br>    <span class="hljs-comment">// 1、可以获取 Servlet 程序的别名 servlet-name 的值</span><br>    System.out.println(<span class="hljs-string">"HelloServlet程序的别名是："</span> + servletConfig.getServletName());<br><br>    <span class="hljs-comment">// 2、获取初始化参数 init-param（写在&lt;servlet&gt;&lt;servlet/&gt;之中）</span><br>    System.out.println(<span class="hljs-string">"初始化参数username的值是"</span> + servletConfig.getInitParameter(<span class="hljs-string">"username"</span>));<br>    System.out.println(<span class="hljs-string">"初始化参数password的值是"</span> + servletConfig.getInitParameter(<span class="hljs-string">"password"</span>));<br>    System.out.println(<span class="hljs-string">"初始化参数url的值是"</span> + servletConfig.getInitParameter(<span class="hljs-string">"url"</span>));<br><br>    <span class="hljs-comment">// 3、获取 ServletContext 对象</span><br>    System.out.println(<span class="hljs-string">"servletConfig对象为："</span> + servletConfig.getServletContext());<br><br><br>    <span class="hljs-comment">// 可以通过getServletConfig()方法获取servletConfig对象！</span><br>    <span class="hljs-comment">// 在implements Servlet的类中，需要重写public ServletConfig getServletConfig() {}方法才可获取！</span><br>    <span class="hljs-comment">// 在extends HttpServlet的类中，父类的父类GenericServlet有该类实现返回当前ServletConfig对象!</span><br>    ServletConfig servletConfig1 = getServletConfig();<br>    System.out.println(servletConfig1); <span class="hljs-comment">// null</span><br><br>}<br><br><span class="hljs-comment">// extends HttpServlet的init方法：</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 对init方法的重写：</span><br><span class="hljs-comment"> * 注意：一定要显示调用super.init()方法，将当前config对象赋值给父类实现覆盖！</span><br><span class="hljs-comment"> *      否则会发生空指针异常！</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> config</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> ServletException</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(ServletConfig config)</span> <span class="hljs-keyword">throws</span> ServletException </span>{<br>    <span class="hljs-comment">// 调用父类init方法！</span><br>    <span class="hljs-keyword">super</span>.init(config);<br>    System.out.println(<span class="hljs-string">"重写init初始化方法做了一些操作！"</span>);<br>    <span class="hljs-comment">// 可以调用该方法获取当前servletConfig对象！该方法有GenericServlet父类实现！</span><br>    System.out.println(getServletConfig());<br>}<br></code></pre></td></tr></tbody></table></figure>
<h1 id="五、ServletContext类介绍"><a class="header-anchor" href="#五、ServletContext类介绍">¶</a>五、ServletContext类介绍</h1>
<h2 id="1、概述-2"><a class="header-anchor" href="#1、概述-2">¶</a>1、概述</h2>
<blockquote>
<p>简单理解：就是针对整个web工程的全局配置，任何<code>Servlet</code>程序都可以访问！</p>
</blockquote>
<ol>
<li><code>ServletContext</code> 是一个接口，它表示 <code>Servlet</code> 上下文对象</li>
<li>一个 web 工程，<strong>只有一个</strong> <code>ServletContext</code> 对象实例。</li>
<li><code>ServletContext</code> 对象是一个<strong>域对象</strong>。</li>
<li><code>ServletContext</code> 是在 web 工程部署<strong>启动的时候创建</strong>。在 web <strong>工程停止的时候销毁</strong>。</li>
</ol>
<p><strong>什么是域对象?</strong></p>
<p>域对象，是可以像 Map 一样存取数据的对象，叫域对象。这里的域指的是存取数据的操作范围，整个 web 工程。</p>
<p><strong>三个操作全局配置的方法：</strong></p>
<ul>
<li><code>setAttribute() </code></li>
<li><code>getAttribute()</code></li>
<li><code>removeAttribute()</code></li>
</ul>
<h2 id="2、作用-2"><a class="header-anchor" href="#2、作用-2">¶</a>2、作用</h2>
<ol>
<li>获取 web.xml 中配置的<strong>上下文参数</strong> <code>context-param</code></li>
<li>获取当前的<strong>工程路径</strong>，格式: /工程路径</li>
<li>获取工程部署后在服务器硬盘上的<strong>绝对路径</strong></li>
<li>像 Map 一样<strong>存取数据</strong></li>
</ol>
<h2 id="3、配置XML-2"><a class="header-anchor" href="#3、配置XML-2">¶</a>3、配置XML</h2>
<blockquote>
<p>配置位置：一般放到XML的最前面，表示是针对整个web工程的全局配置！</p>
<p>是一组组键值对，可以由多组！</p>
</blockquote>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span><br><span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">"4.0"</span>&gt;</span><br><br>	<span class="hljs-comment">&lt;!------------------------------------------------------------------------&gt;</span><br>    <span class="hljs-comment">&lt;!--context-param配置，是上下文参数，属于整个web工程！--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>username<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>itnxd<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>password<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>password123<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br>    <span class="hljs-comment">&lt;!------------------------------------------------------------------------&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.atguigu.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>
<h2 id="4、通过Java程序处理配置"><a class="header-anchor" href="#4、通过Java程序处理配置">¶</a>4、通过Java程序处理配置</h2>
<p><strong>关于获取工程部署后在服务器硬盘上的绝对路径：</strong></p>
<ol>
<li><code>/</code>会被服务器解析为<code>http://ip:port/工程名/</code>，然后被映射到IDEA工程下的web目录
<ol>
<li>斜杠后面可以添加路径及文件名，该路径以web目录为根目录</li>
</ol>
</li>
<li>启动部署后输出的第一行内容：<code>Using CATALINA_BASE:   "C:\Users\15890\AppData\Local\JetBrains\IntelliJIdea2020.3\tomcat\a65c5dac-b285-42bc-bb15-73d8c6c7bf83"</code></li>
<li>该路径为Tomcat服务器在C盘的一个针对IDEA的web项目的配置目录</li>
<li>该路径<code>C:\Users\15890\AppData\Local\JetBrains\IntelliJIdea2020.3\tomcat\a65c5dac-b285-42bc-bb15-73d8c6c7bf83\conf\Catalina\localhost</code>下有一个<code>07_Servlet.xml</code>配置文件</li>
<li>内容为<code>&lt;Context path="/07_Servlet" docBase="E:\Java学习\IdeaProject\JavaWeb\out\artifacts\07_Servlet_war_exploded" /&gt;</code></li>
<li>该路径就是对IDEA的web工程下web目录的一个映射</li>
<li>其实就是之前讲到的一种部署方式：<a href="https://www.itnxd.cn/posts/61877.html#6%E3%80%81%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE%E5%88%B0Tomcat%E4%B8%AD">通过Tomcat配置信息进行web项目映射！点击这里！</a></li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ContextServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        <span class="hljs-comment">// 1. 获取ServletContext对象</span><br>        ServletContext servletContext = getServletConfig().getServletContext();<br><br>        <span class="hljs-comment">// 2.  获取上下文参数</span><br>        String username = servletContext.getInitParameter(<span class="hljs-string">"username"</span>);<br>        String password = servletContext.getInitParameter(<span class="hljs-string">"password"</span>);<br>        System.out.println(<span class="hljs-string">"context-param参数username值："</span> + username);<br>        System.out.println(<span class="hljs-string">"context-param参数password值："</span> + password);<br><br>        <span class="hljs-comment">// 3. 获取工程路径</span><br>        System.out.println(<span class="hljs-string">"当前工程路径是："</span> + servletContext.getContextPath()); <span class="hljs-comment">// /07_Servlet</span><br><br>        <span class="hljs-comment">// 4. 获取工程部署后在服务器硬盘上的绝对路径</span><br>        System.out.println(<span class="hljs-string">"工程部署的路径是："</span> + servletContext.getRealPath(<span class="hljs-string">"/"</span>)); <span class="hljs-comment">// E:\Java学习\IdeaProject\JavaWeb\out\artifacts\07_Servlet_war_exploded\</span><br><br>        System.out.println(<span class="hljs-string">"工程下CSS的绝对路径是："</span> + servletContext.getRealPath(<span class="hljs-string">"/css"</span>));<br><br>        System.out.println(<span class="hljs-string">"工程下CSS下1.css的路径是："</span> + servletContext.getRealPath(<span class="hljs-string">"/css/1.css"</span>));<br><br>        <span class="hljs-comment">// 5. 像 Map一样存取数据 ContextServlet2.java中查看！</span><br><br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<p><strong>关于像Map一样存取数据：</strong></p>
<blockquote>
<p><strong>配置作用时间</strong>：在 web 工程部署<strong>启动</strong>的时候<strong>创建</strong>。在 web 工程<strong>停止</strong>的时候<strong>销毁</strong>，所有由程序创建的属性会在<strong>重新部署或重启服务器</strong>后<strong>自动被销毁</strong></p>
<p><strong>作用域</strong>：针对整个web工程：所以其他Servlet程序也可以访问到这些属性，并且该<code>servletContext</code>对象地址唯一确定！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ContextServlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        <span class="hljs-comment">// 父类GenericServlet也实现了该方法，return getServletConfig().getServletContext();</span><br>        ServletContext servletContext = getServletContext();<br><br>        <span class="hljs-comment">// 5. 像 Map一样存取数据</span><br><br>        <span class="hljs-comment">// 设置</span><br>        servletContext.setAttribute(<span class="hljs-string">"key1"</span>, <span class="hljs-string">"value1"</span>);<br>        servletContext.setAttribute(<span class="hljs-string">"key2"</span>, <span class="hljs-string">"value2"</span>);<br><br>        <span class="hljs-comment">// 获取</span><br>        Object value1 = servletContext.getAttribute(<span class="hljs-string">"key1"</span>);<br>        Object value2 = servletContext.getAttribute(<span class="hljs-string">"key2"</span>);<br>        System.out.println(<span class="hljs-string">"获取context-param中的域数据（全局数据）key1的值为："</span> + value1);<br>        System.out.println(<span class="hljs-string">"获取context-param中的域数据（全局数据）key2的值为："</span> + value2);<br><br>        <span class="hljs-comment">// 移除</span><br>        servletContext.removeAttribute(<span class="hljs-string">"key2"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h1 id="六、HTTP-协议介绍"><a class="header-anchor" href="#六、HTTP-协议介绍">¶</a>六、HTTP 协议介绍</h1>
<h2 id="1、概述-3"><a class="header-anchor" href="#1、概述-3">¶</a>1、概述</h2>
<p><strong>什么是协议?</strong></p>
<p>协议是指双方，或多方，相互约定好，大家都需要遵守的<strong>规则</strong>，叫协议。</p>
<p><strong>HTTP 协议?</strong></p>
<p>就是指，客户端和服务器之间通信时，发送的数据，需要遵守的规则，叫 HTTP 协议。</p>
<p>HTTP 协议中的数据又叫<strong>报文</strong>。</p>
<p><strong>多种请求方法：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@122929874465d486fb7fc16d4e1d80a240402519/2021/03/09/86708542870c12bdb3f79cb36549ebcf.png" alt=""></p>
<h2 id="2、请求HTTP协议格式"><a class="header-anchor" href="#2、请求HTTP协议格式">¶</a>2、请求HTTP协议格式</h2>
<blockquote>
<ul>
<li>客户端给服务器发送数据叫请求。</li>
<li>服务器给客户端回传数据叫响应。</li>
<li>请求主要分为 GET 请求，和 POST 请求两种</li>
</ul>
</blockquote>
<h4 id="2-1、GET请求"><a class="header-anchor" href="#2-1、GET请求">¶</a>2.1、GET请求</h4>
<p><strong>GET请求组成：</strong></p>
<ol>
<li>请求行
<ol>
<li>请求的方式 <code>GET</code></li>
<li>请求的资源路径</li>
<li>请求的协议的版本号 <code>HTTP/1.1</code></li>
</ol>
</li>
<li>请求头
<ol>
<li><code>key : value</code> 组成不同的<strong>键值对</strong>，表示不同的含义。</li>
</ol>
</li>
</ol>
<p><strong>如下图：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@a1300e71310d6c0e609cc436f29dcbcf4ad65439/2021/03/09/39b56c6af0c8be22abce73cb6a99cde6.png" alt=""></p>
<p><strong>使用GET请求的情景：</strong></p>
<ol>
<li><code>form</code> 标签 <code>method=get</code></li>
<li><code>a</code> 标签</li>
<li><code>link</code> 标签引入 css</li>
<li><code>Script</code> 标签引入 js 文件</li>
<li><code>img</code> 标签引入图片</li>
<li><code>iframe</code> 引入 html 页面</li>
<li>在<strong>浏览器地址</strong>栏中输入地址后敲回车</li>
</ol>
<h4 id="2-2、POST请求"><a class="header-anchor" href="#2-2、POST请求">¶</a>2.2、POST请求</h4>
<p><strong>POST请求组成：</strong></p>
<ol>
<li>请求行:
<ol>
<li>请求的方式 <code>POST</code></li>
<li>请求的资源路径<code>[+?+请求参数]</code></li>
<li>请求的协议的版本号 <code>HTTP/1.1</code></li>
</ol>
</li>
<li>请求头：
<ol>
<li><code>key : value</code> 不同的请求头，有不同的含义</li>
<li>空行</li>
</ol>
</li>
<li>请求体：就是发送给服务器的数据</li>
</ol>
<p><strong>如下图：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@a02cff6acd041e6c48db05e30cd21c6bef353ede/2021/03/09/b31ac0e653e1cc9cf15c77a5fb50e7a7.png" alt=""></p>
<p><strong>使用POST请求的情景：</strong></p>
<ul>
<li><code>form</code> 标签 <code>method=post</code></li>
</ul>
<h4 id="2-3、常用请求头"><a class="header-anchor" href="#2-3、常用请求头">¶</a>2.3、常用请求头</h4>
<ol>
<li>Accept: 表示客户端可以接收的数据类型</li>
<li>Accpet-Languege: 表示客户端可以接收的语言类型</li>
<li>User-Agent: 表示客户端浏览器的信息</li>
<li>Host： 表示请求时的服务器 ip 和端口号</li>
</ol>
<h4 id="2-4、全部请求头一览表"><a class="header-anchor" href="#2-4、全部请求头一览表">¶</a>2.4、全部请求头一览表</h4>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@e6a86a2ff848d2add5cf5a8c19429555986d7b4e/2021/03/09/4e5806ca994d381e1692f6c73b9b29d2.png" alt=""></p>
<h2 id="3、响应HTTP协议格式"><a class="header-anchor" href="#3、响应HTTP协议格式">¶</a>3、响应HTTP协议格式</h2>
<h4 id="3-1、响应HTTP协议组成"><a class="header-anchor" href="#3-1、响应HTTP协议组成">¶</a>3.1、响应HTTP协议组成</h4>
<ol>
<li>响应行
<ol>
<li>响应的协议和版本号</li>
<li>响应状态码</li>
<li>响应状态描述符</li>
</ol>
</li>
<li>响应头
<ol>
<li>key : value 不同的响应头，有其不同含义</li>
<li>空行</li>
</ol>
</li>
<li>响应体：就是回传给客户端的数据</li>
</ol>
<p><strong>如下图：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@c89f505bdef7856e51516f14d241ded430452adb/2021/03/09/62a8e8622a89a0b27c6f2ad437953bf5.png" alt=""></p>
<h4 id="3-2、常见响应码"><a class="header-anchor" href="#3-2、常见响应码">¶</a>3.2、常见响应码</h4>
<ol>
<li>200 表示请求成功</li>
<li>302 表示请求重定向</li>
<li>404 表示请求服务器已经收到了，但是你要的数据不存在（请求地址错误）</li>
<li>500 表示服务器已经收到请求，但是服务器内部错误（代码错误）</li>
</ol>
<h4 id="3-3、全部响应头一览表"><a class="header-anchor" href="#3-3、全部响应头一览表">¶</a>3.3、全部响应头一览表</h4>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@ece3e3d39341386e3700537e6cb552ab1eca6da2/2021/03/09/2cf403091b8cfbf30dfe56af58510110.png" alt=""></p>
<h2 id="4、MIME格式"><a class="header-anchor" href="#4、MIME格式">¶</a>4、MIME格式</h2>
<blockquote>
<p>MIME 是 HTTP 协议中数据类型。</p>
<p>MIME 的英文全称是<code>"Multipurpose Internet Mail Extensions" </code>多功能 Internet 邮件扩充服务。MIME 类型的格式是“大类型/小类型”，并与某一种文件的扩展名相对应。</p>
<p>所谓MIME格式：就是请求头和响应头中<code>content-type</code>的值，表示数据类型！</p>
</blockquote>
<p><strong>常见MIME类型：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@61fdbb8b269605941698e353180b55da78dc36a8/2021/03/09/0daee5aae527b7a6381401b6f552cfea.png" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@d841826d7c2d32c53b4a289d329009ea77a45bf1/2021/03/09/d1d9f178cd9120da55de7e355b6ff50d.png" alt=""></p>
<h1 id="七、HttpServletRequest类介绍"><a class="header-anchor" href="#七、HttpServletRequest类介绍">¶</a>七、HttpServletRequest类介绍</h1>
<h2 id="1、概述-4"><a class="header-anchor" href="#1、概述-4">¶</a>1、概述</h2>
<blockquote>
<p>每次只要有请求进入 Tomcat 服务器，Tomcat 服务器就会把请求过来的 HTTP 协议信息解析好封装到 Request 对象中。然后传递到 service 方法（doGet 和 doPost）中给我们使用。我们可以通过 HttpServletRequest 对象，获取到所有请求的信息。</p>
</blockquote>
<h2 id="2、常用方法"><a class="header-anchor" href="#2、常用方法">¶</a>2、常用方法</h2>
<h4 id="2-1、一般方法"><a class="header-anchor" href="#2-1、一般方法">¶</a>2.1、一般方法</h4>
<ol>
<li><code>getRequestURI()</code> 获取请求的资源路径</li>
<li><code>getRequestURL()</code> 获取请求的统一资源定位符（绝对路径）</li>
<li><code>getRemoteHost()</code> 获取客户端的 ip 地址
<ol>
<li>在 IDEA 中，使用 localhost 访问时，得到的客户端 ip 地址是 127.0.0.1，新版本中为：0:0:0:0:0:0:0:1</li>
<li>在 IDEA 中，使用 127.0.0.1 访问时，得到的客户端 ip 地址是 127.0.0.1</li>
<li>在 IDEA 中，使用 真实 ip 访问时，得到的客户端 ip 地址是真实的客户端 ip 地址</li>
</ol>
</li>
<li><code>getHeader()</code> 获取请求头</li>
<li><code>getMethod()</code> 获取请求的方式 GET 或 POST</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RequestAPIServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        <br>        System.out.println(req.getRequestURI());<br>        System.out.println(req.getRequestURL());<br>        System.out.println(req.getRemoteHost());<br>        System.out.println(req.getHeader(<span class="hljs-string">"User-Agent"</span>));<br>        System.out.println(req.getMethod());<br><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h4 id="2-2、请求参数获取"><a class="header-anchor" href="#2-2、请求参数获取">¶</a>2.2、请求参数获取</h4>
<ol>
<li><code>getParameter()</code> 获取请求的参数</li>
<li><code>getParameterValues()</code> 获取请求的参数（多个值的时候使用）</li>
<li><code>setAttribute(key, value)</code> 设置域数据</li>
<li><code>getAttribute(key) </code>获取域数据</li>
<li><code>getRequestDispatcher()</code> 获取请求转发对象</li>
</ol>
<p><strong>操作步骤：</strong></p>
<ul>
<li>发送请求：访问<code>http://localhost:8080/08_Servlet/form.html</code>勾选选项后点击提交按钮</li>
<li>接收并查看请求：IDEA控制台查看信息</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--form.html文件：--&gt;</span><br><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"http://localhost:8080/08_Servlet/PatameterServlet"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span><br>    用户名：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    密<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>码：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    兴<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>趣：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hobby"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"C++"</span>&gt;</span>C++<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hobby"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Java"</span>&gt;</span>Java<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hobby"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Python"</span>&gt;</span>Python<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"提交"</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PatameterServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        String username = request.getParameter(<span class="hljs-string">"username"</span>);<br>        String password = request.getParameter(<span class="hljs-string">"password"</span>);<br>        String[] hobbies = request.getParameterValues(<span class="hljs-string">"hobby"</span>);<br><br>        System.out.println(<span class="hljs-string">"用户名："</span> + username);<br>        System.out.println(<span class="hljs-string">"密  码："</span> + password);<br>        System.out.println(<span class="hljs-string">"爱  好："</span> + Arrays.toString(hobbies));<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br><br>        System.out.println(<span class="hljs-string">"------------doPost--------------"</span>);<br><br>        String username = request.getParameter(<span class="hljs-string">"username"</span>);<br>        String password = request.getParameter(<span class="hljs-string">"password"</span>);<br>        String[] hobbies = request.getParameterValues(<span class="hljs-string">"hobby"</span>);<br><br>        System.out.println(<span class="hljs-string">"用户名："</span> + username);<br>        System.out.println(<span class="hljs-string">"密  码："</span> + password);<br>        System.out.println(<span class="hljs-string">"爱  好："</span> + Arrays.toString(hobbies));<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="3、乱码解决"><a class="header-anchor" href="#3、乱码解决">¶</a>3、乱码解决</h2>
<h4 id="3-1、GET请求乱码"><a class="header-anchor" href="#3-1、GET请求乱码">¶</a>3.1、GET请求乱码</h4>
<blockquote>
<p>我目前没发生乱码，先进行一下记录！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 获取请求参数</span><br>String username = req.getParameter(<span class="hljs-string">"username"</span>);<br><span class="hljs-comment">//解决：先以 iso8859-1 进行编码，再以 utf-8 进行解码</span><br>username = <span class="hljs-keyword">new</span> String(username.getBytes(<span class="hljs-string">"iso-8859-1"</span>), <span class="hljs-string">"UTF-8"</span>);<br></code></pre></td></tr></tbody></table></figure>
<h4 id="3-2、POST请求乱码"><a class="header-anchor" href="#3-2、POST请求乱码">¶</a>3.2、POST请求乱码</h4>
<blockquote>
<p>在doPost最前方设置字符集解决乱码！</p>
<p><strong>注意：必须将该设置放到调用方法之前才会有效</strong></p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br><br>    <span class="hljs-comment">// 设置请求体的字符集为 UTF-8，从而解决 post 请求的中文乱码问题</span><br>    <span class="hljs-comment">// 注意：必须将该设置放到调用方法之前才会有效！</span><br>    request.setCharacterEncoding(<span class="hljs-string">"UTF-8"</span>);<br><br>    System.out.println(<span class="hljs-string">"------------doPost--------------"</span>);<br><br>    String username = request.getParameter(<span class="hljs-string">"username"</span>);<br>    String password = request.getParameter(<span class="hljs-string">"password"</span>);<br>    String[] hobbies = request.getParameterValues(<span class="hljs-string">"hobby"</span>);<br><br>    System.out.println(<span class="hljs-string">"用户名："</span> + username);<br>    System.out.println(<span class="hljs-string">"密  码："</span> + password);<br>    System.out.println(<span class="hljs-string">"爱  好："</span> + Arrays.toString(hobbies));<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="4、请求转发"><a class="header-anchor" href="#4、请求转发">¶</a>4、请求转发</h2>
<h4 id="4-1、概述"><a class="header-anchor" href="#4-1、概述">¶</a>4.1、概述</h4>
<blockquote>
<p>请求转发是指，服务器收到请求后，从一次资源跳转到另一个资源的操作叫请求转发。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@a138f5f8449f4ad3fa6371949770cd21ad3e5367/2021/03/09/ab1611a6a28185912214ea645492aabe.png" alt=""></p>
<h4 id="4-2、请求转发特点"><a class="header-anchor" href="#4-2、请求转发特点">¶</a>4.2、请求转发特点</h4>
<ol>
<li>
<p><strong>浏览器地址栏没有变化</strong></p>
</li>
<li>
<p>他们是<strong>一次请求</strong></p>
</li>
<li>
<p>他们共享<code>Request</code>域中的数据</p>
</li>
<li>
<p>可以转发到<code>WEB-INF</code>目录下**（直接无法访问，只有请求转发可以）**</p>
</li>
<li>
<p>不可以访问工程以外的资源</p>
</li>
</ol>
<h4 id="4-3、请求转发示例"><a class="header-anchor" href="#4-3、请求转发示例">¶</a>4.3、请求转发示例</h4>
<p><strong>注意：</strong></p>
<ul>
<li>
<p>请求转发路径必须要以斜杠打头！<code>/ </code>斜杠表示地址为：<code>http://ip:port/工程名/ </code>, 映射到 IDEA 代码的 web 目录</p>
</li>
<li>
<p><strong>无法</strong>访问Web工程以外的资源，必须以斜杠开头！</p>
</li>
<li>
<p>请求转发<strong>可以</strong>获取<code>WEB-INF</code>下的文件，具体见下方代码</p>
</li>
<li>
<p>使用<code>requestDispatcher.forward(req, resp)</code>方法转发到其他地址</p>
</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Servlet1代码：</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Servlet1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        <span class="hljs-comment">// 1. 获取请求参数，获取材料</span><br>        Object username = req.getParameter(<span class="hljs-string">"username"</span>);<br>        System.out.println(<span class="hljs-string">"在Servlet1（柜台一）中查看参数（材料）："</span> + username);<br>        <span class="hljs-comment">// 2. 保存参数，材料盖章</span><br>        req.setAttribute(<span class="hljs-string">"key1"</span>, <span class="hljs-string">"柜台一的章"</span>);<br>        <span class="hljs-comment">// 3. 获取请求转发路径，问路Servlet2怎么走</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        请求转发必须要以斜杠打头，/ 斜杠表示地址为：http://ip:port/工程名/ , 映射到 IDEA 代码的 web 目录</span><br><span class="hljs-comment">         */</span><br><br>        RequestDispatcher requestDispatcher = req.getRequestDispatcher(<span class="hljs-string">"/Servlet2"</span>);<br><br>        <span class="hljs-comment">// 请求转发可以获取WEB-INF下的文件！</span><br>        <span class="hljs-comment">// RequestDispatcher requestDispatcher = req.getRequestDispatcher("/WEB-INF/a.html");</span><br><br>        <span class="hljs-comment">// 无法访问Web工程以外的资源，必须一斜杠开头！</span><br>        <span class="hljs-comment">// 请求的资源[/08_Servlet/https://www.baidu.com/]不可用</span><br>        <span class="hljs-comment">// RequestDispatcher requestDispatcher = req.getRequestDispatcher("https://www.baidu.com/");</span><br><br>        <span class="hljs-comment">// 4. 请求转发，走向Servlet2</span><br>        requestDispatcher.forward(req, resp);<br>    }<br>}<br><br><span class="hljs-comment">// Servlet2代码：</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Servlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        <span class="hljs-comment">// 5. 获取请求参数，获取材料</span><br>        Object username = req.getParameter(<span class="hljs-string">"username"</span>);<br>        System.out.println(<span class="hljs-string">"在Servlet1（柜台二）中查看参数（材料）："</span> + username);<br>        <span class="hljs-comment">// 6. 查看材料是否盖章</span><br>        Object value1 = req.getAttribute(<span class="hljs-string">"key1"</span>);<br>        System.out.println(<span class="hljs-string">"柜台是否有章："</span> + value1);<br>        <span class="hljs-comment">// 7. 处理Servlet2自己业务</span><br>        System.out.println(<span class="hljs-string">"处理Servlet2自己业务"</span>);<br>        <span class="hljs-comment">// 8. 一次请求转发完成，返回到客户端</span><br>        System.out.println(<span class="hljs-string">"一次请求转发完成，返回到客户端"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h4 id="4-2、base标签使用"><a class="header-anchor" href="#4-2、base标签使用">¶</a>4.2、base标签使用</h4>
<blockquote>
<p><code>base</code>标签可以设置当前页面中所有相对路径工作时，参照哪个路径来进行跳转！</p>
<p><strong>主要用来解决请求转发导致的浏览器地址栏不发生改变，而相对路径却是参考浏览器地址进行判断导致的地址回退错误问题！</strong></p>
</blockquote>
<p><strong>运行结果：</strong></p>
<ul>
<li>不使用请求转发，由于浏览器地址动态改变，并不会产生地址回退错误</li>
<li>使用请求转发（需要在<code>index.html</code>写入a标签的地址为当前Servlet程序，即<code>ForwardC</code>），由于浏览器地址不发生改变，地址回退参考地址是转发前的地址，而不是转发后的地址导致回退错误</li>
<li>使用<code>base</code>标签（在回退的<code>c.html</code>文件写入<code>base</code>标签的地址为当前<code>c.html</code>的绝对路径），相当于针对相对路径的参考路径<strong>写死</strong>了！</li>
</ul>
<ol>
<li><strong>web目录下的index.html文件</strong></li>
</ol>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这是web工程下的index.html文件！<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"a/b/c.html"</span>&gt;</span>跳转到a/b/c.html文件！<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--  使用ForwardC类  --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://localhost:8080/08_Servlet/ForwardC"</span>&gt;</span>使用请求转发到：a/b/c.html<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>
<ol start="2">
<li><strong>web下的a下的b下的c.html文件</strong></li>
</ol>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        base 标签设置页面相对路径工作时参照的地址</span><br><span class="hljs-comment">        href 属性就是参数的地址值</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        base路径中的最后一个c.html可以省略！当然还是得保留最后一个斜杠表名为一个目录！</span><br><span class="hljs-comment">        http://localhost:8080/08_Servlet/a/b/</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        显示指明使用跳转时候的参照路径，防止使用请求转发导致地址栏地址的不改动造成参照地址错误，请求不到目标地址！</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">base</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://localhost:8080/08_Servlet/a/b/c.html"</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这是web工程下的a下的b下的c.html文件<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"../../index.html"</span>&gt;</span>跳转到首页index.html！<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure>
<ol start="3">
<li><strong>ForwardC的Servlet程序</strong></li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ForwardC</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        System.out.println(<span class="hljs-string">"经过了ForwardC程序转发！"</span>);<br>        req.getRequestDispatcher(<span class="hljs-string">"a/b/c.html"</span>).forward(req, resp);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="5、Web项目的路径与-含义"><a class="header-anchor" href="#5、Web项目的路径与-含义">¶</a>5、Web项目的路径与 / 含义</h2>
<h4 id="5-1、相对路径与绝对路径"><a class="header-anchor" href="#5-1、相对路径与绝对路径">¶</a>5.1、相对路径与绝对路径</h4>
<ul>
<li>
<p>相对路径</p>
<ul>
<li><code>.</code> 表示当前目录</li>
<li><code>..</code> 表示上一级目录</li>
<li><code>资源名</code> 表示当前目录/资源名</li>
</ul>
</li>
<li>
<p>绝对路径：`http://ip:port/工程路径/资源路径</p>
</li>
</ul>
<p><strong>注意</strong>：在实际开发中，<strong>路径都使用绝对路径</strong>，而不简单的使用相对路径。</p>
<ul>
<li>绝对路径</li>
<li><code>base</code>标签 + 相对路径</li>
</ul>
<h4 id="5-2、斜杠-含义"><a class="header-anchor" href="#5-2、斜杠-含义">¶</a>5.2、斜杠 / 含义</h4>
<blockquote>
<p>在 web 中 <code>/</code> 斜杠 是一种绝对路径。</p>
</blockquote>
<ul>
<li>
<p><code>/</code> 斜杠 如果被浏览器解析，得到的地址是：<code>http://ip:port/</code></p>
</li>
<li>
<p><code>/</code> 斜杠 如果被服务器解析，得到的地址是：<code>http://ip:port/工程路径</code></p>
<ul>
<li><code>&lt;url-pattern&gt;/servlet1&lt;/url-pattern&gt;</code></li>
<li><code>servletContext.getRealPath(“/”)</code></li>
<li><code>request.getRequestDispatcher(“/”)</code></li>
</ul>
</li>
</ul>
<p><strong>特殊情况</strong>： <code>response.sendRediect(“/”)</code>把斜杠发送给浏览器解析。得到 <code>http://ip:port/</code></p>
<h1 id="八、HttpServletResponse类介绍"><a class="header-anchor" href="#八、HttpServletResponse类介绍">¶</a>八、HttpServletResponse类介绍</h1>
<h2 id="1、概述-5"><a class="header-anchor" href="#1、概述-5">¶</a>1、概述</h2>
<blockquote>
<p><code>HttpServletResponse</code> 类和 <code>HttpServletRequest</code> 类一样。每次请求进来，Tomcat 服务器都会创建一个 <code>Response</code> 对象传递给 <code>Servlet</code> 程序去使用。<code>HttpServletRequest</code> 表示请求过来的信息，<code>HttpServletResponse</code> 表示所有响应的信息，我们如果需要设置返回给客户端的信息，都可以通过 <code>HttpServletResponse</code> 对象来进行设置！</p>
<p><strong>简单来说：</strong></p>
<ul>
<li>
<p><code>HttpServletRequest</code> ：负责接收客户端请求</p>
</li>
<li>
<p><code>HttpServletResponse</code> ：负责响应客户端请求</p>
</li>
</ul>
</blockquote>
<h2 id="2、两个输出流"><a class="header-anchor" href="#2、两个输出流">¶</a>2、两个输出流</h2>
<ol>
<li><code>getOutputStream()</code>：字节流，常用于下载（传递二进制数据）</li>
<li><code>getWriter()</code>： 字符流，常用于回传字符串（常用）</li>
</ol>
<p><strong>注意：二者不可同时使用，否则报错！</strong></p>
<h2 id="3、向客户端回传数据"><a class="header-anchor" href="#3、向客户端回传数据">¶</a>3、向客户端回传数据</h2>
<blockquote>
<p>使用字符流响应请求向浏览器发送数据！浏览器页面会有内容！</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ResponseIOServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        <span class="hljs-comment">// 举例：向客户端回传字符串数据！</span><br>        PrintWriter writer = resp.getWriter();<br>        writer.write(<span class="hljs-string">"服务器响应的内容..."</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="4、响应乱码解决"><a class="header-anchor" href="#4、响应乱码解决">¶</a>4、响应乱码解决</h2>
<ul>
<li>
<p>解决方案一：先设置服务器字符集，再通过响应头设置浏览器字符集为UTF-8**（不推荐）**</p>
</li>
<li>
<p>解决方案二：使用<code>setContentType("text/html; charset=UTF-8")</code>即可，可同时设置服务器，浏览器，响应头都为UTF-8**（推荐）**</p>
</li>
</ul>
<p><strong>注意：方案二一定要在获取流对象前调用才会生效！简单来说，设置字符集直接放到方法第一行即可！</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ResponseIOServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        <span class="hljs-comment">// 中文会发生乱码：</span><br>        <span class="hljs-comment">// 服务器默认字符集为：ISO-8859-1</span><br>        System.out.println(resp.getCharacterEncoding());<br><br>        <span class="hljs-comment">// 解决方案一：</span><br>        <span class="hljs-comment">// 设置服务器字符集为UTF-8</span><br>        resp.setCharacterEncoding(<span class="hljs-string">"UTF-8"</span>);<br>        <span class="hljs-comment">// 通过响应头设置浏览器字符集为UTF-8，默认为GBK</span><br>        resp.setHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/html; charset=UTF-8"</span>);<br><br>        <span class="hljs-comment">// 解决方案二：</span><br>        <span class="hljs-comment">// 它会同时设置服务器和客户端都使用 UTF-8 字符集，还设置了响应头</span><br>        <span class="hljs-comment">// 此方法一定要在获取流对象之前调用才有效</span><br>        resp.setContentType(<span class="hljs-string">"text/html; charset=UTF-8"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h2 id="5、请求重定向"><a class="header-anchor" href="#5、请求重定向">¶</a>5、请求重定向</h2>
<blockquote>
<p>请求重定向：是指客户端给服务器发请求，然后服务器告诉客户端说。我给你一些地址。你去新地址访问。叫请求重定向（因为之前的地址可能已经被废弃）。</p>
</blockquote>
<h4 id="5-1、请求重定向图示"><a class="header-anchor" href="#5-1、请求重定向图示">¶</a>5.1、请求重定向图示</h4>
<p><img src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@24e58384a1d671782f78a059f6e09c20e73044fa/2021/03/09/e412c3428884540e03cd083bbfe7693a.png" alt=""></p>
<h4 id="5-2、请求重定向特点"><a class="header-anchor" href="#5-2、请求重定向特点">¶</a>5.2、请求重定向特点</h4>
<ol>
<li>
<p>浏览器地址栏会发生<strong>变化</strong></p>
</li>
<li>
<p><strong>两次</strong>请求</p>
</li>
<li>
<p><strong>不共享</strong><code>Request</code>域中数据（两次请求完全无关）</p>
</li>
<li>
<p><strong>不能</strong>访问<code>WEB-INF</code>下的资源（只能使用请求转发访问）</p>
</li>
<li>
<p><strong>可以访问工程外的资源</strong></p>
</li>
</ol>
<h4 id="5-3、重定向方案一（不推荐）"><a class="header-anchor" href="#5-3、重定向方案一（不推荐）">¶</a>5.3、重定向方案一（不推荐）</h4>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Response1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        <span class="hljs-comment">// 1. 设置状态码为302</span><br>		resp.setStatus(<span class="hljs-number">302</span>);<br>        <span class="hljs-comment">// 2. 设置响应头，说明新地址</span><br>		resp.setHeader(<span class="hljs-string">"Location"</span>, <span class="hljs-string">"http://localhost:8080/08_Servlet/Response2"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<h4 id="5-4、重定向方案二（推荐）"><a class="header-anchor" href="#5-4、重定向方案二（推荐）">¶</a>5.4、重定向方案二（推荐）</h4>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Response1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>{<br>        <span class="hljs-comment">// 方案二：（推荐）</span><br>        resp.sendRedirect(<span class="hljs-string">"http://localhost:8080/08_Servlet/Response2"</span>);<br>        <span class="hljs-comment">// 也可以</span><br>		resp.sendRedirect(<span class="hljs-string">"https://www.baidu.com"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">ITNXD</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.itnxd.cn/posts/58740.html">https://www.itnxd.cn/posts/58740.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.itnxd.cn" target="_blank">小牛博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Servlet/">Servlet</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/niuxvdong/pic@96012753424dea53bf52f439d37afab1758bdf9f/2021/03/08/ba2bb57f28e91a5b1ea717ac93817640.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/WeChantQR.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/WeChantQR.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/AliPayQR.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/niuxvdong/images/img/AliPayQR.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/31659.html"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@1b4556770eb7f9733ec8ad3ea6a163eb026db341/2021/03/11/af59e853e69829cdb079b25f72f9e8d5.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JavaWeb之JSP使用总结</div></div></a></div><div class="next-post pull-right"><a href="/posts/61877.html"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/niuxvdong/pic@e1b3ed3fb2f690403a17d4e0078fb1a48a383b11/2021/03/07/57f696e6cd722842708032b130b5b0fe.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Tomcat服务器使用及IDEA整合Tomcat</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81Servlet%E4%BB%8B%E7%BB%8D"><span class="toc-text">一、Servlet介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Servlet%E7%A8%8B%E5%BA%8F%E5%88%9B%E5%BB%BA"><span class="toc-text">二、Servlet程序创建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E9%80%9A%E8%BF%87%E5%AE%9E%E7%8E%B0Servlet%E6%8E%A5%E5%8F%A3%E5%88%9B%E5%BB%BAServlet%E7%A8%8B%E5%BA%8F"><span class="toc-text">1、通过实现Servlet接口创建Servlet程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1%E3%80%81%E5%88%9B%E5%BB%BA%E6%AD%A5%E9%AA%A4"><span class="toc-text">1.1、创建步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2%E3%80%81Servlet%E5%88%9B%E5%BB%BA"><span class="toc-text">1.2、Servlet创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3%E3%80%81%E9%85%8D%E7%BD%AEXML"><span class="toc-text">1.3、配置XML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4%E3%80%81%E8%BF%90%E8%A1%8CServlet%E7%A8%8B%E5%BA%8F"><span class="toc-text">1.4、运行Servlet程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5%E3%80%81Servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">1.5、Servlet的生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6%E3%80%81URL%E5%9C%B0%E5%9D%80%E8%AE%BF%E9%97%AEServlet%E8%BF%87%E7%A8%8B"><span class="toc-text">1.6、URL地址访问Servlet过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-7%E3%80%81GET%E5%92%8CPOST%E8%AF%B7%E6%B1%82%E5%88%86%E5%8F%91%E5%A4%84%E7%90%86"><span class="toc-text">1.7、GET和POST请求分发处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E9%80%9A%E8%BF%87%E7%BB%A7%E6%89%BFHttpServlet%E5%88%9B%E5%BB%BAServlet%E7%A8%8B%E5%BA%8F%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">2、通过继承HttpServlet创建Servlet程序（推荐）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1%E3%80%81%E5%88%9B%E5%BB%BA%E6%AD%A5%E9%AA%A4"><span class="toc-text">2.1、创建步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2%E3%80%81Servlet%E5%88%9B%E5%BB%BA"><span class="toc-text">2.2、Servlet创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3%E3%80%81%E9%85%8D%E7%BD%AEXML"><span class="toc-text">2.3、配置XML</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E4%BD%BF%E7%94%A8IDEA%E5%88%9B%E5%BB%BAServlet%E7%A8%8B%E5%BA%8F"><span class="toc-text">3、使用IDEA创建Servlet程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1%E3%80%81%E4%BD%BFIDEA%E6%94%AF%E6%8C%81%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BAServlet%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">3.1、使IDEA支持直接创建Servlet的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2%E3%80%81Servlet%E5%88%9B%E5%BB%BA"><span class="toc-text">3.2、Servlet创建</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81Servlet%E7%B1%BB%E7%BB%A7%E6%89%BF%E4%BD%93%E7%B3%BB"><span class="toc-text">三、Servlet类继承体系</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81ServletConfig%E7%B1%BB%E4%BB%8B%E7%BB%8D"><span class="toc-text">四、ServletConfig类介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%A6%82%E8%BF%B0"><span class="toc-text">1、概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%BD%9C%E7%94%A8"><span class="toc-text">2、作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E9%85%8D%E7%BD%AEXML"><span class="toc-text">3、配置XML</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E9%80%9A%E8%BF%87Java%E7%A8%8B%E5%BA%8F%E8%8E%B7%E5%8F%96%E9%85%8D%E7%BD%AE"><span class="toc-text">4、通过Java程序获取配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81ServletContext%E7%B1%BB%E4%BB%8B%E7%BB%8D"><span class="toc-text">五、ServletContext类介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%A6%82%E8%BF%B0-2"><span class="toc-text">1、概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%BD%9C%E7%94%A8-2"><span class="toc-text">2、作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E9%85%8D%E7%BD%AEXML-2"><span class="toc-text">3、配置XML</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E9%80%9A%E8%BF%87Java%E7%A8%8B%E5%BA%8F%E5%A4%84%E7%90%86%E9%85%8D%E7%BD%AE"><span class="toc-text">4、通过Java程序处理配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81HTTP-%E5%8D%8F%E8%AE%AE%E4%BB%8B%E7%BB%8D"><span class="toc-text">六、HTTP 协议介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%A6%82%E8%BF%B0-3"><span class="toc-text">1、概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E8%AF%B7%E6%B1%82HTTP%E5%8D%8F%E8%AE%AE%E6%A0%BC%E5%BC%8F"><span class="toc-text">2、请求HTTP协议格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1%E3%80%81GET%E8%AF%B7%E6%B1%82"><span class="toc-text">2.1、GET请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2%E3%80%81POST%E8%AF%B7%E6%B1%82"><span class="toc-text">2.2、POST请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3%E3%80%81%E5%B8%B8%E7%94%A8%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-text">2.3、常用请求头</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4%E3%80%81%E5%85%A8%E9%83%A8%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%B8%80%E8%A7%88%E8%A1%A8"><span class="toc-text">2.4、全部请求头一览表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%93%8D%E5%BA%94HTTP%E5%8D%8F%E8%AE%AE%E6%A0%BC%E5%BC%8F"><span class="toc-text">3、响应HTTP协议格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1%E3%80%81%E5%93%8D%E5%BA%94HTTP%E5%8D%8F%E8%AE%AE%E7%BB%84%E6%88%90"><span class="toc-text">3.1、响应HTTP协议组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2%E3%80%81%E5%B8%B8%E8%A7%81%E5%93%8D%E5%BA%94%E7%A0%81"><span class="toc-text">3.2、常见响应码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3%E3%80%81%E5%85%A8%E9%83%A8%E5%93%8D%E5%BA%94%E5%A4%B4%E4%B8%80%E8%A7%88%E8%A1%A8"><span class="toc-text">3.3、全部响应头一览表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81MIME%E6%A0%BC%E5%BC%8F"><span class="toc-text">4、MIME格式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81HttpServletRequest%E7%B1%BB%E4%BB%8B%E7%BB%8D"><span class="toc-text">七、HttpServletRequest类介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%A6%82%E8%BF%B0-4"><span class="toc-text">1、概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">2、常用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1%E3%80%81%E4%B8%80%E8%88%AC%E6%96%B9%E6%B3%95"><span class="toc-text">2.1、一般方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2%E3%80%81%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E8%8E%B7%E5%8F%96"><span class="toc-text">2.2、请求参数获取</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E4%B9%B1%E7%A0%81%E8%A7%A3%E5%86%B3"><span class="toc-text">3、乱码解决</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1%E3%80%81GET%E8%AF%B7%E6%B1%82%E4%B9%B1%E7%A0%81"><span class="toc-text">3.1、GET请求乱码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2%E3%80%81POST%E8%AF%B7%E6%B1%82%E4%B9%B1%E7%A0%81"><span class="toc-text">3.2、POST请求乱码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-text">4、请求转发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1%E3%80%81%E6%A6%82%E8%BF%B0"><span class="toc-text">4.1、概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2%E3%80%81%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E7%89%B9%E7%82%B9"><span class="toc-text">4.2、请求转发特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3%E3%80%81%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E7%A4%BA%E4%BE%8B"><span class="toc-text">4.3、请求转发示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2%E3%80%81base%E6%A0%87%E7%AD%BE%E4%BD%BF%E7%94%A8"><span class="toc-text">4.2、base标签使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81Web%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%B7%AF%E5%BE%84%E4%B8%8E-%E5%90%AB%E4%B9%89"><span class="toc-text">5、Web项目的路径与 &#x2F; 含义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1%E3%80%81%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E4%B8%8E%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-text">5.1、相对路径与绝对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2%E3%80%81%E6%96%9C%E6%9D%A0-%E5%90%AB%E4%B9%89"><span class="toc-text">5.2、斜杠 &#x2F; 含义</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81HttpServletResponse%E7%B1%BB%E4%BB%8B%E7%BB%8D"><span class="toc-text">八、HttpServletResponse类介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%A6%82%E8%BF%B0-5"><span class="toc-text">1、概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%B8%A4%E4%B8%AA%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-text">2、两个输出流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%90%91%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9B%9E%E4%BC%A0%E6%95%B0%E6%8D%AE"><span class="toc-text">3、向客户端回传数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%93%8D%E5%BA%94%E4%B9%B1%E7%A0%81%E8%A7%A3%E5%86%B3"><span class="toc-text">4、响应乱码解决</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">5、请求重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1%E3%80%81%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91%E5%9B%BE%E7%A4%BA"><span class="toc-text">5.1、请求重定向图示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2%E3%80%81%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91%E7%89%B9%E7%82%B9"><span class="toc-text">5.2、请求重定向特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3%E3%80%81%E9%87%8D%E5%AE%9A%E5%90%91%E6%96%B9%E6%A1%88%E4%B8%80%EF%BC%88%E4%B8%8D%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">5.3、重定向方案一（不推荐）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4%E3%80%81%E9%87%8D%E5%AE%9A%E5%90%91%E6%96%B9%E6%A1%88%E4%BA%8C%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">5.4、重定向方案二（推荐）</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By ITNXD</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">CDN BY <a target="_blank" rel="external nofollow" href="https://www.jsdelivr.com/"><b>jsDelivr</b></a> | HOST BY  <a target="_blank" rel="external nofollow" href="https://vercel.com/"><b>Vercel</b></a> && <a target="_blank" rel="external nofollow" href="https://github.com/"><b>Github</b></a><br><img style="vertical-align:middle" src="https://cdn.jsdelivr.net/gh/lzyblog/image@4b122354dee27f3056fd3a7fc6a43dbf68cebf33/2020/11/16/025e5329f3592dfa03a13c5365323ba1.png" alt=""> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.beian.miit.gov.cn/"><b>晋ICP备19005025号-2</b></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      true && mermaid.init()
    })
  }
}</script><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'itnxd-8g1z2i760e99f516',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'itnxd-8g1z2i760e99f516',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'itnxd-8g1z2i760e99f516',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><div class="aplayer no-destroy" data-id="1551071404" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/6dc9e8f9.js","daovoice")
</script><script>var isChatBtn = true
daovoice('init', {
  app_id: '6dc9e8f9',},{
  launcher: { 
     disableLauncherIcon: isChatBtn // 悬浮 ICON 是否显示
  },
});
daovoice('update');

if (isChatBtn) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      daovoice('show')
    });
  }
  chatBtnFn()
} else {
  if (false) {
    function chatBtnHide () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: true // 悬浮 ICON 是否显示
        },
      });
    }
    function chatBtnShow () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: false // 悬浮 ICON 是否显示
        },
      });
    }
  }
}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>